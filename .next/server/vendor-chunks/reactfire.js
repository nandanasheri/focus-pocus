"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/reactfire";
exports.ids = ["vendor-chunks/reactfire"];
exports.modules = {

/***/ "(ssr)/./node_modules/reactfire/dist/index.js":
/*!**********************************************!*\
  !*** ./node_modules/reactfire/dist/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsProvider: () => (/* binding */ vi),\n/* harmony export */   AnalyticsSdkContext: () => (/* binding */ $e),\n/* harmony export */   AppCheckProvider: () => (/* binding */ fi),\n/* harmony export */   AppCheckSdkContext: () => (/* binding */ Fe),\n/* harmony export */   AuthCheck: () => (/* binding */ Qr),\n/* harmony export */   AuthProvider: () => (/* binding */ di),\n/* harmony export */   AuthSdkContext: () => (/* binding */ Pe),\n/* harmony export */   ClaimsCheck: () => (/* binding */ or),\n/* harmony export */   DatabaseProvider: () => (/* binding */ hi),\n/* harmony export */   DatabaseSdkContext: () => (/* binding */ Te),\n/* harmony export */   FirebaseAppProvider: () => (/* binding */ Lr),\n/* harmony export */   FirestoreProvider: () => (/* binding */ pi),\n/* harmony export */   FirestoreSdkContext: () => (/* binding */ De),\n/* harmony export */   FunctionsProvider: () => (/* binding */ mi),\n/* harmony export */   FunctionsSdkContext: () => (/* binding */ Re),\n/* harmony export */   PerformanceProvider: () => (/* binding */ bi),\n/* harmony export */   PerformanceSdkContext: () => (/* binding */ Ue),\n/* harmony export */   ReactFireError: () => (/* binding */ Me),\n/* harmony export */   RemoteConfigProvider: () => (/* binding */ gi),\n/* harmony export */   RemoteConfigSdkContext: () => (/* binding */ Ve),\n/* harmony export */   StorageImage: () => (/* binding */ li),\n/* harmony export */   StorageProvider: () => (/* binding */ yi),\n/* harmony export */   StorageSdkContext: () => (/* binding */ je),\n/* harmony export */   SuspenseWithPerf: () => (/* binding */ ri),\n/* harmony export */   checkIdField: () => (/* binding */ K),\n/* harmony export */   checkOptions: () => (/* binding */ At),\n/* harmony export */   checkinitialData: () => (/* binding */ Di),\n/* harmony export */   preloadFirestoreDoc: () => (/* binding */ Jr),\n/* harmony export */   preloadObservable: () => (/* binding */ Ae),\n/* harmony export */   preloadUser: () => (/* binding */ Wr),\n/* harmony export */   useAnalytics: () => (/* binding */ _i),\n/* harmony export */   useAppCheck: () => (/* binding */ wi),\n/* harmony export */   useAuth: () => (/* binding */ kt),\n/* harmony export */   useCallableFunctionResponse: () => (/* binding */ ni),\n/* harmony export */   useDatabase: () => (/* binding */ Si),\n/* harmony export */   useDatabaseList: () => (/* binding */ Yr),\n/* harmony export */   useDatabaseListData: () => (/* binding */ Gr),\n/* harmony export */   useDatabaseObject: () => (/* binding */ Kr),\n/* harmony export */   useDatabaseObjectData: () => (/* binding */ Hr),\n/* harmony export */   useFirebaseApp: () => (/* binding */ yt),\n/* harmony export */   useFirestore: () => (/* binding */ Ci),\n/* harmony export */   useFirestoreCollection: () => (/* binding */ ei),\n/* harmony export */   useFirestoreCollectionData: () => (/* binding */ ti),\n/* harmony export */   useFirestoreDoc: () => (/* binding */ zr),\n/* harmony export */   useFirestoreDocData: () => (/* binding */ Br),\n/* harmony export */   useFirestoreDocDataOnce: () => (/* binding */ Xr),\n/* harmony export */   useFirestoreDocOnce: () => (/* binding */ Zr),\n/* harmony export */   useFunctions: () => (/* binding */ Fr),\n/* harmony export */   useIdTokenResult: () => (/* binding */ rr),\n/* harmony export */   useInitAnalytics: () => (/* binding */ Oi),\n/* harmony export */   useInitAppCheck: () => (/* binding */ xi),\n/* harmony export */   useInitAuth: () => (/* binding */ Ii),\n/* harmony export */   useInitDatabase: () => (/* binding */ ki),\n/* harmony export */   useInitFirestore: () => (/* binding */ Ai),\n/* harmony export */   useInitFunctions: () => (/* binding */ Fi),\n/* harmony export */   useInitPerformance: () => (/* binding */ Pi),\n/* harmony export */   useInitRemoteConfig: () => (/* binding */ $i),\n/* harmony export */   useInitStorage: () => (/* binding */ Ti),\n/* harmony export */   useIsSuspenseEnabled: () => (/* binding */ Nr),\n/* harmony export */   useObservable: () => (/* binding */ g),\n/* harmony export */   usePerformance: () => (/* binding */ Ei),\n/* harmony export */   useRemoteConfig: () => (/* binding */ $r),\n/* harmony export */   useRemoteConfigAll: () => (/* binding */ si),\n/* harmony export */   useRemoteConfigBoolean: () => (/* binding */ ai),\n/* harmony export */   useRemoteConfigNumber: () => (/* binding */ ui),\n/* harmony export */   useRemoteConfigString: () => (/* binding */ oi),\n/* harmony export */   useRemoteConfigValue: () => (/* binding */ ii),\n/* harmony export */   useSigninCheck: () => (/* binding */ qr),\n/* harmony export */   useStorage: () => (/* binding */ Pr),\n/* harmony export */   useStorageDownloadURL: () => (/* binding */ kr),\n/* harmony export */   useStorageTask: () => (/* binding */ ci),\n/* harmony export */   useSuspenseEnabledFromConfigAndContext: () => (/* binding */ re),\n/* harmony export */   useUser: () => (/* binding */ nr),\n/* harmony export */   version: () => (/* binding */ er)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"(ssr)/./node_modules/firebase/auth/dist/index.mjs\");\n/* harmony import */ var firebase_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/database */ \"(ssr)/./node_modules/firebase/database/dist/index.mjs\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/app */ \"(ssr)/./node_modules/firebase/app/dist/index.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"(ssr)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var firebase_functions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/functions */ \"(ssr)/./node_modules/firebase/functions/dist/index.mjs\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/storage */ \"(ssr)/./node_modules/firebase/storage/dist/index.mjs\");\n/* harmony import */ var firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! firebase/remote-config */ \"(ssr)/./node_modules/firebase/remote-config/dist/index.mjs\");\n\n\n\n\n\n\n\n\nvar ce = function(e, t) {\n  return ce = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {\n    n.__proto__ = r;\n  } || function(n, r) {\n    for (var i in r)\n      Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);\n  }, ce(e, t);\n};\nfunction x(e, t) {\n  if (typeof t != \"function\" && t !== null)\n    throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n  ce(e, t);\n  function n() {\n    this.constructor = e;\n  }\n  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());\n}\nfunction Zt(e, t) {\n  var n = {};\n  for (var r in e)\n    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);\n  if (e != null && typeof Object.getOwnPropertySymbols == \"function\")\n    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)\n      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);\n  return n;\n}\nfunction pe(e, t, n, r) {\n  function i(o) {\n    return o instanceof n ? o : new n(function(u) {\n      u(o);\n    });\n  }\n  return new (n || (n = Promise))(function(o, u) {\n    function a(l) {\n      try {\n        c(r.next(l));\n      } catch (d) {\n        u(d);\n      }\n    }\n    function s(l) {\n      try {\n        c(r.throw(l));\n      } catch (d) {\n        u(d);\n      }\n    }\n    function c(l) {\n      l.done ? o(l.value) : i(l.value).then(a, s);\n    }\n    c((r = r.apply(e, t || [])).next());\n  });\n}\nfunction He(e, t) {\n  var n = { label: 0, sent: function() {\n    if (o[0] & 1)\n      throw o[1];\n    return o[1];\n  }, trys: [], ops: [] }, r, i, o, u;\n  return u = { next: a(0), throw: a(1), return: a(2) }, typeof Symbol == \"function\" && (u[Symbol.iterator] = function() {\n    return this;\n  }), u;\n  function a(c) {\n    return function(l) {\n      return s([c, l]);\n    };\n  }\n  function s(c) {\n    if (r)\n      throw new TypeError(\"Generator is already executing.\");\n    for (; n; )\n      try {\n        if (r = 1, i && (o = c[0] & 2 ? i.return : c[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, c[1])).done)\n          return o;\n        switch (i = 0, o && (c = [c[0] & 2, o.value]), c[0]) {\n          case 0:\n          case 1:\n            o = c;\n            break;\n          case 4:\n            return n.label++, { value: c[1], done: !1 };\n          case 5:\n            n.label++, i = c[1], c = [0];\n            continue;\n          case 7:\n            c = n.ops.pop(), n.trys.pop();\n            continue;\n          default:\n            if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (c[0] === 6 || c[0] === 2)) {\n              n = 0;\n              continue;\n            }\n            if (c[0] === 3 && (!o || c[1] > o[0] && c[1] < o[3])) {\n              n.label = c[1];\n              break;\n            }\n            if (c[0] === 6 && n.label < o[1]) {\n              n.label = o[1], o = c;\n              break;\n            }\n            if (o && n.label < o[2]) {\n              n.label = o[2], n.ops.push(c);\n              break;\n            }\n            o[2] && n.ops.pop(), n.trys.pop();\n            continue;\n        }\n        c = t.call(e, n);\n      } catch (l) {\n        c = [6, l], i = 0;\n      } finally {\n        r = o = 0;\n      }\n    if (c[0] & 5)\n      throw c[1];\n    return { value: c[0] ? c[1] : void 0, done: !0 };\n  }\n}\nfunction V(e) {\n  var t = typeof Symbol == \"function\" && Symbol.iterator, n = t && e[t], r = 0;\n  if (n)\n    return n.call(e);\n  if (e && typeof e.length == \"number\")\n    return {\n      next: function() {\n        return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };\n      }\n    };\n  throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction D(e, t) {\n  var n = typeof Symbol == \"function\" && e[Symbol.iterator];\n  if (!n)\n    return e;\n  var r = n.call(e), i, o = [], u;\n  try {\n    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )\n      o.push(i.value);\n  } catch (a) {\n    u = { error: a };\n  } finally {\n    try {\n      i && !i.done && (n = r.return) && n.call(r);\n    } finally {\n      if (u)\n        throw u.error;\n    }\n  }\n  return o;\n}\nfunction R(e, t, n) {\n  if (n || arguments.length === 2)\n    for (var r = 0, i = t.length, o; r < i; r++)\n      (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);\n  return e.concat(o || Array.prototype.slice.call(t));\n}\nfunction U(e) {\n  return this instanceof U ? (this.v = e, this) : new U(e);\n}\nfunction Bt(e, t, n) {\n  if (!Symbol.asyncIterator)\n    throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var r = n.apply(e, t || []), i, o = [];\n  return i = {}, u(\"next\"), u(\"throw\"), u(\"return\"), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i;\n  function u(v) {\n    r[v] && (i[v] = function(p) {\n      return new Promise(function(S, h) {\n        o.push([v, p, S, h]) > 1 || a(v, p);\n      });\n    });\n  }\n  function a(v, p) {\n    try {\n      s(r[v](p));\n    } catch (S) {\n      d(o[0][3], S);\n    }\n  }\n  function s(v) {\n    v.value instanceof U ? Promise.resolve(v.value.v).then(c, l) : d(o[0][2], v);\n  }\n  function c(v) {\n    a(\"next\", v);\n  }\n  function l(v) {\n    a(\"throw\", v);\n  }\n  function d(v, p) {\n    v(p), o.shift(), o.length && a(o[0][0], o[0][1]);\n  }\n}\nfunction Xt(e) {\n  if (!Symbol.asyncIterator)\n    throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var t = e[Symbol.asyncIterator], n;\n  return t ? t.call(e) : (e = typeof V == \"function\" ? V(e) : e[Symbol.iterator](), n = {}, r(\"next\"), r(\"throw\"), r(\"return\"), n[Symbol.asyncIterator] = function() {\n    return this;\n  }, n);\n  function r(o) {\n    n[o] = e[o] && function(u) {\n      return new Promise(function(a, s) {\n        u = e[o](u), i(a, s, u.done, u.value);\n      });\n    };\n  }\n  function i(o, u, a, s) {\n    Promise.resolve(s).then(function(c) {\n      o({ value: c, done: a });\n    }, u);\n  }\n}\nfunction b(e) {\n  return typeof e == \"function\";\n}\nfunction me(e) {\n  var t = function(r) {\n    Error.call(r), r.stack = new Error().stack;\n  }, n = e(t);\n  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;\n}\nvar oe = me(function(e) {\n  return function(n) {\n    e(this), this.message = n ? n.length + ` errors occurred during unsubscription:\n` + n.map(function(r, i) {\n      return i + 1 + \") \" + r.toString();\n    }).join(`\n  `) : \"\", this.name = \"UnsubscriptionError\", this.errors = n;\n  };\n});\nfunction B(e, t) {\n  if (e) {\n    var n = e.indexOf(t);\n    0 <= n && e.splice(n, 1);\n  }\n}\nvar N = function() {\n  function e(t) {\n    this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;\n  }\n  return e.prototype.unsubscribe = function() {\n    var t, n, r, i, o;\n    if (!this.closed) {\n      this.closed = !0;\n      var u = this._parentage;\n      if (u)\n        if (this._parentage = null, Array.isArray(u))\n          try {\n            for (var a = V(u), s = a.next(); !s.done; s = a.next()) {\n              var c = s.value;\n              c.remove(this);\n            }\n          } catch (h) {\n            t = { error: h };\n          } finally {\n            try {\n              s && !s.done && (n = a.return) && n.call(a);\n            } finally {\n              if (t)\n                throw t.error;\n            }\n          }\n        else\n          u.remove(this);\n      var l = this.initialTeardown;\n      if (b(l))\n        try {\n          l();\n        } catch (h) {\n          o = h instanceof oe ? h.errors : [h];\n        }\n      var d = this._finalizers;\n      if (d) {\n        this._finalizers = null;\n        try {\n          for (var v = V(d), p = v.next(); !p.done; p = v.next()) {\n            var S = p.value;\n            try {\n              We(S);\n            } catch (h) {\n              o = o != null ? o : [], h instanceof oe ? o = R(R([], D(o)), D(h.errors)) : o.push(h);\n            }\n          }\n        } catch (h) {\n          r = { error: h };\n        } finally {\n          try {\n            p && !p.done && (i = v.return) && i.call(v);\n          } finally {\n            if (r)\n              throw r.error;\n          }\n        }\n      }\n      if (o)\n        throw new oe(o);\n    }\n  }, e.prototype.add = function(t) {\n    var n;\n    if (t && t !== this)\n      if (this.closed)\n        We(t);\n      else {\n        if (t instanceof e) {\n          if (t.closed || t._hasParent(this))\n            return;\n          t._addParent(this);\n        }\n        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);\n      }\n  }, e.prototype._hasParent = function(t) {\n    var n = this._parentage;\n    return n === t || Array.isArray(n) && n.includes(t);\n  }, e.prototype._addParent = function(t) {\n    var n = this._parentage;\n    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;\n  }, e.prototype._removeParent = function(t) {\n    var n = this._parentage;\n    n === t ? this._parentage = null : Array.isArray(n) && B(n, t);\n  }, e.prototype.remove = function(t) {\n    var n = this._finalizers;\n    n && B(n, t), t instanceof e && t._removeParent(this);\n  }, e.EMPTY = function() {\n    var t = new e();\n    return t.closed = !0, t;\n  }(), e;\n}(), Ye = N.EMPTY;\nfunction Ge(e) {\n  return e instanceof N || e && \"closed\" in e && b(e.remove) && b(e.add) && b(e.unsubscribe);\n}\nfunction We(e) {\n  b(e) ? e() : e.unsubscribe();\n}\nvar be = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: void 0,\n  useDeprecatedSynchronousErrorHandling: !1,\n  useDeprecatedNextContext: !1\n}, le = {\n  setTimeout: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    var i = le.delegate;\n    return i != null && i.setTimeout ? i.setTimeout.apply(i, R([e, t], D(n))) : setTimeout.apply(void 0, R([e, t], D(n)));\n  },\n  clearTimeout: function(e) {\n    var t = le.delegate;\n    return ((t == null ? void 0 : t.clearTimeout) || clearTimeout)(e);\n  },\n  delegate: void 0\n};\nfunction Je(e) {\n  le.setTimeout(function() {\n    throw e;\n  });\n}\nfunction fe() {\n}\nvar G = null;\nfunction z(e) {\n  if (be.useDeprecatedSynchronousErrorHandling) {\n    var t = !G;\n    if (t && (G = { errorThrown: !1, error: null }), e(), t) {\n      var n = G, r = n.errorThrown, i = n.error;\n      if (G = null, r)\n        throw i;\n    }\n  } else\n    e();\n}\nvar ye = function(e) {\n  x(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r.isStopped = !1, n ? (r.destination = n, Ge(n) && n.add(r)) : r.destination = rn, r;\n  }\n  return t.create = function(n, r, i) {\n    return new L(n, r, i);\n  }, t.prototype.next = function(n) {\n    this.isStopped || this._next(n);\n  }, t.prototype.error = function(n) {\n    this.isStopped || (this.isStopped = !0, this._error(n));\n  }, t.prototype.complete = function() {\n    this.isStopped || (this.isStopped = !0, this._complete());\n  }, t.prototype.unsubscribe = function() {\n    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);\n  }, t.prototype._next = function(n) {\n    this.destination.next(n);\n  }, t.prototype._error = function(n) {\n    try {\n      this.destination.error(n);\n    } finally {\n      this.unsubscribe();\n    }\n  }, t.prototype._complete = function() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }, t;\n}(N), en = Function.prototype.bind;\nfunction ue(e, t) {\n  return en.call(e, t);\n}\nvar tn = function() {\n  function e(t) {\n    this.partialObserver = t;\n  }\n  return e.prototype.next = function(t) {\n    var n = this.partialObserver;\n    if (n.next)\n      try {\n        n.next(t);\n      } catch (r) {\n        J(r);\n      }\n  }, e.prototype.error = function(t) {\n    var n = this.partialObserver;\n    if (n.error)\n      try {\n        n.error(t);\n      } catch (r) {\n        J(r);\n      }\n    else\n      J(t);\n  }, e.prototype.complete = function() {\n    var t = this.partialObserver;\n    if (t.complete)\n      try {\n        t.complete();\n      } catch (n) {\n        J(n);\n      }\n  }, e;\n}(), L = function(e) {\n  x(t, e);\n  function t(n, r, i) {\n    var o = e.call(this) || this, u;\n    if (b(n) || !n)\n      u = {\n        next: n != null ? n : void 0,\n        error: r != null ? r : void 0,\n        complete: i != null ? i : void 0\n      };\n    else {\n      var a;\n      o && be.useDeprecatedNextContext ? (a = Object.create(n), a.unsubscribe = function() {\n        return o.unsubscribe();\n      }, u = {\n        next: n.next && ue(n.next, a),\n        error: n.error && ue(n.error, a),\n        complete: n.complete && ue(n.complete, a)\n      }) : u = n;\n    }\n    return o.destination = new tn(u), o;\n  }\n  return t;\n}(ye);\nfunction J(e) {\n  Je(e);\n}\nfunction nn(e) {\n  throw e;\n}\nvar rn = {\n  closed: !0,\n  next: fe,\n  error: nn,\n  complete: fe\n}, ge = function() {\n  return typeof Symbol == \"function\" && Symbol.observable || \"@@observable\";\n}();\nfunction W(e) {\n  return e;\n}\nfunction on(e) {\n  return e.length === 0 ? W : e.length === 1 ? e[0] : function(n) {\n    return e.reduce(function(r, i) {\n      return i(r);\n    }, n);\n  };\n}\nvar y = function() {\n  function e(t) {\n    t && (this._subscribe = t);\n  }\n  return e.prototype.lift = function(t) {\n    var n = new e();\n    return n.source = this, n.operator = t, n;\n  }, e.prototype.subscribe = function(t, n, r) {\n    var i = this, o = an(t) ? t : new L(t, n, r);\n    return z(function() {\n      var u = i, a = u.operator, s = u.source;\n      o.add(a ? a.call(o, s) : s ? i._subscribe(o) : i._trySubscribe(o));\n    }), o;\n  }, e.prototype._trySubscribe = function(t) {\n    try {\n      return this._subscribe(t);\n    } catch (n) {\n      t.error(n);\n    }\n  }, e.prototype.forEach = function(t, n) {\n    var r = this;\n    return n = qe(n), new n(function(i, o) {\n      var u = new L({\n        next: function(a) {\n          try {\n            t(a);\n          } catch (s) {\n            o(s), u.unsubscribe();\n          }\n        },\n        error: o,\n        complete: i\n      });\n      r.subscribe(u);\n    });\n  }, e.prototype._subscribe = function(t) {\n    var n;\n    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);\n  }, e.prototype[ge] = function() {\n    return this;\n  }, e.prototype.pipe = function() {\n    for (var t = [], n = 0; n < arguments.length; n++)\n      t[n] = arguments[n];\n    return on(t)(this);\n  }, e.prototype.toPromise = function(t) {\n    var n = this;\n    return t = qe(t), new t(function(r, i) {\n      var o;\n      n.subscribe(function(u) {\n        return o = u;\n      }, function(u) {\n        return i(u);\n      }, function() {\n        return r(o);\n      });\n    });\n  }, e.create = function(t) {\n    return new e(t);\n  }, e;\n}();\nfunction qe(e) {\n  var t;\n  return (t = e != null ? e : be.Promise) !== null && t !== void 0 ? t : Promise;\n}\nfunction un(e) {\n  return e && b(e.next) && b(e.error) && b(e.complete);\n}\nfunction an(e) {\n  return e && e instanceof ye || un(e) && Ge(e);\n}\nfunction sn(e) {\n  return b(e == null ? void 0 : e.lift);\n}\nfunction _(e) {\n  return function(t) {\n    if (sn(t))\n      return t.lift(function(n) {\n        try {\n          return e(n, this);\n        } catch (r) {\n          this.error(r);\n        }\n      });\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\nfunction w(e, t, n, r, i) {\n  return new cn(e, t, n, r, i);\n}\nvar cn = function(e) {\n  x(t, e);\n  function t(n, r, i, o, u, a) {\n    var s = e.call(this, n) || this;\n    return s.onFinalize = u, s.shouldUnsubscribe = a, s._next = r ? function(c) {\n      try {\n        r(c);\n      } catch (l) {\n        n.error(l);\n      }\n    } : e.prototype._next, s._error = o ? function(c) {\n      try {\n        o(c);\n      } catch (l) {\n        n.error(l);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._error, s._complete = i ? function() {\n      try {\n        i();\n      } catch (c) {\n        n.error(c);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._complete, s;\n  }\n  return t.prototype.unsubscribe = function() {\n    var n;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var r = this.closed;\n      e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));\n    }\n  }, t;\n}(ye), ln = me(function(e) {\n  return function() {\n    e(this), this.name = \"ObjectUnsubscribedError\", this.message = \"object unsubscribed\";\n  };\n}), ne = function(e) {\n  x(t, e);\n  function t() {\n    var n = e.call(this) || this;\n    return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;\n  }\n  return t.prototype.lift = function(n) {\n    var r = new Qe(this, this);\n    return r.operator = n, r;\n  }, t.prototype._throwIfClosed = function() {\n    if (this.closed)\n      throw new ln();\n  }, t.prototype.next = function(n) {\n    var r = this;\n    z(function() {\n      var i, o;\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.currentObservers || (r.currentObservers = Array.from(r.observers));\n        try {\n          for (var u = V(r.currentObservers), a = u.next(); !a.done; a = u.next()) {\n            var s = a.value;\n            s.next(n);\n          }\n        } catch (c) {\n          i = { error: c };\n        } finally {\n          try {\n            a && !a.done && (o = u.return) && o.call(u);\n          } finally {\n            if (i)\n              throw i.error;\n          }\n        }\n      }\n    });\n  }, t.prototype.error = function(n) {\n    var r = this;\n    z(function() {\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.hasError = r.isStopped = !0, r.thrownError = n;\n        for (var i = r.observers; i.length; )\n          i.shift().error(n);\n      }\n    });\n  }, t.prototype.complete = function() {\n    var n = this;\n    z(function() {\n      if (n._throwIfClosed(), !n.isStopped) {\n        n.isStopped = !0;\n        for (var r = n.observers; r.length; )\n          r.shift().complete();\n      }\n    });\n  }, t.prototype.unsubscribe = function() {\n    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;\n  }, Object.defineProperty(t.prototype, \"observed\", {\n    get: function() {\n      var n;\n      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._trySubscribe = function(n) {\n    return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);\n  }, t.prototype._subscribe = function(n) {\n    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);\n  }, t.prototype._innerSubscribe = function(n) {\n    var r = this, i = this, o = i.hasError, u = i.isStopped, a = i.observers;\n    return o || u ? Ye : (this.currentObservers = null, a.push(n), new N(function() {\n      r.currentObservers = null, B(a, n);\n    }));\n  }, t.prototype._checkFinalizedStatuses = function(n) {\n    var r = this, i = r.hasError, o = r.thrownError, u = r.isStopped;\n    i ? n.error(o) : u && n.complete();\n  }, t.prototype.asObservable = function() {\n    var n = new y();\n    return n.source = this, n;\n  }, t.create = function(n, r) {\n    return new Qe(n, r);\n  }, t;\n}(y), Qe = function(e) {\n  x(t, e);\n  function t(n, r) {\n    var i = e.call(this) || this;\n    return i.destination = n, i.source = r, i;\n  }\n  return t.prototype.next = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.error = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.complete = function() {\n    var n, r;\n    (r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);\n  }, t.prototype._subscribe = function(n) {\n    var r, i;\n    return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : Ye;\n  }, t;\n}(ne), we = {\n  now: function() {\n    return (we.delegate || Date).now();\n  },\n  delegate: void 0\n}, fn = function(e) {\n  x(t, e);\n  function t(n, r, i) {\n    n === void 0 && (n = 1 / 0), r === void 0 && (r = 1 / 0), i === void 0 && (i = we);\n    var o = e.call(this) || this;\n    return o._bufferSize = n, o._windowTime = r, o._timestampProvider = i, o._buffer = [], o._infiniteTimeWindow = !0, o._infiniteTimeWindow = r === 1 / 0, o._bufferSize = Math.max(1, n), o._windowTime = Math.max(1, r), o;\n  }\n  return t.prototype.next = function(n) {\n    var r = this, i = r.isStopped, o = r._buffer, u = r._infiniteTimeWindow, a = r._timestampProvider, s = r._windowTime;\n    i || (o.push(n), !u && o.push(a.now() + s)), this._trimBuffer(), e.prototype.next.call(this, n);\n  }, t.prototype._subscribe = function(n) {\n    this._throwIfClosed(), this._trimBuffer();\n    for (var r = this._innerSubscribe(n), i = this, o = i._infiniteTimeWindow, u = i._buffer, a = u.slice(), s = 0; s < a.length && !n.closed; s += o ? 1 : 2)\n      n.next(a[s]);\n    return this._checkFinalizedStatuses(n), r;\n  }, t.prototype._trimBuffer = function() {\n    var n = this, r = n._bufferSize, i = n._timestampProvider, o = n._buffer, u = n._infiniteTimeWindow, a = (u ? 1 : 2) * r;\n    if (r < 1 / 0 && a < o.length && o.splice(0, o.length - a), !u) {\n      for (var s = i.now(), c = 0, l = 1; l < o.length && o[l] <= s; l += 2)\n        c = l;\n      c && o.splice(0, c + 1);\n    }\n  }, t;\n}(ne), dn = function(e) {\n  x(t, e);\n  function t(n, r) {\n    return e.call(this) || this;\n  }\n  return t.prototype.schedule = function(n, r) {\n    return this;\n  }, t;\n}(N), X = {\n  setInterval: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    var i = X.delegate;\n    return i != null && i.setInterval ? i.setInterval.apply(i, R([e, t], D(n))) : setInterval.apply(void 0, R([e, t], D(n)));\n  },\n  clearInterval: function(e) {\n    var t = X.delegate;\n    return ((t == null ? void 0 : t.clearInterval) || clearInterval)(e);\n  },\n  delegate: void 0\n}, vn = function(e) {\n  x(t, e);\n  function t(n, r) {\n    var i = e.call(this, n, r) || this;\n    return i.scheduler = n, i.work = r, i.pending = !1, i;\n  }\n  return t.prototype.schedule = function(n, r) {\n    if (r === void 0 && (r = 0), this.closed)\n      return this;\n    this.state = n;\n    var i = this.id, o = this.scheduler;\n    return i != null && (this.id = this.recycleAsyncId(o, i, r)), this.pending = !0, this.delay = r, this.id = this.id || this.requestAsyncId(o, this.id, r), this;\n  }, t.prototype.requestAsyncId = function(n, r, i) {\n    return i === void 0 && (i = 0), X.setInterval(n.flush.bind(n, this), i);\n  }, t.prototype.recycleAsyncId = function(n, r, i) {\n    if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === !1)\n      return r;\n    X.clearInterval(r);\n  }, t.prototype.execute = function(n, r) {\n    if (this.closed)\n      return new Error(\"executing a cancelled action\");\n    this.pending = !1;\n    var i = this._execute(n, r);\n    if (i)\n      return i;\n    this.pending === !1 && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));\n  }, t.prototype._execute = function(n, r) {\n    var i = !1, o;\n    try {\n      this.work(n);\n    } catch (u) {\n      i = !0, o = u || new Error(\"Scheduled action threw falsy error\");\n    }\n    if (i)\n      return this.unsubscribe(), o;\n  }, t.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      var n = this, r = n.id, i = n.scheduler, o = i.actions;\n      this.work = this.state = this.scheduler = null, this.pending = !1, B(o, this), r != null && (this.id = this.recycleAsyncId(i, r, null)), this.delay = null, e.prototype.unsubscribe.call(this);\n    }\n  }, t;\n}(dn), Ke = function() {\n  function e(t, n) {\n    n === void 0 && (n = e.now), this.schedulerActionCtor = t, this.now = n;\n  }\n  return e.prototype.schedule = function(t, n, r) {\n    return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r, n);\n  }, e.now = we.now, e;\n}(), hn = function(e) {\n  x(t, e);\n  function t(n, r) {\n    r === void 0 && (r = Ke.now);\n    var i = e.call(this, n, r) || this;\n    return i.actions = [], i._active = !1, i._scheduled = void 0, i;\n  }\n  return t.prototype.flush = function(n) {\n    var r = this.actions;\n    if (this._active) {\n      r.push(n);\n      return;\n    }\n    var i;\n    this._active = !0;\n    do\n      if (i = n.execute(n.state, n.delay))\n        break;\n    while (n = r.shift());\n    if (this._active = !1, i) {\n      for (; n = r.shift(); )\n        n.unsubscribe();\n      throw i;\n    }\n  }, t;\n}(Ke), _e = new hn(vn), pn = _e, Se = new y(function(e) {\n  return e.complete();\n});\nfunction mn(e) {\n  return e ? bn(e) : Se;\n}\nfunction bn(e) {\n  return new y(function(t) {\n    return e.schedule(function() {\n      return t.complete();\n    });\n  });\n}\nfunction ze(e) {\n  return e && b(e.schedule);\n}\nfunction Ze(e) {\n  return e[e.length - 1];\n}\nfunction Ce(e) {\n  return ze(Ze(e)) ? e.pop() : void 0;\n}\nfunction yn(e, t) {\n  return typeof Ze(e) == \"number\" ? e.pop() : t;\n}\nvar Be = function(e) {\n  return e && typeof e.length == \"number\" && typeof e != \"function\";\n};\nfunction Xe(e) {\n  return b(e == null ? void 0 : e.then);\n}\nfunction et(e) {\n  return b(e[ge]);\n}\nfunction tt(e) {\n  return Symbol.asyncIterator && b(e == null ? void 0 : e[Symbol.asyncIterator]);\n}\nfunction nt(e) {\n  return new TypeError(\"You provided \" + (e !== null && typeof e == \"object\" ? \"an invalid object\" : \"'\" + e + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\nfunction gn() {\n  return typeof Symbol != \"function\" || !Symbol.iterator ? \"@@iterator\" : Symbol.iterator;\n}\nvar rt = gn();\nfunction it(e) {\n  return b(e == null ? void 0 : e[rt]);\n}\nfunction ot(e) {\n  return Bt(this, arguments, function() {\n    var n, r, i, o;\n    return He(this, function(u) {\n      switch (u.label) {\n        case 0:\n          n = e.getReader(), u.label = 1;\n        case 1:\n          u.trys.push([1, , 9, 10]), u.label = 2;\n        case 2:\n          return [4, U(n.read())];\n        case 3:\n          return r = u.sent(), i = r.value, o = r.done, o ? [4, U(void 0)] : [3, 5];\n        case 4:\n          return [2, u.sent()];\n        case 5:\n          return [4, U(i)];\n        case 6:\n          return [4, u.sent()];\n        case 7:\n          return u.sent(), [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          return n.releaseLock(), [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction ut(e) {\n  return b(e == null ? void 0 : e.getReader);\n}\nfunction I(e) {\n  if (e instanceof y)\n    return e;\n  if (e != null) {\n    if (et(e))\n      return wn(e);\n    if (Be(e))\n      return _n(e);\n    if (Xe(e))\n      return Sn(e);\n    if (tt(e))\n      return at(e);\n    if (it(e))\n      return Cn(e);\n    if (ut(e))\n      return En(e);\n  }\n  throw nt(e);\n}\nfunction wn(e) {\n  return new y(function(t) {\n    var n = e[ge]();\n    if (b(n.subscribe))\n      return n.subscribe(t);\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction _n(e) {\n  return new y(function(t) {\n    for (var n = 0; n < e.length && !t.closed; n++)\n      t.next(e[n]);\n    t.complete();\n  });\n}\nfunction Sn(e) {\n  return new y(function(t) {\n    e.then(function(n) {\n      t.closed || (t.next(n), t.complete());\n    }, function(n) {\n      return t.error(n);\n    }).then(null, Je);\n  });\n}\nfunction Cn(e) {\n  return new y(function(t) {\n    var n, r;\n    try {\n      for (var i = V(e), o = i.next(); !o.done; o = i.next()) {\n        var u = o.value;\n        if (t.next(u), t.closed)\n          return;\n      }\n    } catch (a) {\n      n = { error: a };\n    } finally {\n      try {\n        o && !o.done && (r = i.return) && r.call(i);\n      } finally {\n        if (n)\n          throw n.error;\n      }\n    }\n    t.complete();\n  });\n}\nfunction at(e) {\n  return new y(function(t) {\n    xn(e, t).catch(function(n) {\n      return t.error(n);\n    });\n  });\n}\nfunction En(e) {\n  return at(ot(e));\n}\nfunction xn(e, t) {\n  var n, r, i, o;\n  return pe(this, void 0, void 0, function() {\n    var u, a;\n    return He(this, function(s) {\n      switch (s.label) {\n        case 0:\n          s.trys.push([0, 5, 6, 11]), n = Xt(e), s.label = 1;\n        case 1:\n          return [4, n.next()];\n        case 2:\n          if (r = s.sent(), !!r.done)\n            return [3, 4];\n          if (u = r.value, t.next(u), t.closed)\n            return [2];\n          s.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          return a = s.sent(), i = { error: a }, [3, 11];\n        case 6:\n          return s.trys.push([6, , 9, 10]), r && !r.done && (o = n.return) ? [4, o.call(n)] : [3, 8];\n        case 7:\n          s.sent(), s.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (i)\n            throw i.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          return t.complete(), [2];\n      }\n    });\n  });\n}\nfunction P(e, t, n, r, i) {\n  r === void 0 && (r = 0), i === void 0 && (i = !1);\n  var o = t.schedule(function() {\n    n(), i ? e.add(this.schedule(null, r)) : this.unsubscribe();\n  }, r);\n  if (e.add(o), !i)\n    return o;\n}\nfunction st(e, t) {\n  return t === void 0 && (t = 0), _(function(n, r) {\n    n.subscribe(w(r, function(i) {\n      return P(r, e, function() {\n        return r.next(i);\n      }, t);\n    }, function() {\n      return P(r, e, function() {\n        return r.complete();\n      }, t);\n    }, function(i) {\n      return P(r, e, function() {\n        return r.error(i);\n      }, t);\n    }));\n  });\n}\nfunction ct(e, t) {\n  return t === void 0 && (t = 0), _(function(n, r) {\n    r.add(e.schedule(function() {\n      return n.subscribe(r);\n    }, t));\n  });\n}\nfunction In(e, t) {\n  return I(e).pipe(ct(t), st(t));\n}\nfunction On(e, t) {\n  return I(e).pipe(ct(t), st(t));\n}\nfunction kn(e, t) {\n  return new y(function(n) {\n    var r = 0;\n    return t.schedule(function() {\n      r === e.length ? n.complete() : (n.next(e[r++]), n.closed || this.schedule());\n    });\n  });\n}\nfunction An(e, t) {\n  return new y(function(n) {\n    var r;\n    return P(n, t, function() {\n      r = e[rt](), P(n, t, function() {\n        var i, o, u;\n        try {\n          i = r.next(), o = i.value, u = i.done;\n        } catch (a) {\n          n.error(a);\n          return;\n        }\n        u ? n.complete() : n.next(o);\n      }, 0, !0);\n    }), function() {\n      return b(r == null ? void 0 : r.return) && r.return();\n    };\n  });\n}\nfunction lt(e, t) {\n  if (!e)\n    throw new Error(\"Iterable cannot be null\");\n  return new y(function(n) {\n    P(n, t, function() {\n      var r = e[Symbol.asyncIterator]();\n      P(n, t, function() {\n        r.next().then(function(i) {\n          i.done ? n.complete() : n.next(i.value);\n        });\n      }, 0, !0);\n    });\n  });\n}\nfunction Fn(e, t) {\n  return lt(ot(e), t);\n}\nfunction Pn(e, t) {\n  if (e != null) {\n    if (et(e))\n      return In(e, t);\n    if (Be(e))\n      return kn(e, t);\n    if (Xe(e))\n      return On(e, t);\n    if (tt(e))\n      return lt(e, t);\n    if (it(e))\n      return An(e, t);\n    if (ut(e))\n      return Fn(e, t);\n  }\n  throw nt(e);\n}\nfunction O(e, t) {\n  return t ? Pn(e, t) : I(e);\n}\nfunction ee() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = Ce(e);\n  return O(e, n);\n}\nvar ft = me(function(e) {\n  return function() {\n    e(this), this.name = \"EmptyError\", this.message = \"no elements in sequence\";\n  };\n});\nfunction $n(e) {\n  return e instanceof Date && !isNaN(e);\n}\nfunction C(e, t) {\n  return _(function(n, r) {\n    var i = 0;\n    n.subscribe(w(r, function(o) {\n      r.next(e.call(t, o, i++));\n    }));\n  });\n}\nfunction Tn(e, t, n, r, i, o, u, a) {\n  var s = [], c = 0, l = 0, d = !1, v = function() {\n    d && !s.length && !c && t.complete();\n  }, p = function(h) {\n    return c < r ? S(h) : s.push(h);\n  }, S = function(h) {\n    o && t.next(h), c++;\n    var $ = !1;\n    I(n(h, l++)).subscribe(w(t, function(E) {\n      i == null || i(E), o ? p(E) : t.next(E);\n    }, function() {\n      $ = !0;\n    }, void 0, function() {\n      if ($)\n        try {\n          c--;\n          for (var E = function() {\n            var j = s.shift();\n            u ? P(t, u, function() {\n              return S(j);\n            }) : S(j);\n          }; s.length && c < r; )\n            E();\n          v();\n        } catch (j) {\n          t.error(j);\n        }\n    }));\n  };\n  return e.subscribe(w(t, p, function() {\n    d = !0, v();\n  })), function() {\n    a == null || a();\n  };\n}\nfunction Ee(e, t, n) {\n  return n === void 0 && (n = 1 / 0), b(t) ? Ee(function(r, i) {\n    return C(function(o, u) {\n      return t(r, o, i, u);\n    })(I(e(r, i)));\n  }, n) : (typeof t == \"number\" && (n = t), _(function(r, i) {\n    return Tn(r, i, e, n);\n  }));\n}\nfunction dt(e) {\n  return e === void 0 && (e = 1 / 0), Ee(W, e);\n}\nfunction Dn() {\n  return dt(1);\n}\nfunction Rn() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  return Dn()(O(e, Ce(e)));\n}\nfunction jn(e, t, n) {\n  e === void 0 && (e = 0), n === void 0 && (n = pn);\n  var r = -1;\n  return t != null && (ze(t) ? n = t : r = t), new y(function(i) {\n    var o = $n(e) ? +e - n.now() : e;\n    o < 0 && (o = 0);\n    var u = 0;\n    return n.schedule(function() {\n      i.closed || (i.next(u++), 0 <= r ? this.schedule(void 0, r) : i.complete());\n    }, o);\n  });\n}\nfunction Un() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = Ce(e), r = yn(e, 1 / 0), i = e;\n  return i.length ? i.length === 1 ? I(i[0]) : dt(r)(O(i, n)) : Se;\n}\nfunction Vn(e, t) {\n  return _(function(n, r) {\n    var i = 0;\n    n.subscribe(w(r, function(o) {\n      return e.call(t, o, i++) && r.next(o);\n    }));\n  });\n}\nfunction vt(e) {\n  return _(function(t, n) {\n    var r = null, i = !1, o;\n    r = t.subscribe(w(n, void 0, void 0, function(u) {\n      o = I(e(u, vt(e)(t))), r ? (r.unsubscribe(), r = null, o.subscribe(n)) : i = !0;\n    })), i && (r.unsubscribe(), r = null, o.subscribe(n));\n  });\n}\nfunction Mn(e, t, n, r, i) {\n  return function(o, u) {\n    var a = n, s = t, c = 0;\n    o.subscribe(w(u, function(l) {\n      var d = c++;\n      s = a ? e(s, l, d) : (a = !0, l), r && u.next(s);\n    }, i && function() {\n      a && u.next(s), u.complete();\n    }));\n  };\n}\nfunction Ln(e, t) {\n  return t === void 0 && (t = _e), _(function(n, r) {\n    var i = null, o = null, u = null, a = function() {\n      if (i) {\n        i.unsubscribe(), i = null;\n        var c = o;\n        o = null, r.next(c);\n      }\n    };\n    function s() {\n      var c = u + e, l = t.now();\n      if (l < c) {\n        i = this.schedule(void 0, c - l), r.add(i);\n        return;\n      }\n      a();\n    }\n    n.subscribe(w(r, function(c) {\n      o = c, u = t.now(), i || (i = t.schedule(s, e), r.add(i));\n    }, function() {\n      a(), r.complete();\n    }, void 0, function() {\n      o = i = null;\n    }));\n  });\n}\nfunction Nn(e) {\n  return _(function(t, n) {\n    var r = !1;\n    t.subscribe(w(n, function(i) {\n      r = !0, n.next(i);\n    }, function() {\n      r || n.next(e), n.complete();\n    }));\n  });\n}\nfunction de(e) {\n  return e <= 0 ? function() {\n    return Se;\n  } : _(function(t, n) {\n    var r = 0;\n    t.subscribe(w(n, function(i) {\n      ++r <= e && (n.next(i), e <= r && n.complete());\n    }));\n  });\n}\nfunction Wn() {\n  return _(function(e, t) {\n    e.subscribe(w(t, fe));\n  });\n}\nfunction qn(e) {\n  return C(function() {\n    return e;\n  });\n}\nfunction ht(e, t) {\n  return t ? function(n) {\n    return Rn(t.pipe(de(1), Wn()), n.pipe(ht(e)));\n  } : Ee(function(n, r) {\n    return e(n, r).pipe(de(1), qn(n));\n  });\n}\nfunction Qn(e, t) {\n  t === void 0 && (t = _e);\n  var n = jn(e, t);\n  return ht(function() {\n    return n;\n  });\n}\nfunction Kn(e, t) {\n  return t === void 0 && (t = W), e = e != null ? e : Hn, _(function(n, r) {\n    var i, o = !0;\n    n.subscribe(w(r, function(u) {\n      var a = t(u);\n      (o || !e(i, a)) && (o = !1, i = a, r.next(u));\n    }));\n  });\n}\nfunction Hn(e, t) {\n  return e === t;\n}\nfunction Yn(e) {\n  return e === void 0 && (e = Gn), _(function(t, n) {\n    var r = !1;\n    t.subscribe(w(n, function(i) {\n      r = !0, n.next(i);\n    }, function() {\n      return r ? n.complete() : n.error(e());\n    }));\n  });\n}\nfunction Gn() {\n  return new ft();\n}\nfunction pt(e, t) {\n  var n = arguments.length >= 2;\n  return function(r) {\n    return r.pipe(e ? Vn(function(i, o) {\n      return e(i, o, r);\n    }) : W, de(1), n ? Nn(t) : Yn(function() {\n      return new ft();\n    }));\n  };\n}\nfunction Jn(e, t) {\n  return _(Mn(e, t, arguments.length >= 2, !0));\n}\nfunction zn(e) {\n  e === void 0 && (e = {});\n  var t = e.connector, n = t === void 0 ? function() {\n    return new ne();\n  } : t, r = e.resetOnError, i = r === void 0 ? !0 : r, o = e.resetOnComplete, u = o === void 0 ? !0 : o, a = e.resetOnRefCountZero, s = a === void 0 ? !0 : a;\n  return function(c) {\n    var l, d, v, p = 0, S = !1, h = !1, $ = function() {\n      d == null || d.unsubscribe(), d = void 0;\n    }, E = function() {\n      $(), l = v = void 0, S = h = !1;\n    }, j = function() {\n      var M = l;\n      E(), M == null || M.unsubscribe();\n    };\n    return _(function(M, Le) {\n      p++, !h && !S && $();\n      var H = v = v != null ? v : n();\n      Le.add(function() {\n        p--, p === 0 && !h && !S && (d = ae(j, s));\n      }), H.subscribe(Le), !l && p > 0 && (l = new L({\n        next: function(Y) {\n          return H.next(Y);\n        },\n        error: function(Y) {\n          h = !0, $(), d = ae(E, i, Y), H.error(Y);\n        },\n        complete: function() {\n          S = !0, $(), d = ae(E, u), H.complete();\n        }\n      }), I(M).subscribe(l));\n    })(c);\n  };\n}\nfunction ae(e, t) {\n  for (var n = [], r = 2; r < arguments.length; r++)\n    n[r - 2] = arguments[r];\n  if (t === !0) {\n    e();\n    return;\n  }\n  if (t !== !1) {\n    var i = new L({\n      next: function() {\n        i.unsubscribe(), e();\n      }\n    });\n    return t.apply(void 0, R([], D(n))).subscribe(i);\n  }\n}\nfunction Zn(e, t, n) {\n  var r, i, o, u, a = !1;\n  return e && typeof e == \"object\" ? (r = e.bufferSize, u = r === void 0 ? 1 / 0 : r, i = e.windowTime, t = i === void 0 ? 1 / 0 : i, o = e.refCount, a = o === void 0 ? !1 : o, n = e.scheduler) : u = e != null ? e : 1 / 0, zn({\n    connector: function() {\n      return new fn(u, t, n);\n    },\n    resetOnError: !0,\n    resetOnComplete: !1,\n    resetOnRefCountZero: a\n  });\n}\nfunction mt(e, t) {\n  return _(function(n, r) {\n    var i = null, o = 0, u = !1, a = function() {\n      return u && !i && r.complete();\n    };\n    n.subscribe(w(r, function(s) {\n      i == null || i.unsubscribe();\n      var c = 0, l = o++;\n      I(e(s, l)).subscribe(i = w(r, function(d) {\n        return r.next(t ? t(s, d, l, c++) : d);\n      }, function() {\n        i = null, a();\n      }));\n    }, function() {\n      u = !0, a();\n    }));\n  });\n}\nfunction Bn(e, t, n) {\n  var r = b(e) || t || n ? { next: e, error: t, complete: n } : e;\n  return r ? _(function(i, o) {\n    var u;\n    (u = r.subscribe) === null || u === void 0 || u.call(r);\n    var a = !0;\n    i.subscribe(w(o, function(s) {\n      var c;\n      (c = r.next) === null || c === void 0 || c.call(r, s), o.next(s);\n    }, function() {\n      var s;\n      a = !1, (s = r.complete) === null || s === void 0 || s.call(r), o.complete();\n    }, function(s) {\n      var c;\n      a = !1, (c = r.error) === null || c === void 0 || c.call(r, s), o.error(s);\n    }, function() {\n      var s, c;\n      a && ((s = r.unsubscribe) === null || s === void 0 || s.call(r)), (c = r.finalize) === null || c === void 0 || c.call(r);\n    }));\n  }) : W;\n}\nfunction xe(e) {\n  return new y(function(t) {\n    var n = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.onIdTokenChanged)(e, t.next.bind(t), t.error.bind(t), t.complete.bind(t));\n    return { unsubscribe: n };\n  });\n}\nconst Xn = \"[DEFAULT]\", bt = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Ie = react__WEBPACK_IMPORTED_MODULE_0__.createContext(!1), er = \"4.2.3\", tr = (e, t) => e === t || [...Object.keys(e), ...Object.keys(t)].every((n) => e[n] === t[n]);\nfunction Lr(e) {\n  const {\n    firebaseConfig: t,\n    appName: n,\n    suspense: r\n  } = e, i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (e.firebaseApp)\n      return e.firebaseApp;\n    const o = (0,firebase_app__WEBPACK_IMPORTED_MODULE_3__.getApps)().find((u) => u.name === (n || Xn));\n    if (o) {\n      if (t && tr(o.options, t))\n        return o;\n      throw new Error(`Does not match the options already provided to the ${n || \"default\"} firebase app instance, give this new instance a different appName.`);\n    } else {\n      if (!t)\n        throw new Error(\"No firebaseConfig provided\");\n      const u = react__WEBPACK_IMPORTED_MODULE_0__.version || \"unknown\";\n      return (0,firebase_app__WEBPACK_IMPORTED_MODULE_3__.registerVersion)(\"react\", u), (0,firebase_app__WEBPACK_IMPORTED_MODULE_3__.registerVersion)(\"reactfire\", er), (0,firebase_app__WEBPACK_IMPORTED_MODULE_3__.initializeApp)(t, n);\n    }\n  }, [e.firebaseApp, t, n]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(bt.Provider, {\n    value: i\n  }, react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ie.Provider, Object.assign({\n    value: r != null ? r : !1\n  }, e)));\n}\nfunction Nr() {\n  const e = react__WEBPACK_IMPORTED_MODULE_0__.useContext(Ie);\n  return e != null ? e : !1;\n}\nfunction re(e) {\n  let t = react__WEBPACK_IMPORTED_MODULE_0__.useContext(Ie);\n  return e !== void 0 ? e : t;\n}\nfunction yt() {\n  const e = react__WEBPACK_IMPORTED_MODULE_0__.useContext(bt);\n  if (!e)\n    throw new Error(\"Cannot call useFirebaseApp unless your component is within a FirebaseAppProvider\");\n  return e;\n}\nfunction Wr(e) {\n  return pe(this, void 0, void 0, function* () {\n    const t = yield e();\n    return Ae(xe(t), `auth:user:${t.name}`).toPromise();\n  });\n}\nfunction nr(e) {\n  const t = kt(), n = `auth:user:${t.name}`, r = xe(t);\n  return g(n, r, e);\n}\nfunction rr(e, t = !1, n) {\n  if (!e)\n    throw new Error(\"you must provide a user\");\n  const r = `auth:idTokenResult:${e.uid}:forceRefresh=${t}`, i = O(e.getIdTokenResult(t));\n  return g(r, i, n);\n}\nfunction qr(e) {\n  if ((e == null ? void 0 : e.hasOwnProperty(\"requiredClaims\")) && (e == null ? void 0 : e.hasOwnProperty(\"validateCustomClaims\")))\n    throw new Error('Cannot have both \"requiredClaims\" and \"validateCustomClaims\". Use one or the other.');\n  const t = kt();\n  let n = `auth:signInCheck:${t.name}::forceRefresh:${!!(e != null && e.forceRefresh)}`;\n  e != null && e.forceRefresh && (n = `${n}:forceRefresh:${e.forceRefresh}`), e != null && e.hasOwnProperty(\"requiredClaims\") ? n = `${n}:requiredClaims:${JSON.stringify(e.requiredClaims)}` : e != null && e.hasOwnProperty(\"validateCustomClaims\") && (n = `${n}:validateCustomClaims:${JSON.stringify(e.validateCustomClaims)}`);\n  const r = xe(t).pipe(mt((i) => {\n    var o;\n    return i ? e && (e.hasOwnProperty(\"requiredClaims\") || e.hasOwnProperty(\"validateCustomClaims\")) ? O(i.getIdTokenResult((o = e == null ? void 0 : e.forceRefresh) !== null && o !== void 0 ? o : !1)).pipe(C((u) => {\n      let a;\n      e.hasOwnProperty(\"requiredClaims\") ? a = ir(e.requiredClaims) : a = e.validateCustomClaims;\n      const {\n        hasRequiredClaims: s,\n        errors: c\n      } = a(u.claims);\n      return {\n        signedIn: !0,\n        hasRequiredClaims: s,\n        errors: c,\n        user: i\n      };\n    })) : ee({\n      signedIn: !0,\n      hasRequiredClaims: !0,\n      errors: {},\n      user: i\n    }) : ee({\n      signedIn: !1,\n      hasRequiredClaims: !1,\n      errors: {},\n      user: null\n    });\n  }));\n  return g(n, r);\n}\nfunction ir(e) {\n  return function(n) {\n    const r = {};\n    return Object.keys(e).forEach((i) => {\n      e[i] !== n[i] && (r[i] = [new Me(\"auth/missing-claim\", `Expected \"${e[i]}\", but user has \"${n[i]}\" instead`)]);\n    }), {\n      hasRequiredClaims: Object.keys(r).length === 0,\n      errors: r\n    };\n  };\n}\nfunction or({\n  user: e,\n  fallback: t,\n  children: n,\n  requiredClaims: r\n}) {\n  const {\n    data: i\n  } = rr(e, !1), {\n    claims: o\n  } = i, u = {};\n  return re() || console.warn(\"ClaimsCheck is deprecated and only works when ReactFire is in experimental Suspense Mode. Use useSigninCheck or set suspense={true} in FirebaseAppProvider if you want to use this component.\"), r && Object.keys(r).forEach((s) => {\n    var c;\n    r[s] !== o[s] && (u[s] = {\n      expected: r[s],\n      actual: (c = o[s]) === null || c === void 0 ? void 0 : c.toString()\n    });\n  }), Object.keys(u).length === 0 ? react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, n) : react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t);\n}\nfunction Qr({\n  fallback: e,\n  children: t,\n  requiredClaims: n\n}) {\n  const {\n    data: r\n  } = nr();\n  return re() || console.warn(\"AuthCheck is deprecated and only works when ReactFire is in experimental Suspense Mode. Use useSigninCheck or set suspense={true} in FirebaseAppProvider if you want to use this component.\"), r ? n ? react__WEBPACK_IMPORTED_MODULE_0__.createElement(or, {\n    user: r,\n    fallback: e,\n    requiredClaims: n\n  }, t) : react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t) : react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, e);\n}\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar te = function() {\n  return te = Object.assign || function(t) {\n    for (var n, r = 1, i = arguments.length; r < i; r++) {\n      n = arguments[r];\n      for (var o in n)\n        Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o]);\n    }\n    return t;\n  }, te.apply(this, arguments);\n};\nfunction se(e, t) {\n  for (var n = 0, r = t.length, i = e.length; n < r; n++, i++)\n    e[i] = t[n];\n  return e;\n}\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar T, m;\n(function(e) {\n  e.added = \"child_added\", e.removed = \"child_removed\", e.changed = \"child_changed\", e.moved = \"child_moved\", e.value = \"value\";\n})(m || (m = {}));\nvar ur = Object.freeze((T = {}, T[m.added] = firebase_database__WEBPACK_IMPORTED_MODULE_2__.onChildAdded, T[m.removed] = firebase_database__WEBPACK_IMPORTED_MODULE_2__.onChildRemoved, T[m.changed] = firebase_database__WEBPACK_IMPORTED_MODULE_2__.onChildChanged, T[m.moved] = firebase_database__WEBPACK_IMPORTED_MODULE_2__.onChildMoved, T[m.value] = firebase_database__WEBPACK_IMPORTED_MODULE_2__.onValue, T));\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction Oe(e, t) {\n  return new y(function(n) {\n    var r = ur[t](e, function(i, o) {\n      n.next({ snapshot: i, prevKey: o, event: t });\n    }, n.error.bind(n));\n    return {\n      unsubscribe: function() {\n        (0,firebase_database__WEBPACK_IMPORTED_MODULE_2__.off)(e, t, r);\n      }\n    };\n  }).pipe(Qn(0));\n}\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction ar(e) {\n  return (e == null || e.length === 0) && (e = [\n    m.added,\n    m.removed,\n    m.changed,\n    m.moved\n  ]), e;\n}\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction sr(e) {\n  return Oe(e, m.value);\n}\nfunction cr(e, t) {\n  return t === void 0 && (t = {}), Oe(e, m.value).pipe(C(function(n) {\n    return gt(n, t);\n  }));\n}\nfunction gt(e, t) {\n  var n;\n  t === void 0 && (t = {});\n  var r = e.snapshot.val();\n  return !e.snapshot.exists() || typeof r != \"object\" ? r : te(te({}, r), t.keyField ? (n = {}, n[t.keyField] = e.snapshot.key, n) : null);\n}\nfunction lr(e) {\n  return O((0,firebase_database__WEBPACK_IMPORTED_MODULE_2__.get)(e)).pipe(C(function(t) {\n    var n = m.value;\n    return { snapshot: t, prevKey: null, event: n };\n  }));\n}\nfunction wt(e, t) {\n  t === void 0 && (t = {});\n  var n = ar(t.events);\n  return lr(e).pipe(mt(function(r) {\n    if (!r.snapshot.exists())\n      return ee([]);\n    var i = [ee(r)];\n    return n.forEach(function(o) {\n      i.push(Oe(e, o));\n    }), Un.apply(void 0, i).pipe(Jn(vr, []));\n  }), Kn());\n}\nfunction fr(e, t) {\n  return t === void 0 && (t = {}), wt(e).pipe(C(function(n) {\n    return n.map(function(r) {\n      return gt(r, t);\n    });\n  }));\n}\nfunction _t(e, t) {\n  for (var n = e.length, r = 0; r < n; r++)\n    if (e[r].snapshot.key === t)\n      return r;\n  return -1;\n}\nfunction dr(e, t) {\n  if (t == null)\n    return 0;\n  var n = _t(e, t);\n  return n === -1 ? e.length : n + 1;\n}\nfunction vr(e, t) {\n  var n = t.snapshot, r = t.prevKey, i = t.event, o = n.key, u = _t(e, o), a = dr(e, r || void 0);\n  switch (i) {\n    case m.value:\n      if (t.snapshot && t.snapshot.exists()) {\n        var s = null;\n        t.snapshot.forEach(function(d) {\n          var v = {\n            snapshot: d,\n            event: m.value,\n            prevKey: s\n          };\n          return s = d.key, e = se(se([], e), [v]), !1;\n        });\n      }\n      return e;\n    case m.added:\n      if (u > -1) {\n        var c = e[u - 1];\n        (c && c.snapshot.key || null) !== r && (e = e.filter(function(d) {\n          return d.snapshot.key !== n.key;\n        }), e.splice(a, 0, t));\n      } else {\n        if (r == null)\n          return se([t], e);\n        e = e.slice(), e.splice(a, 0, t);\n      }\n      return e;\n    case m.removed:\n      return e.filter(function(d) {\n        return d.snapshot.key !== n.key;\n      });\n    case m.changed:\n      return e.map(function(d) {\n        return d.snapshot.key === o ? t : d;\n      });\n    case m.moved:\n      if (u > -1) {\n        var l = e.splice(u, 1)[0];\n        return e = e.slice(), e.splice(a, 0, l), e;\n      }\n      return e;\n    default:\n      return e;\n  }\n}\nconst ve = globalThis._reactFireDatabaseCachedQueries || [];\nglobalThis._reactFireDatabaseCachedQueries || (globalThis._reactFireDatabaseCachedQueries = ve);\nfunction St(e) {\n  const t = ve.findIndex((n) => n.isEqual(e));\n  return t > -1 ? t : ve.push(e) - 1;\n}\nfunction Kr(e, t) {\n  const n = `database:object:${e.toString()}`, r = sr(e);\n  return g(n, r, t);\n}\nfunction Hr(e, t) {\n  const n = t ? K(t) : \"NO_ID_FIELD\", r = `database:objectVal:${e.toString()}:idField=${n}`, i = cr(e, {\n    keyField: n\n  });\n  return g(r, i, t);\n}\nfunction Yr(e, t) {\n  const n = `database:list:${St(e)}`, r = wt(e);\n  return g(n, r, t);\n}\nfunction Gr(e, t) {\n  const n = t ? K(t) : \"NO_ID_FIELD\", r = `database:listVal:${St(e)}:idField=${n}`, i = fr(e, {\n    keyField: n\n  });\n  return g(r, i, t);\n}\n/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar hr = { includeMetadataChanges: !1 };\nfunction ke(e, t) {\n  return t === void 0 && (t = hr), new y(function(n) {\n    var r = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.onSnapshot)(e, t, {\n      next: n.next.bind(n),\n      error: n.error.bind(n),\n      complete: n.complete.bind(n)\n    });\n    return { unsubscribe: r };\n  });\n}\n/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction ie(e) {\n  return ke(e, { includeMetadataChanges: !0 });\n}\nfunction Ct(e, t) {\n  return t === void 0 && (t = {}), ie(e).pipe(C(function(n) {\n    return Et(n, t);\n  }));\n}\nfunction Et(e, t) {\n  t === void 0 && (t = {});\n  var n = e.data();\n  return !e.exists() || typeof n != \"object\" || n === null || t.idField && (n[t.idField] = e.id), n;\n}\nfunction pr(e) {\n  return ke(e, { includeMetadataChanges: !0 }).pipe(C(function(t) {\n    return t.docs;\n  }));\n}\nfunction mr(e, t) {\n  return t === void 0 && (t = {}), pr(e).pipe(C(function(n) {\n    return n.map(function(r) {\n      return Et(r, t);\n    });\n  }));\n}\nclass br extends ne {\n  constructor(t, n) {\n    super(), this._timeoutWindow = n, this._hasValue = !1, this._error = void 0, this._firstEmission = new Promise((r) => this._resolveFirstEmission = r), this._innerObservable = t.pipe(Bn({\n      next: (r) => {\n        this._next(r);\n      },\n      error: (r) => {\n        this._error = r, this._resolveFirstEmission();\n      }\n    }), vt(() => mn()), Zn(1)), this._warmupSubscription = this._innerObservable.subscribe(), this._timeoutHandler = setTimeout(this._reset.bind(this), this._timeoutWindow);\n  }\n  get hasValue() {\n    return this._hasValue || !!this._error;\n  }\n  get value() {\n    if (this._error)\n      throw this._error;\n    if (!this.hasValue)\n      throw Error(\"Can only get value if SuspenseSubject has a value\");\n    return this._value;\n  }\n  get firstEmission() {\n    return this._firstEmission;\n  }\n  _next(t) {\n    this._hasValue = !0, this._value = t, this._resolveFirstEmission();\n  }\n  _reset() {\n    this._warmupSubscription && this._warmupSubscription.unsubscribe(), this._hasValue = !1, this._value = void 0, this._error = void 0, this._firstEmission = new Promise((t) => this._resolveFirstEmission = t);\n  }\n  _subscribe(t) {\n    return this._timeoutHandler && clearTimeout(this._timeoutHandler), this._innerSubscriber = this._innerObservable.subscribe(t), this._innerSubscriber;\n  }\n  get ourError() {\n    return this._error;\n  }\n}\nconst yr = 3e4, Z = globalThis._reactFirePreloadedObservables || /* @__PURE__ */ new Map();\nglobalThis._reactFirePreloadedObservables || (globalThis._reactFirePreloadedObservables = Z);\nfunction Ae(e, t) {\n  if (Z.has(t))\n    return Z.get(t);\n  {\n    const n = new br(e, yr);\n    return Z.set(t, n), n;\n  }\n}\nfunction gr(e) {\n  return function(n, r) {\n    const i = Object.assign(Object.assign({}, n), { hasEmitted: n.hasEmitted || e.hasValue, error: e.ourError, firstValuePromise: e.firstEmission });\n    switch (e.hasValue && (i.data = e.value), r) {\n      case \"value\":\n        return i.status = \"success\", i;\n      case \"error\":\n        return i.status = \"error\", i;\n      case \"complete\":\n        return i.isComplete = !0, i;\n      default:\n        throw new Error(`invalid action \"${r}\"`);\n    }\n  };\n}\nfunction g(e, t, n = {}) {\n  var r;\n  if (!e)\n    throw new Error(\"cannot call useObservable without an observableId\");\n  const i = Ae(t, e), o = n.hasOwnProperty(\"initialData\") || n.hasOwnProperty(\"startWithValue\"), u = i.hasValue || o;\n  if (re(n.suspense) === !0 && !u)\n    throw i.firstEmission;\n  const s = {\n    status: u ? \"success\" : \"loading\",\n    hasEmitted: u,\n    isComplete: !1,\n    data: i.hasValue ? i.value : (r = n == null ? void 0 : n.initialData) !== null && r !== void 0 ? r : n == null ? void 0 : n.startWithValue,\n    error: i.ourError,\n    firstValuePromise: i.firstEmission\n  }, [c, l] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(gr(i), s);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const d = i.subscribe({\n      next: () => {\n        l(\"value\");\n      },\n      error: (v) => {\n        throw l(\"error\"), v;\n      },\n      complete: () => {\n        l(\"complete\");\n      }\n    });\n    return () => d.unsubscribe();\n  }, [i]), c;\n}\nconst he = globalThis._reactFireFirestoreQueryCache || [];\nglobalThis._reactFireFirestoreQueryCache || (globalThis._reactFireFirestoreQueryCache = he);\nfunction xt(e) {\n  const t = he.findIndex((n) => (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.queryEqual)(n, e));\n  return t > -1 ? t : he.push(e) - 1;\n}\nfunction Jr(e) {\n  return pe(this, void 0, void 0, function* () {\n    const t = yield e();\n    return Ae(ie(t), It(t));\n  });\n}\nfunction It(e) {\n  return `firestore:doc:${e.firestore.app.name}:${e.path}`;\n}\nfunction zr(e, t) {\n  const n = It(e), r = ie(e);\n  return g(n, r, t);\n}\nfunction Zr(e, t) {\n  const n = `firestore:docOnce:${e.firestore.app.name}:${e.path}`, r = ie(e).pipe(pt());\n  return g(n, r, t);\n}\nfunction Br(e, t) {\n  const n = t ? K(t) : \"NO_ID_FIELD\", r = `firestore:docData:${e.firestore.app.name}:${e.path}:idField=${n}`, i = Ct(e, {\n    idField: n\n  });\n  return g(r, i, t);\n}\nfunction Xr(e, t) {\n  const n = t ? K(t) : \"NO_ID_FIELD\", r = `firestore:docDataOnce:${e.firestore.app.name}:${e.path}:idField=${n}`, i = Ct(e, {\n    idField: n\n  }).pipe(pt());\n  return g(r, i, t);\n}\nfunction ei(e, t) {\n  const n = `firestore:collection:${xt(e)}`, r = ke(e);\n  return g(n, r, t);\n}\nfunction ti(e, t) {\n  const n = t ? K(t) : \"NO_ID_FIELD\", r = `firestore:collectionData:${xt(e)}:idField=${n}`, i = mr(e, {\n    idField: n\n  });\n  return g(r, i, t);\n}\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction wr(e, t, n) {\n  var r = (0,firebase_functions__WEBPACK_IMPORTED_MODULE_5__.httpsCallable)(e, t, n);\n  return function(i) {\n    return O(r(i)).pipe(C(function(o) {\n      return o.data;\n    }));\n  };\n}\nfunction ni(e, t) {\n  const n = Fr(), r = `functions:callableResponse:${e}:${JSON.stringify(t == null ? void 0 : t.data)}:${JSON.stringify(t == null ? void 0 : t.httpsCallableOptions)}`, o = wr(n, e, t == null ? void 0 : t.httpsCallableOptions)(t == null ? void 0 : t.data);\n  return g(r, o, t);\n}\nfunction ri({\n  children: e,\n  traceId: t,\n  fallback: n\n}) {\n  var r;\n  const i = ((r = performance == null ? void 0 : performance.getEntriesByName) === null || r === void 0 ? void 0 : r.call(performance, t, \"measure\")) || [], o = `_${t}Start[${i.length}]`, u = `_${t}End[${i.length}]`, a = () => (react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    var s;\n    return (s = performance == null ? void 0 : performance.mark) === null || s === void 0 || s.call(performance, o), () => {\n      var c, l;\n      (c = performance == null ? void 0 : performance.mark) === null || c === void 0 || c.call(performance, u), (l = performance == null ? void 0 : performance.measure) === null || l === void 0 || l.call(performance, t, o, u);\n    };\n  }, []), react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, n));\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n    fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement(a, null)\n  }, e);\n}\nfunction q(e) {\n  var t = e.remoteConfig, n = e.key, r = e.getter;\n  return new y(function(i) {\n    (0,firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.ensureInitialized)(t).then(function() {\n      var o = r.bind(t);\n      i.next(o(t, n));\n    });\n  });\n}\nfunction _r(e, t) {\n  var n = firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.getValue;\n  return q({ remoteConfig: e, key: t, getter: n });\n}\nfunction Sr(e, t) {\n  var n = firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.getString;\n  return q({ remoteConfig: e, key: t, getter: n });\n}\nfunction Cr(e, t) {\n  var n = firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.getNumber;\n  return q({ remoteConfig: e, key: t, getter: n });\n}\nfunction Er(e, t) {\n  var n = firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.getBoolean;\n  return q({ remoteConfig: e, key: t, getter: n });\n}\nfunction xr(e) {\n  var t = firebase_remote_config__WEBPACK_IMPORTED_MODULE_7__.getAll;\n  return q({ remoteConfig: e, key: \"\", getter: t });\n}\nfunction Q(e, t) {\n  const n = $r(), r = n.app.name, i = t(n, e), o = `remoteConfig:${e}:${t.name}:${r}`;\n  return g(o, i);\n}\nfunction ii(e) {\n  return Q(e, _r);\n}\nfunction oi(e) {\n  return Q(e, Sr);\n}\nfunction ui(e) {\n  return Q(e, Cr);\n}\nfunction ai(e) {\n  return Q(e, Er);\n}\nfunction si(e) {\n  return Q(e, xr);\n}\nfunction Ir(e) {\n  return new y(function(t) {\n    var n = function(u) {\n      return t.next(u);\n    }, r = function(u) {\n      return t.error(u);\n    }, i = function() {\n      return t.complete();\n    };\n    n(e.snapshot);\n    var o = e.on(\"state_changed\", n);\n    return e.then(function(u) {\n      n(u), setTimeout(function() {\n        return i();\n      }, 0);\n    }, function(u) {\n      n(e.snapshot), setTimeout(function() {\n        return r(u);\n      }, 0);\n    }), function() {\n      o();\n    };\n  }).pipe(Ln(0));\n}\nfunction Or(e) {\n  return O((0,firebase_storage__WEBPACK_IMPORTED_MODULE_6__.getDownloadURL)(e));\n}\nfunction ci(e, t, n) {\n  const r = `storage:task:${t.toString()}`, i = Ir(e);\n  return g(r, i, n);\n}\nfunction kr(e, t) {\n  const n = `storage:downloadUrl:${e.toString()}`, r = Or(e);\n  return g(n, r, t);\n}\nfunction Ar(e) {\n  const t = Pr();\n  return e = Object.assign(Object.assign({}, e), {\n    storage: t\n  }), react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ot, Object.assign({}, e));\n}\nfunction Ot(e) {\n  let {\n    storage: t,\n    storagePath: n,\n    suspense: r,\n    placeHolder: i\n  } = e, o = Zt(e, [\"storage\", \"storagePath\", \"suspense\", \"placeHolder\"]);\n  const u = {\n    suspense: re(r)\n  };\n  if (!t)\n    throw new Error(\"Storage was not passed to component INTERNALStorageImage. This should not be possible\");\n  const {\n    status: a,\n    data: s\n  } = kr((0,firebase_storage__WEBPACK_IMPORTED_MODULE_6__.ref)(t, n), u);\n  return a === \"success\" ? (o.alt || o.alt === \"\" || console.warn(`No alt prop provided for StorageImage with storagePath \"${n}\"`, \"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images\"), react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", Object.assign({\n    src: s,\n    alt: o.alt\n  }, o))) : i != null ? i : react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"''\");\n}\nfunction li(e) {\n  let {\n    storage: t\n  } = e;\n  return t ? react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ot, Object.assign({}, e)) : react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ar, Object.assign({}, e));\n}\nconst Fe = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Pe = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), $e = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Te = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), De = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Re = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), je = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Ue = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0), Ve = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction k(e) {\n  return function(n) {\n    var r, i;\n    if (!n.sdk)\n      throw new Error(\"no sdk provided\");\n    const o = yt().name;\n    if (((i = (r = n == null ? void 0 : n.sdk) === null || r === void 0 ? void 0 : r.app) === null || i === void 0 ? void 0 : i.name) !== o)\n      throw new Error(\"sdk was initialized with a different firebase app\");\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(e.Provider, Object.assign({\n      value: n.sdk\n    }, n));\n  };\n}\nfunction A(e) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useContext(e);\n  if (!t)\n    throw new Error(\"SDK not found. useSdk must be called from within a provider\");\n  return t;\n}\nfunction F(e, t, n, r) {\n  const i = yt();\n  if (react__WEBPACK_IMPORTED_MODULE_0__.useContext(t))\n    throw new Error(`Cannot initialize SDK ${e} because it already exists in Context`);\n  const o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => n(i), [i]);\n  return g(`firebase-sdk:${e}:${i.name}`, O(o), r);\n}\nconst fi = k(Fe), di = k(Pe), vi = k($e), hi = k(Te), pi = k(De), mi = k(Re), bi = k(Ue), yi = k(je), gi = k(Ve), wi = () => A(Fe), kt = () => A(Pe), _i = () => A($e), Si = () => A(Te), Ci = () => A(De), Fr = () => A(Re), Ei = () => A(Ue), Pr = () => A(je), $r = () => A(Ve), xi = (e, t) => F(\"appcheck\", Fe, e, t), Ii = (e, t) => F(\"auth\", Pe, e, t), Oi = (e, t) => F(\"analytics\", $e, e, t), ki = (e, t) => F(\"database\", Te, e, t), Ai = (e, t) => F(\"firestore\", De, e, t), Fi = (e, t) => F(\"functions\", Re, e, t), Pi = (e, t) => F(\"performance\", Ue, e, t), $i = (e, t) => F(\"remoteconfig\", Ve, e, t), Ti = (e, t) => F(\"storage\", je, e, t);\nclass Me extends Error {\n  constructor(t, n, r) {\n    super(n), this.code = t, this.customData = r, this.name = \"ReactFireError\", Object.setPrototypeOf(this, Me.prototype);\n  }\n}\nfunction At(e, t) {\n  if (t === \"idField\" || t === \"initialData\" || t === \"suspense\")\n    return e ? e[t] : void 0;\n  throw new Error(`Field \"${t}\" is not a valid key in ReactFireOptions`);\n}\nfunction Di(e) {\n  return At(e, \"initialData\");\n}\nfunction K(e) {\n  return At(e, \"idField\");\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3RmaXJlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyQjtBQUM0QjtBQUNxRztBQUNuRTtBQUNqQjtBQUNmO0FBQ1U7QUFDZ0Y7QUFDbko7QUFDQSx5Q0FBeUMsZ0JBQWdCO0FBQ3pEO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGNBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxHQUFHLHFCQUFxQjtBQUN4QixlQUFlLHVDQUF1QztBQUN0RDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FB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QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELFNBQVM7QUFDckU7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLGdCQUFnQjtBQUNoQixVQUFVO0FBQ1Y7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUM7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0hBQW9ILDJCQUEyQjtBQUMvSTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQ0FBMEMsMkJBQTJCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkJBQTJCO0FBQy9DO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxTQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFlBQVk7QUFDWixNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNCQUFzQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQkFBMEIsc0JBQXNCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtEQUFFO0FBQ2QsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLDZCQUE2QixnREFBZSxlQUFlLGdEQUFlO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsMENBQVM7QUFDdEI7QUFDQTtBQUNBLGNBQWMscURBQUU7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLGdCQUFnQjtBQUM1RixNQUFNO0FBQ047QUFDQTtBQUNBLGdCQUFnQiwwQ0FBUztBQUN6QixhQUFhLDZEQUFFLGNBQWMsNkRBQUUsbUJBQW1CLDJEQUFFO0FBQ3BEO0FBQ0EsR0FBRztBQUNILFNBQVMsZ0RBQWU7QUFDeEI7QUFDQSxHQUFHLEVBQUUsZ0RBQWU7QUFDcEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFlBQVksNkNBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2Q0FBWTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLE9BQU87QUFDekMsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLE1BQU0sZ0JBQWdCLEVBQUU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLE9BQU8saUJBQWlCLGdDQUFnQztBQUN0Rix5Q0FBeUMsRUFBRSxnQkFBZ0IsZUFBZSw2REFBNkQsRUFBRSxrQkFBa0IsaUNBQWlDLHFFQUFxRSxFQUFFLHdCQUF3Qix1Q0FBdUM7QUFDbFU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsS0FBSyxtQkFBbUIsS0FBSztBQUN2RyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSiw2SkFBNkosTUFBTTtBQUNuSztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHLGlDQUFpQyxnREFBZSxDQUFDLDJDQUFVLGFBQWEsZ0RBQWUsQ0FBQywyQ0FBVTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxJQUFJO0FBQ0osMkpBQTJKLE1BQU0scUVBQXFFLGdEQUFlO0FBQ3JQO0FBQ0E7QUFDQTtBQUNBLEdBQUcsT0FBTyxnREFBZSxDQUFDLDJDQUFVLGFBQWEsZ0RBQWUsQ0FBQywyQ0FBVTtBQUMzRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxPQUFPO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDhDQUE4QyxPQUFPO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxjQUFjO0FBQ2YsOEJBQThCLGVBQWUsMkRBQUUsaUJBQWlCLDZEQUFFLGlCQUFpQiw2REFBRSxlQUFlLDJEQUFFLGVBQWUsc0RBQUU7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1DQUFtQztBQUNsRCxLQUFLO0FBQ0w7QUFDQTtBQUNBLFFBQVEsc0RBQUU7QUFDVjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxvRUFBb0UsMEJBQTBCO0FBQzlGO0FBQ0E7QUFDQSxXQUFXLHNEQUFFO0FBQ2I7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsYUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsYUFBYSxXQUFXLEVBQUU7QUFDMUY7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLE1BQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0EsOERBQThELE1BQU0sV0FBVyxFQUFFO0FBQ2pGO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsWUFBWSw4REFBRTtBQUNkO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDRCQUE0QjtBQUM3QztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFFBQVEsK0ZBQStGO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsRUFBRTtBQUM3QztBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLFdBQVcsNkNBQVk7QUFDMUIsU0FBUyw0Q0FBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsOERBQUU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQkFBMEIscUJBQXFCLEdBQUcsT0FBTztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscUJBQXFCLEdBQUcsT0FBTztBQUNoRTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QscUJBQXFCLEdBQUcsT0FBTyxXQUFXLEVBQUU7QUFDM0c7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLHFCQUFxQixHQUFHLE9BQU8sV0FBVyxFQUFFO0FBQy9HO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxNQUFNO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxNQUFNLFdBQVcsRUFBRTtBQUN6RjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUVBQUU7QUFDWjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELEVBQUUsR0FBRyw0Q0FBNEMsR0FBRyw0REFBNEQ7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EscUtBQXFLLEVBQUUsUUFBUSxTQUFTLFlBQVksRUFBRSxNQUFNLFNBQVMsZUFBZSxrREFBaUI7QUFDclA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsT0FBTyxnREFBZSxDQUFDLDJDQUFVO0FBQ3BDLFNBQVMsZ0RBQWUsQ0FBQywyQ0FBVTtBQUNuQyxjQUFjLGdEQUFlO0FBQzdCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUVBQUU7QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsVUFBVSw0REFBRTtBQUNaLGFBQWEsb0NBQW9DO0FBQ2pEO0FBQ0E7QUFDQSxVQUFVLDZEQUFFO0FBQ1osYUFBYSxvQ0FBb0M7QUFDakQ7QUFDQTtBQUNBLFVBQVUsNkRBQUU7QUFDWixhQUFhLG9DQUFvQztBQUNqRDtBQUNBO0FBQ0EsVUFBVSw4REFBRTtBQUNaLGFBQWEsb0NBQW9DO0FBQ2pEO0FBQ0E7QUFDQSxVQUFVLDBEQUFFO0FBQ1osYUFBYSxxQ0FBcUM7QUFDbEQ7QUFDQTtBQUNBLG1FQUFtRSxFQUFFLEdBQUcsT0FBTyxHQUFHLEVBQUU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxXQUFXLGdFQUFFO0FBQ2I7QUFDQTtBQUNBLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxhQUFhO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsR0FBRyxHQUFHLGdEQUFlLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxLQUFLLHFEQUFFO0FBQ1gsNkhBQTZILEVBQUUsa0hBQWtILGdEQUFlO0FBQ2hRO0FBQ0E7QUFDQSxHQUFHLHlCQUF5QixnREFBZSxDQUFDLDJDQUFVO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsZ0RBQWUscUJBQXFCLFFBQVEsZ0RBQWUscUJBQXFCO0FBQzdGO0FBQ0EsV0FBVyxnREFBZSxlQUFlLGdEQUFlLGVBQWUsZ0RBQWUsZUFBZSxnREFBZSxlQUFlLGdEQUFlLGVBQWUsZ0RBQWUsZUFBZSxnREFBZSxlQUFlLGdEQUFlLGVBQWUsZ0RBQWU7QUFDMVE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0RBQWU7QUFDMUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDZDQUFZO0FBQ2xCLDZDQUE2QyxHQUFHO0FBQ2hELFlBQVksMENBQVM7QUFDckIsMkJBQTJCLEVBQUUsR0FBRyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLEVBQUU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE0RUU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxrYXVzdFxcT25lRHJpdmVcXERvY3VtZW50c1xcR2l0SHViXFxsb2NrMHV0XFxub2RlX21vZHVsZXNcXHJlYWN0ZmlyZVxcZGlzdFxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZiBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IG9uSWRUb2tlbkNoYW5nZWQgYXMgRnQgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHsgb25DaGlsZEFkZGVkIGFzIFB0LCBvbkNoaWxkUmVtb3ZlZCBhcyAkdCwgb25DaGlsZENoYW5nZWQgYXMgVHQsIG9uQ2hpbGRNb3ZlZCBhcyBEdCwgb25WYWx1ZSBhcyBSdCwgb2ZmIGFzIGp0LCBnZXQgYXMgVXQgfSBmcm9tIFwiZmlyZWJhc2UvZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldEFwcHMgYXMgVnQsIHJlZ2lzdGVyVmVyc2lvbiBhcyBOZSwgaW5pdGlhbGl6ZUFwcCBhcyBNdCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcbmltcG9ydCB7IG9uU25hcHNob3QgYXMgTHQsIHF1ZXJ5RXF1YWwgYXMgTnQgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBodHRwc0NhbGxhYmxlIGFzIFd0IH0gZnJvbSBcImZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZ2V0RG93bmxvYWRVUkwgYXMgcXQsIHJlZiBhcyBRdCB9IGZyb20gXCJmaXJlYmFzZS9zdG9yYWdlXCI7XG5pbXBvcnQgeyBlbnN1cmVJbml0aWFsaXplZCBhcyBLdCwgZ2V0VmFsdWUgYXMgSHQsIGdldFN0cmluZyBhcyBZdCwgZ2V0TnVtYmVyIGFzIEd0LCBnZXRCb29sZWFuIGFzIEp0LCBnZXRBbGwgYXMgenQgfSBmcm9tIFwiZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xudmFyIGNlID0gZnVuY3Rpb24oZSwgdCkge1xuICByZXR1cm4gY2UgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbihuLCByKSB7XG4gICAgbi5fX3Byb3RvX18gPSByO1xuICB9IHx8IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBmb3IgKHZhciBpIGluIHIpXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgaSkgJiYgKG5baV0gPSByW2ldKTtcbiAgfSwgY2UoZSwgdCk7XG59O1xuZnVuY3Rpb24geChlLCB0KSB7XG4gIGlmICh0eXBlb2YgdCAhPSBcImZ1bmN0aW9uXCIgJiYgdCAhPT0gbnVsbClcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyh0KSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGNlKGUsIHQpO1xuICBmdW5jdGlvbiBuKCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IgPSBlO1xuICB9XG4gIGUucHJvdG90eXBlID0gdCA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUodCkgOiAobi5wcm90b3R5cGUgPSB0LnByb3RvdHlwZSwgbmV3IG4oKSk7XG59XG5mdW5jdGlvbiBadChlLCB0KSB7XG4gIHZhciBuID0ge307XG4gIGZvciAodmFyIHIgaW4gZSlcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgcikgJiYgdC5pbmRleE9mKHIpIDwgMCAmJiAobltyXSA9IGVbcl0pO1xuICBpZiAoZSAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09IFwiZnVuY3Rpb25cIilcbiAgICBmb3IgKHZhciBpID0gMCwgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IGkgPCByLmxlbmd0aDsgaSsrKVxuICAgICAgdC5pbmRleE9mKHJbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgcltpXSkgJiYgKG5bcltpXV0gPSBlW3JbaV1dKTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBwZShlLCB0LCBuLCByKSB7XG4gIGZ1bmN0aW9uIGkobykge1xuICAgIHJldHVybiBvIGluc3RhbmNlb2YgbiA/IG8gOiBuZXcgbihmdW5jdGlvbih1KSB7XG4gICAgICB1KG8pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXcgKG4gfHwgKG4gPSBQcm9taXNlKSkoZnVuY3Rpb24obywgdSkge1xuICAgIGZ1bmN0aW9uIGEobCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYyhyLm5leHQobCkpO1xuICAgICAgfSBjYXRjaCAoZCkge1xuICAgICAgICB1KGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzKGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGMoci50aHJvdyhsKSk7XG4gICAgICB9IGNhdGNoIChkKSB7XG4gICAgICAgIHUoZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMobCkge1xuICAgICAgbC5kb25lID8gbyhsLnZhbHVlKSA6IGkobC52YWx1ZSkudGhlbihhLCBzKTtcbiAgICB9XG4gICAgYygociA9IHIuYXBwbHkoZSwgdCB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gSGUoZSwgdCkge1xuICB2YXIgbiA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmIChvWzBdICYgMSlcbiAgICAgIHRocm93IG9bMV07XG4gICAgcmV0dXJuIG9bMV07XG4gIH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIHIsIGksIG8sIHU7XG4gIHJldHVybiB1ID0geyBuZXh0OiBhKDApLCB0aHJvdzogYSgxKSwgcmV0dXJuOiBhKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT0gXCJmdW5jdGlvblwiICYmICh1W1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIHU7XG4gIGZ1bmN0aW9uIGEoYykge1xuICAgIHJldHVybiBmdW5jdGlvbihsKSB7XG4gICAgICByZXR1cm4gcyhbYywgbF0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gcyhjKSB7XG4gICAgaWYgKHIpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICBmb3IgKDsgbjsgKVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHIgPSAxLCBpICYmIChvID0gY1swXSAmIDIgPyBpLnJldHVybiA6IGNbMF0gPyBpLnRocm93IHx8ICgobyA9IGkucmV0dXJuKSAmJiBvLmNhbGwoaSksIDApIDogaS5uZXh0KSAmJiAhKG8gPSBvLmNhbGwoaSwgY1sxXSkpLmRvbmUpXG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIHN3aXRjaCAoaSA9IDAsIG8gJiYgKGMgPSBbY1swXSAmIDIsIG8udmFsdWVdKSwgY1swXSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBvID0gYztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBuLmxhYmVsKyssIHsgdmFsdWU6IGNbMV0sIGRvbmU6ICExIH07XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgbi5sYWJlbCsrLCBpID0gY1sxXSwgYyA9IFswXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGMgPSBuLm9wcy5wb3AoKSwgbi50cnlzLnBvcCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChvID0gbi50cnlzLCAhKG8gPSBvLmxlbmd0aCA+IDAgJiYgb1tvLmxlbmd0aCAtIDFdKSAmJiAoY1swXSA9PT0gNiB8fCBjWzBdID09PSAyKSkge1xuICAgICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY1swXSA9PT0gMyAmJiAoIW8gfHwgY1sxXSA+IG9bMF0gJiYgY1sxXSA8IG9bM10pKSB7XG4gICAgICAgICAgICAgIG4ubGFiZWwgPSBjWzFdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjWzBdID09PSA2ICYmIG4ubGFiZWwgPCBvWzFdKSB7XG4gICAgICAgICAgICAgIG4ubGFiZWwgPSBvWzFdLCBvID0gYztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobyAmJiBuLmxhYmVsIDwgb1syXSkge1xuICAgICAgICAgICAgICBuLmxhYmVsID0gb1syXSwgbi5vcHMucHVzaChjKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvWzJdICYmIG4ub3BzLnBvcCgpLCBuLnRyeXMucG9wKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjID0gdC5jYWxsKGUsIG4pO1xuICAgICAgfSBjYXRjaCAobCkge1xuICAgICAgICBjID0gWzYsIGxdLCBpID0gMDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHIgPSBvID0gMDtcbiAgICAgIH1cbiAgICBpZiAoY1swXSAmIDUpXG4gICAgICB0aHJvdyBjWzFdO1xuICAgIHJldHVybiB7IHZhbHVlOiBjWzBdID8gY1sxXSA6IHZvaWQgMCwgZG9uZTogITAgfTtcbiAgfVxufVxuZnVuY3Rpb24gVihlKSB7XG4gIHZhciB0ID0gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBuID0gdCAmJiBlW3RdLCByID0gMDtcbiAgaWYgKG4pXG4gICAgcmV0dXJuIG4uY2FsbChlKTtcbiAgaWYgKGUgJiYgdHlwZW9mIGUubGVuZ3RoID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZSAmJiByID49IGUubGVuZ3RoICYmIChlID0gdm9pZCAwKSwgeyB2YWx1ZTogZSAmJiBlW3IrK10sIGRvbmU6ICFlIH07XG4gICAgICB9XG4gICAgfTtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcih0ID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufVxuZnVuY3Rpb24gRChlLCB0KSB7XG4gIHZhciBuID0gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgZVtTeW1ib2wuaXRlcmF0b3JdO1xuICBpZiAoIW4pXG4gICAgcmV0dXJuIGU7XG4gIHZhciByID0gbi5jYWxsKGUpLCBpLCBvID0gW10sIHU7XG4gIHRyeSB7XG4gICAgZm9yICg7ICh0ID09PSB2b2lkIDAgfHwgdC0tID4gMCkgJiYgIShpID0gci5uZXh0KCkpLmRvbmU7IClcbiAgICAgIG8ucHVzaChpLnZhbHVlKTtcbiAgfSBjYXRjaCAoYSkge1xuICAgIHUgPSB7IGVycm9yOiBhIH07XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGkgJiYgIWkuZG9uZSAmJiAobiA9IHIucmV0dXJuKSAmJiBuLmNhbGwocik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICh1KVxuICAgICAgICB0aHJvdyB1LmVycm9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbztcbn1cbmZ1bmN0aW9uIFIoZSwgdCwgbikge1xuICBpZiAobiB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKVxuICAgIGZvciAodmFyIHIgPSAwLCBpID0gdC5sZW5ndGgsIG87IHIgPCBpOyByKyspXG4gICAgICAobyB8fCAhKHIgaW4gdCkpICYmIChvIHx8IChvID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwgMCwgcikpLCBvW3JdID0gdFtyXSk7XG4gIHJldHVybiBlLmNvbmNhdChvIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKTtcbn1cbmZ1bmN0aW9uIFUoZSkge1xuICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIFUgPyAodGhpcy52ID0gZSwgdGhpcykgOiBuZXcgVShlKTtcbn1cbmZ1bmN0aW9uIEJ0KGUsIHQsIG4pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcilcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgciA9IG4uYXBwbHkoZSwgdCB8fCBbXSksIGksIG8gPSBbXTtcbiAgcmV0dXJuIGkgPSB7fSwgdShcIm5leHRcIiksIHUoXCJ0aHJvd1wiKSwgdShcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgaTtcbiAgZnVuY3Rpb24gdSh2KSB7XG4gICAgclt2XSAmJiAoaVt2XSA9IGZ1bmN0aW9uKHApIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihTLCBoKSB7XG4gICAgICAgIG8ucHVzaChbdiwgcCwgUywgaF0pID4gMSB8fCBhKHYsIHApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gYSh2LCBwKSB7XG4gICAgdHJ5IHtcbiAgICAgIHMoclt2XShwKSk7XG4gICAgfSBjYXRjaCAoUykge1xuICAgICAgZChvWzBdWzNdLCBTKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcyh2KSB7XG4gICAgdi52YWx1ZSBpbnN0YW5jZW9mIFUgPyBQcm9taXNlLnJlc29sdmUodi52YWx1ZS52KS50aGVuKGMsIGwpIDogZChvWzBdWzJdLCB2KTtcbiAgfVxuICBmdW5jdGlvbiBjKHYpIHtcbiAgICBhKFwibmV4dFwiLCB2KTtcbiAgfVxuICBmdW5jdGlvbiBsKHYpIHtcbiAgICBhKFwidGhyb3dcIiwgdik7XG4gIH1cbiAgZnVuY3Rpb24gZCh2LCBwKSB7XG4gICAgdihwKSwgby5zaGlmdCgpLCBvLmxlbmd0aCAmJiBhKG9bMF1bMF0sIG9bMF1bMV0pO1xuICB9XG59XG5mdW5jdGlvbiBYdChlKSB7XG4gIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIHQgPSBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgbjtcbiAgcmV0dXJuIHQgPyB0LmNhbGwoZSkgOiAoZSA9IHR5cGVvZiBWID09IFwiZnVuY3Rpb25cIiA/IFYoZSkgOiBlW1N5bWJvbC5pdGVyYXRvcl0oKSwgbiA9IHt9LCByKFwibmV4dFwiKSwgcihcInRocm93XCIpLCByKFwicmV0dXJuXCIpLCBuW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCBuKTtcbiAgZnVuY3Rpb24gcihvKSB7XG4gICAgbltvXSA9IGVbb10gJiYgZnVuY3Rpb24odSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGEsIHMpIHtcbiAgICAgICAgdSA9IGVbb10odSksIGkoYSwgcywgdS5kb25lLCB1LnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gaShvLCB1LCBhLCBzKSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHMpLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgbyh7IHZhbHVlOiBjLCBkb25lOiBhIH0pO1xuICAgIH0sIHUpO1xuICB9XG59XG5mdW5jdGlvbiBiKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIG1lKGUpIHtcbiAgdmFyIHQgPSBmdW5jdGlvbihyKSB7XG4gICAgRXJyb3IuY2FsbChyKSwgci5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICB9LCBuID0gZSh0KTtcbiAgcmV0dXJuIG4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLCBuLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IG4sIG47XG59XG52YXIgb2UgPSBtZShmdW5jdGlvbihlKSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5tZXNzYWdlID0gbiA/IG4ubGVuZ3RoICsgYCBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxuYCArIG4ubWFwKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAgIHJldHVybiBpICsgMSArIFwiKSBcIiArIHIudG9TdHJpbmcoKTtcbiAgICB9KS5qb2luKGBcbiAgYCkgOiBcIlwiLCB0aGlzLm5hbWUgPSBcIlVuc3Vic2NyaXB0aW9uRXJyb3JcIiwgdGhpcy5lcnJvcnMgPSBuO1xuICB9O1xufSk7XG5mdW5jdGlvbiBCKGUsIHQpIHtcbiAgaWYgKGUpIHtcbiAgICB2YXIgbiA9IGUuaW5kZXhPZih0KTtcbiAgICAwIDw9IG4gJiYgZS5zcGxpY2UobiwgMSk7XG4gIH1cbn1cbnZhciBOID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGUodCkge1xuICAgIHRoaXMuaW5pdGlhbFRlYXJkb3duID0gdCwgdGhpcy5jbG9zZWQgPSAhMSwgdGhpcy5fcGFyZW50YWdlID0gbnVsbCwgdGhpcy5fZmluYWxpemVycyA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQsIG4sIHIsIGksIG87XG4gICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgdGhpcy5jbG9zZWQgPSAhMDtcbiAgICAgIHZhciB1ID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgaWYgKHUpXG4gICAgICAgIGlmICh0aGlzLl9wYXJlbnRhZ2UgPSBudWxsLCBBcnJheS5pc0FycmF5KHUpKVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gVih1KSwgcyA9IGEubmV4dCgpOyAhcy5kb25lOyBzID0gYS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgdmFyIGMgPSBzLnZhbHVlO1xuICAgICAgICAgICAgICBjLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChoKSB7XG4gICAgICAgICAgICB0ID0geyBlcnJvcjogaCB9O1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzICYmICFzLmRvbmUgJiYgKG4gPSBhLnJldHVybikgJiYgbi5jYWxsKGEpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgaWYgKHQpXG4gICAgICAgICAgICAgICAgdGhyb3cgdC5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB1LnJlbW92ZSh0aGlzKTtcbiAgICAgIHZhciBsID0gdGhpcy5pbml0aWFsVGVhcmRvd247XG4gICAgICBpZiAoYihsKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsKCk7XG4gICAgICAgIH0gY2F0Y2ggKGgpIHtcbiAgICAgICAgICBvID0gaCBpbnN0YW5jZW9mIG9lID8gaC5lcnJvcnMgOiBbaF07XG4gICAgICAgIH1cbiAgICAgIHZhciBkID0gdGhpcy5fZmluYWxpemVycztcbiAgICAgIGlmIChkKSB7XG4gICAgICAgIHRoaXMuX2ZpbmFsaXplcnMgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAodmFyIHYgPSBWKGQpLCBwID0gdi5uZXh0KCk7ICFwLmRvbmU7IHAgPSB2Lm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIFMgPSBwLnZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgV2UoUyk7XG4gICAgICAgICAgICB9IGNhdGNoIChoKSB7XG4gICAgICAgICAgICAgIG8gPSBvICE9IG51bGwgPyBvIDogW10sIGggaW5zdGFuY2VvZiBvZSA/IG8gPSBSKFIoW10sIEQobykpLCBEKGguZXJyb3JzKSkgOiBvLnB1c2goaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChoKSB7XG4gICAgICAgICAgciA9IHsgZXJyb3I6IGggfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcCAmJiAhcC5kb25lICYmIChpID0gdi5yZXR1cm4pICYmIGkuY2FsbCh2KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICAgIHRocm93IHIuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobylcbiAgICAgICAgdGhyb3cgbmV3IG9lKG8pO1xuICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuO1xuICAgIGlmICh0ICYmIHQgIT09IHRoaXMpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICAgIFdlKHQpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZSkge1xuICAgICAgICAgIGlmICh0LmNsb3NlZCB8fCB0Ll9oYXNQYXJlbnQodGhpcykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgdC5fYWRkUGFyZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgICh0aGlzLl9maW5hbGl6ZXJzID0gKG4gPSB0aGlzLl9maW5hbGl6ZXJzKSAhPT0gbnVsbCAmJiBuICE9PSB2b2lkIDAgPyBuIDogW10pLnB1c2godCk7XG4gICAgICB9XG4gIH0sIGUucHJvdG90eXBlLl9oYXNQYXJlbnQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgcmV0dXJuIG4gPT09IHQgfHwgQXJyYXkuaXNBcnJheShuKSAmJiBuLmluY2x1ZGVzKHQpO1xuICB9LCBlLnByb3RvdHlwZS5fYWRkUGFyZW50ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fcGFyZW50YWdlO1xuICAgIHRoaXMuX3BhcmVudGFnZSA9IEFycmF5LmlzQXJyYXkobikgPyAobi5wdXNoKHQpLCBuKSA6IG4gPyBbbiwgdF0gOiB0O1xuICB9LCBlLnByb3RvdHlwZS5fcmVtb3ZlUGFyZW50ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fcGFyZW50YWdlO1xuICAgIG4gPT09IHQgPyB0aGlzLl9wYXJlbnRhZ2UgPSBudWxsIDogQXJyYXkuaXNBcnJheShuKSAmJiBCKG4sIHQpO1xuICB9LCBlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9maW5hbGl6ZXJzO1xuICAgIG4gJiYgQihuLCB0KSwgdCBpbnN0YW5jZW9mIGUgJiYgdC5fcmVtb3ZlUGFyZW50KHRoaXMpO1xuICB9LCBlLkVNUFRZID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSBuZXcgZSgpO1xuICAgIHJldHVybiB0LmNsb3NlZCA9ICEwLCB0O1xuICB9KCksIGU7XG59KCksIFllID0gTi5FTVBUWTtcbmZ1bmN0aW9uIEdlKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBOIHx8IGUgJiYgXCJjbG9zZWRcIiBpbiBlICYmIGIoZS5yZW1vdmUpICYmIGIoZS5hZGQpICYmIGIoZS51bnN1YnNjcmliZSk7XG59XG5mdW5jdGlvbiBXZShlKSB7XG4gIGIoZSkgPyBlKCkgOiBlLnVuc3Vic2NyaWJlKCk7XG59XG52YXIgYmUgPSB7XG4gIG9uVW5oYW5kbGVkRXJyb3I6IG51bGwsXG4gIG9uU3RvcHBlZE5vdGlmaWNhdGlvbjogbnVsbCxcbiAgUHJvbWlzZTogdm9pZCAwLFxuICB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nOiAhMSxcbiAgdXNlRGVwcmVjYXRlZE5leHRDb250ZXh0OiAhMVxufSwgbGUgPSB7XG4gIHNldFRpbWVvdXQ6IGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIHIgPSAyOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKVxuICAgICAgbltyIC0gMl0gPSBhcmd1bWVudHNbcl07XG4gICAgdmFyIGkgPSBsZS5kZWxlZ2F0ZTtcbiAgICByZXR1cm4gaSAhPSBudWxsICYmIGkuc2V0VGltZW91dCA/IGkuc2V0VGltZW91dC5hcHBseShpLCBSKFtlLCB0XSwgRChuKSkpIDogc2V0VGltZW91dC5hcHBseSh2b2lkIDAsIFIoW2UsIHRdLCBEKG4pKSk7XG4gIH0sXG4gIGNsZWFyVGltZW91dDogZnVuY3Rpb24oZSkge1xuICAgIHZhciB0ID0gbGUuZGVsZWdhdGU7XG4gICAgcmV0dXJuICgodCA9PSBudWxsID8gdm9pZCAwIDogdC5jbGVhclRpbWVvdXQpIHx8IGNsZWFyVGltZW91dCkoZSk7XG4gIH0sXG4gIGRlbGVnYXRlOiB2b2lkIDBcbn07XG5mdW5jdGlvbiBKZShlKSB7XG4gIGxlLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBmZSgpIHtcbn1cbnZhciBHID0gbnVsbDtcbmZ1bmN0aW9uIHooZSkge1xuICBpZiAoYmUudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgIHZhciB0ID0gIUc7XG4gICAgaWYgKHQgJiYgKEcgPSB7IGVycm9yVGhyb3duOiAhMSwgZXJyb3I6IG51bGwgfSksIGUoKSwgdCkge1xuICAgICAgdmFyIG4gPSBHLCByID0gbi5lcnJvclRocm93biwgaSA9IG4uZXJyb3I7XG4gICAgICBpZiAoRyA9IG51bGwsIHIpXG4gICAgICAgIHRocm93IGk7XG4gICAgfVxuICB9IGVsc2VcbiAgICBlKCk7XG59XG52YXIgeWUgPSBmdW5jdGlvbihlKSB7XG4gIHgodCwgZSk7XG4gIGZ1bmN0aW9uIHQobikge1xuICAgIHZhciByID0gZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgcmV0dXJuIHIuaXNTdG9wcGVkID0gITEsIG4gPyAoci5kZXN0aW5hdGlvbiA9IG4sIEdlKG4pICYmIG4uYWRkKHIpKSA6IHIuZGVzdGluYXRpb24gPSBybiwgcjtcbiAgfVxuICByZXR1cm4gdC5jcmVhdGUgPSBmdW5jdGlvbihuLCByLCBpKSB7XG4gICAgcmV0dXJuIG5ldyBMKG4sIHIsIGkpO1xuICB9LCB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMuaXNTdG9wcGVkIHx8IHRoaXMuX25leHQobik7XG4gIH0sIHQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMuaXNTdG9wcGVkIHx8ICh0aGlzLmlzU3RvcHBlZCA9ICEwLCB0aGlzLl9lcnJvcihuKSk7XG4gIH0sIHQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIHRoaXMuX2NvbXBsZXRlKCkpO1xuICB9LCB0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2xvc2VkIHx8ICh0aGlzLmlzU3RvcHBlZCA9ICEwLCBlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpLCB0aGlzLmRlc3RpbmF0aW9uID0gbnVsbCk7XG4gIH0sIHQucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChuKTtcbiAgfSwgdC5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24obikge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKG4pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9LCB0LnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9LCB0O1xufShOKSwgZW4gPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcbmZ1bmN0aW9uIHVlKGUsIHQpIHtcbiAgcmV0dXJuIGVuLmNhbGwoZSwgdCk7XG59XG52YXIgdG4gPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0KSB7XG4gICAgdGhpcy5wYXJ0aWFsT2JzZXJ2ZXIgPSB0O1xuICB9XG4gIHJldHVybiBlLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKG4ubmV4dClcbiAgICAgIHRyeSB7XG4gICAgICAgIG4ubmV4dCh0KTtcbiAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgSihyKTtcbiAgICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcnRpYWxPYnNlcnZlcjtcbiAgICBpZiAobi5lcnJvcilcbiAgICAgIHRyeSB7XG4gICAgICAgIG4uZXJyb3IodCk7XG4gICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgIEoocik7XG4gICAgICB9XG4gICAgZWxzZVxuICAgICAgSih0KTtcbiAgfSwgZS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgIGlmICh0LmNvbXBsZXRlKVxuICAgICAgdHJ5IHtcbiAgICAgICAgdC5jb21wbGV0ZSgpO1xuICAgICAgfSBjYXRjaCAobikge1xuICAgICAgICBKKG4pO1xuICAgICAgfVxuICB9LCBlO1xufSgpLCBMID0gZnVuY3Rpb24oZSkge1xuICB4KHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIsIGkpIHtcbiAgICB2YXIgbyA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzLCB1O1xuICAgIGlmIChiKG4pIHx8ICFuKVxuICAgICAgdSA9IHtcbiAgICAgICAgbmV4dDogbiAhPSBudWxsID8gbiA6IHZvaWQgMCxcbiAgICAgICAgZXJyb3I6IHIgIT0gbnVsbCA/IHIgOiB2b2lkIDAsXG4gICAgICAgIGNvbXBsZXRlOiBpICE9IG51bGwgPyBpIDogdm9pZCAwXG4gICAgICB9O1xuICAgIGVsc2Uge1xuICAgICAgdmFyIGE7XG4gICAgICBvICYmIGJlLnVzZURlcHJlY2F0ZWROZXh0Q29udGV4dCA/IChhID0gT2JqZWN0LmNyZWF0ZShuKSwgYS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gby51bnN1YnNjcmliZSgpO1xuICAgICAgfSwgdSA9IHtcbiAgICAgICAgbmV4dDogbi5uZXh0ICYmIHVlKG4ubmV4dCwgYSksXG4gICAgICAgIGVycm9yOiBuLmVycm9yICYmIHVlKG4uZXJyb3IsIGEpLFxuICAgICAgICBjb21wbGV0ZTogbi5jb21wbGV0ZSAmJiB1ZShuLmNvbXBsZXRlLCBhKVxuICAgICAgfSkgOiB1ID0gbjtcbiAgICB9XG4gICAgcmV0dXJuIG8uZGVzdGluYXRpb24gPSBuZXcgdG4odSksIG87XG4gIH1cbiAgcmV0dXJuIHQ7XG59KHllKTtcbmZ1bmN0aW9uIEooZSkge1xuICBKZShlKTtcbn1cbmZ1bmN0aW9uIG5uKGUpIHtcbiAgdGhyb3cgZTtcbn1cbnZhciBybiA9IHtcbiAgY2xvc2VkOiAhMCxcbiAgbmV4dDogZmUsXG4gIGVycm9yOiBubixcbiAgY29tcGxldGU6IGZlXG59LCBnZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgXCJAQG9ic2VydmFibGVcIjtcbn0oKTtcbmZ1bmN0aW9uIFcoZSkge1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIG9uKGUpIHtcbiAgcmV0dXJuIGUubGVuZ3RoID09PSAwID8gVyA6IGUubGVuZ3RoID09PSAxID8gZVswXSA6IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24ociwgaSkge1xuICAgICAgcmV0dXJuIGkocik7XG4gICAgfSwgbik7XG4gIH07XG59XG52YXIgeSA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQpIHtcbiAgICB0ICYmICh0aGlzLl9zdWJzY3JpYmUgPSB0KTtcbiAgfVxuICByZXR1cm4gZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IG5ldyBlKCk7XG4gICAgcmV0dXJuIG4uc291cmNlID0gdGhpcywgbi5vcGVyYXRvciA9IHQsIG47XG4gIH0sIGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHQsIG4sIHIpIHtcbiAgICB2YXIgaSA9IHRoaXMsIG8gPSBhbih0KSA/IHQgOiBuZXcgTCh0LCBuLCByKTtcbiAgICByZXR1cm4geihmdW5jdGlvbigpIHtcbiAgICAgIHZhciB1ID0gaSwgYSA9IHUub3BlcmF0b3IsIHMgPSB1LnNvdXJjZTtcbiAgICAgIG8uYWRkKGEgPyBhLmNhbGwobywgcykgOiBzID8gaS5fc3Vic2NyaWJlKG8pIDogaS5fdHJ5U3Vic2NyaWJlKG8pKTtcbiAgICB9KSwgbztcbiAgfSwgZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSh0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICB0LmVycm9yKG4pO1xuICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKHQsIG4pIHtcbiAgICB2YXIgciA9IHRoaXM7XG4gICAgcmV0dXJuIG4gPSBxZShuKSwgbmV3IG4oZnVuY3Rpb24oaSwgbykge1xuICAgICAgdmFyIHUgPSBuZXcgTCh7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdChhKTtcbiAgICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgICBvKHMpLCB1LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbyxcbiAgICAgICAgY29tcGxldGU6IGlcbiAgICAgIH0pO1xuICAgICAgci5zdWJzY3JpYmUodSk7XG4gICAgfSk7XG4gIH0sIGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuIChuID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG4uc3Vic2NyaWJlKHQpO1xuICB9LCBlLnByb3RvdHlwZVtnZV0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDA7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspXG4gICAgICB0W25dID0gYXJndW1lbnRzW25dO1xuICAgIHJldHVybiBvbih0KSh0aGlzKTtcbiAgfSwgZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcztcbiAgICByZXR1cm4gdCA9IHFlKHQpLCBuZXcgdChmdW5jdGlvbihyLCBpKSB7XG4gICAgICB2YXIgbztcbiAgICAgIG4uc3Vic2NyaWJlKGZ1bmN0aW9uKHUpIHtcbiAgICAgICAgcmV0dXJuIG8gPSB1O1xuICAgICAgfSwgZnVuY3Rpb24odSkge1xuICAgICAgICByZXR1cm4gaSh1KTtcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcihvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gbmV3IGUodCk7XG4gIH0sIGU7XG59KCk7XG5mdW5jdGlvbiBxZShlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gKHQgPSBlICE9IG51bGwgPyBlIDogYmUuUHJvbWlzZSkgIT09IG51bGwgJiYgdCAhPT0gdm9pZCAwID8gdCA6IFByb21pc2U7XG59XG5mdW5jdGlvbiB1bihlKSB7XG4gIHJldHVybiBlICYmIGIoZS5uZXh0KSAmJiBiKGUuZXJyb3IpICYmIGIoZS5jb21wbGV0ZSk7XG59XG5mdW5jdGlvbiBhbihlKSB7XG4gIHJldHVybiBlICYmIGUgaW5zdGFuY2VvZiB5ZSB8fCB1bihlKSAmJiBHZShlKTtcbn1cbmZ1bmN0aW9uIHNuKGUpIHtcbiAgcmV0dXJuIGIoZSA9PSBudWxsID8gdm9pZCAwIDogZS5saWZ0KTtcbn1cbmZ1bmN0aW9uIF8oZSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGlmIChzbih0KSlcbiAgICAgIHJldHVybiB0LmxpZnQoZnVuY3Rpb24obikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBlKG4sIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBsaWZ0IHVua25vd24gT2JzZXJ2YWJsZSB0eXBlXCIpO1xuICB9O1xufVxuZnVuY3Rpb24gdyhlLCB0LCBuLCByLCBpKSB7XG4gIHJldHVybiBuZXcgY24oZSwgdCwgbiwgciwgaSk7XG59XG52YXIgY24gPSBmdW5jdGlvbihlKSB7XG4gIHgodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgciwgaSwgbywgdSwgYSkge1xuICAgIHZhciBzID0gZS5jYWxsKHRoaXMsIG4pIHx8IHRoaXM7XG4gICAgcmV0dXJuIHMub25GaW5hbGl6ZSA9IHUsIHMuc2hvdWxkVW5zdWJzY3JpYmUgPSBhLCBzLl9uZXh0ID0gciA/IGZ1bmN0aW9uKGMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHIoYyk7XG4gICAgICB9IGNhdGNoIChsKSB7XG4gICAgICAgIG4uZXJyb3IobCk7XG4gICAgICB9XG4gICAgfSA6IGUucHJvdG90eXBlLl9uZXh0LCBzLl9lcnJvciA9IG8gPyBmdW5jdGlvbihjKSB7XG4gICAgICB0cnkge1xuICAgICAgICBvKGMpO1xuICAgICAgfSBjYXRjaCAobCkge1xuICAgICAgICBuLmVycm9yKGwpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fZXJyb3IsIHMuX2NvbXBsZXRlID0gaSA/IGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaSgpO1xuICAgICAgfSBjYXRjaCAoYykge1xuICAgICAgICBuLmVycm9yKGMpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fY29tcGxldGUsIHM7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgdmFyIHIgPSB0aGlzLmNsb3NlZDtcbiAgICAgIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksICFyICYmICgobiA9IHRoaXMub25GaW5hbGl6ZSkgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwIHx8IG4uY2FsbCh0aGlzKSk7XG4gICAgfVxuICB9LCB0O1xufSh5ZSksIGxuID0gbWUoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5uYW1lID0gXCJPYmplY3RVbnN1YnNjcmliZWRFcnJvclwiLCB0aGlzLm1lc3NhZ2UgPSBcIm9iamVjdCB1bnN1YnNjcmliZWRcIjtcbiAgfTtcbn0pLCBuZSA9IGZ1bmN0aW9uKGUpIHtcbiAgeCh0LCBlKTtcbiAgZnVuY3Rpb24gdCgpIHtcbiAgICB2YXIgbiA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiBuLmNsb3NlZCA9ICExLCBuLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBuLm9ic2VydmVycyA9IFtdLCBuLmlzU3RvcHBlZCA9ICExLCBuLmhhc0Vycm9yID0gITEsIG4udGhyb3duRXJyb3IgPSBudWxsLCBuO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gbmV3IFFlKHRoaXMsIHRoaXMpO1xuICAgIHJldHVybiByLm9wZXJhdG9yID0gbiwgcjtcbiAgfSwgdC5wcm90b3R5cGUuX3Rocm93SWZDbG9zZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICB0aHJvdyBuZXcgbG4oKTtcbiAgfSwgdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IHRoaXM7XG4gICAgeihmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBvO1xuICAgICAgaWYgKHIuX3Rocm93SWZDbG9zZWQoKSwgIXIuaXNTdG9wcGVkKSB7XG4gICAgICAgIHIuY3VycmVudE9ic2VydmVycyB8fCAoci5jdXJyZW50T2JzZXJ2ZXJzID0gQXJyYXkuZnJvbShyLm9ic2VydmVycykpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAodmFyIHUgPSBWKHIuY3VycmVudE9ic2VydmVycyksIGEgPSB1Lm5leHQoKTsgIWEuZG9uZTsgYSA9IHUubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGEudmFsdWU7XG4gICAgICAgICAgICBzLm5leHQobik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgICAgaSA9IHsgZXJyb3I6IGMgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYSAmJiAhYS5kb25lICYmIChvID0gdS5yZXR1cm4pICYmIG8uY2FsbCh1KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICAgIHRocm93IGkuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcztcbiAgICB6KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHIuX3Rocm93SWZDbG9zZWQoKSwgIXIuaXNTdG9wcGVkKSB7XG4gICAgICAgIHIuaGFzRXJyb3IgPSByLmlzU3RvcHBlZCA9ICEwLCByLnRocm93bkVycm9yID0gbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IHIub2JzZXJ2ZXJzOyBpLmxlbmd0aDsgKVxuICAgICAgICAgIGkuc2hpZnQoKS5lcnJvcihuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXM7XG4gICAgeihmdW5jdGlvbigpIHtcbiAgICAgIGlmIChuLl90aHJvd0lmQ2xvc2VkKCksICFuLmlzU3RvcHBlZCkge1xuICAgICAgICBuLmlzU3RvcHBlZCA9ICEwO1xuICAgICAgICBmb3IgKHZhciByID0gbi5vYnNlcnZlcnM7IHIubGVuZ3RoOyApXG4gICAgICAgICAgci5zaGlmdCgpLmNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgPSB0aGlzLmNsb3NlZCA9ICEwLCB0aGlzLm9ic2VydmVycyA9IHRoaXMuY3VycmVudE9ic2VydmVycyA9IG51bGw7XG4gIH0sIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJvYnNlcnZlZFwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuO1xuICAgICAgcmV0dXJuICgobiA9IHRoaXMub2JzZXJ2ZXJzKSA9PT0gbnVsbCB8fCBuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuLmxlbmd0aCkgPiAwO1xuICAgIH0sXG4gICAgZW51bWVyYWJsZTogITEsXG4gICAgY29uZmlndXJhYmxlOiAhMFxuICB9KSwgdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhyb3dJZkNsb3NlZCgpLCBlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgbik7XG4gIH0sIHQucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rocm93SWZDbG9zZWQoKSwgdGhpcy5fY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyhuKSwgdGhpcy5faW5uZXJTdWJzY3JpYmUobik7XG4gIH0sIHQucHJvdG90eXBlLl9pbm5lclN1YnNjcmliZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IHRoaXMsIGkgPSB0aGlzLCBvID0gaS5oYXNFcnJvciwgdSA9IGkuaXNTdG9wcGVkLCBhID0gaS5vYnNlcnZlcnM7XG4gICAgcmV0dXJuIG8gfHwgdSA/IFllIDogKHRoaXMuY3VycmVudE9ic2VydmVycyA9IG51bGwsIGEucHVzaChuKSwgbmV3IE4oZnVuY3Rpb24oKSB7XG4gICAgICByLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBCKGEsIG4pO1xuICAgIH0pKTtcbiAgfSwgdC5wcm90b3R5cGUuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLCBpID0gci5oYXNFcnJvciwgbyA9IHIudGhyb3duRXJyb3IsIHUgPSByLmlzU3RvcHBlZDtcbiAgICBpID8gbi5lcnJvcihvKSA6IHUgJiYgbi5jb21wbGV0ZSgpO1xuICB9LCB0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IG5ldyB5KCk7XG4gICAgcmV0dXJuIG4uc291cmNlID0gdGhpcywgbjtcbiAgfSwgdC5jcmVhdGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgcmV0dXJuIG5ldyBRZShuLCByKTtcbiAgfSwgdDtcbn0oeSksIFFlID0gZnVuY3Rpb24oZSkge1xuICB4KHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiBpLmRlc3RpbmF0aW9uID0gbiwgaS5zb3VyY2UgPSByLCBpO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIChpID0gKHIgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLm5leHQpID09PSBudWxsIHx8IGkgPT09IHZvaWQgMCB8fCBpLmNhbGwociwgbik7XG4gIH0sIHQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIChpID0gKHIgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLmVycm9yKSA9PT0gbnVsbCB8fCBpID09PSB2b2lkIDAgfHwgaS5jYWxsKHIsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuLCByO1xuICAgIChyID0gKG4gPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCBuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgfHwgci5jYWxsKG4pO1xuICB9LCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIHJldHVybiAoaSA9IChyID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IHIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHIuc3Vic2NyaWJlKG4pKSAhPT0gbnVsbCAmJiBpICE9PSB2b2lkIDAgPyBpIDogWWU7XG4gIH0sIHQ7XG59KG5lKSwgd2UgPSB7XG4gIG5vdzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh3ZS5kZWxlZ2F0ZSB8fCBEYXRlKS5ub3coKTtcbiAgfSxcbiAgZGVsZWdhdGU6IHZvaWQgMFxufSwgZm4gPSBmdW5jdGlvbihlKSB7XG4gIHgodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgciwgaSkge1xuICAgIG4gPT09IHZvaWQgMCAmJiAobiA9IDEgLyAwKSwgciA9PT0gdm9pZCAwICYmIChyID0gMSAvIDApLCBpID09PSB2b2lkIDAgJiYgKGkgPSB3ZSk7XG4gICAgdmFyIG8gPSBlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICByZXR1cm4gby5fYnVmZmVyU2l6ZSA9IG4sIG8uX3dpbmRvd1RpbWUgPSByLCBvLl90aW1lc3RhbXBQcm92aWRlciA9IGksIG8uX2J1ZmZlciA9IFtdLCBvLl9pbmZpbml0ZVRpbWVXaW5kb3cgPSAhMCwgby5faW5maW5pdGVUaW1lV2luZG93ID0gciA9PT0gMSAvIDAsIG8uX2J1ZmZlclNpemUgPSBNYXRoLm1heCgxLCBuKSwgby5fd2luZG93VGltZSA9IE1hdGgubWF4KDEsIHIpLCBvO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcywgaSA9IHIuaXNTdG9wcGVkLCBvID0gci5fYnVmZmVyLCB1ID0gci5faW5maW5pdGVUaW1lV2luZG93LCBhID0gci5fdGltZXN0YW1wUHJvdmlkZXIsIHMgPSByLl93aW5kb3dUaW1lO1xuICAgIGkgfHwgKG8ucHVzaChuKSwgIXUgJiYgby5wdXNoKGEubm93KCkgKyBzKSksIHRoaXMuX3RyaW1CdWZmZXIoKSwgZS5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMuX3Rocm93SWZDbG9zZWQoKSwgdGhpcy5fdHJpbUJ1ZmZlcigpO1xuICAgIGZvciAodmFyIHIgPSB0aGlzLl9pbm5lclN1YnNjcmliZShuKSwgaSA9IHRoaXMsIG8gPSBpLl9pbmZpbml0ZVRpbWVXaW5kb3csIHUgPSBpLl9idWZmZXIsIGEgPSB1LnNsaWNlKCksIHMgPSAwOyBzIDwgYS5sZW5ndGggJiYgIW4uY2xvc2VkOyBzICs9IG8gPyAxIDogMilcbiAgICAgIG4ubmV4dChhW3NdKTtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyhuKSwgcjtcbiAgfSwgdC5wcm90b3R5cGUuX3RyaW1CdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMsIHIgPSBuLl9idWZmZXJTaXplLCBpID0gbi5fdGltZXN0YW1wUHJvdmlkZXIsIG8gPSBuLl9idWZmZXIsIHUgPSBuLl9pbmZpbml0ZVRpbWVXaW5kb3csIGEgPSAodSA/IDEgOiAyKSAqIHI7XG4gICAgaWYgKHIgPCAxIC8gMCAmJiBhIDwgby5sZW5ndGggJiYgby5zcGxpY2UoMCwgby5sZW5ndGggLSBhKSwgIXUpIHtcbiAgICAgIGZvciAodmFyIHMgPSBpLm5vdygpLCBjID0gMCwgbCA9IDE7IGwgPCBvLmxlbmd0aCAmJiBvW2xdIDw9IHM7IGwgKz0gMilcbiAgICAgICAgYyA9IGw7XG4gICAgICBjICYmIG8uc3BsaWNlKDAsIGMgKyAxKTtcbiAgICB9XG4gIH0sIHQ7XG59KG5lKSwgZG4gPSBmdW5jdGlvbihlKSB7XG4gIHgodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgcikge1xuICAgIHJldHVybiBlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sIHQ7XG59KE4pLCBYID0ge1xuICBzZXRJbnRlcnZhbDogZnVuY3Rpb24oZSwgdCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDI7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspXG4gICAgICBuW3IgLSAyXSA9IGFyZ3VtZW50c1tyXTtcbiAgICB2YXIgaSA9IFguZGVsZWdhdGU7XG4gICAgcmV0dXJuIGkgIT0gbnVsbCAmJiBpLnNldEludGVydmFsID8gaS5zZXRJbnRlcnZhbC5hcHBseShpLCBSKFtlLCB0XSwgRChuKSkpIDogc2V0SW50ZXJ2YWwuYXBwbHkodm9pZCAwLCBSKFtlLCB0XSwgRChuKSkpO1xuICB9LFxuICBjbGVhckludGVydmFsOiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHQgPSBYLmRlbGVnYXRlO1xuICAgIHJldHVybiAoKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuY2xlYXJJbnRlcnZhbCkgfHwgY2xlYXJJbnRlcnZhbCkoZSk7XG4gIH0sXG4gIGRlbGVnYXRlOiB2b2lkIDBcbn0sIHZuID0gZnVuY3Rpb24oZSkge1xuICB4KHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0aGlzLCBuLCByKSB8fCB0aGlzO1xuICAgIHJldHVybiBpLnNjaGVkdWxlciA9IG4sIGkud29yayA9IHIsIGkucGVuZGluZyA9ICExLCBpO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBpZiAociA9PT0gdm9pZCAwICYmIChyID0gMCksIHRoaXMuY2xvc2VkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IG47XG4gICAgdmFyIGkgPSB0aGlzLmlkLCBvID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgcmV0dXJuIGkgIT0gbnVsbCAmJiAodGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQobywgaSwgcikpLCB0aGlzLnBlbmRpbmcgPSAhMCwgdGhpcy5kZWxheSA9IHIsIHRoaXMuaWQgPSB0aGlzLmlkIHx8IHRoaXMucmVxdWVzdEFzeW5jSWQobywgdGhpcy5pZCwgciksIHRoaXM7XG4gIH0sIHQucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIHJldHVybiBpID09PSB2b2lkIDAgJiYgKGkgPSAwKSwgWC5zZXRJbnRlcnZhbChuLmZsdXNoLmJpbmQobiwgdGhpcyksIGkpO1xuICB9LCB0LnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uKG4sIHIsIGkpIHtcbiAgICBpZiAoaSA9PT0gdm9pZCAwICYmIChpID0gMCksIGkgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBpICYmIHRoaXMucGVuZGluZyA9PT0gITEpXG4gICAgICByZXR1cm4gcjtcbiAgICBYLmNsZWFySW50ZXJ2YWwocik7XG4gIH0sIHQucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgaWYgKHRoaXMuY2xvc2VkKVxuICAgICAgcmV0dXJuIG5ldyBFcnJvcihcImV4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb25cIik7XG4gICAgdGhpcy5wZW5kaW5nID0gITE7XG4gICAgdmFyIGkgPSB0aGlzLl9leGVjdXRlKG4sIHIpO1xuICAgIGlmIChpKVxuICAgICAgcmV0dXJuIGk7XG4gICAgdGhpcy5wZW5kaW5nID09PSAhMSAmJiB0aGlzLmlkICE9IG51bGwgJiYgKHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHRoaXMuc2NoZWR1bGVyLCB0aGlzLmlkLCBudWxsKSk7XG4gIH0sIHQucHJvdG90eXBlLl9leGVjdXRlID0gZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpID0gITEsIG87XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMud29yayhuKTtcbiAgICB9IGNhdGNoICh1KSB7XG4gICAgICBpID0gITAsIG8gPSB1IHx8IG5ldyBFcnJvcihcIlNjaGVkdWxlZCBhY3Rpb24gdGhyZXcgZmFsc3kgZXJyb3JcIik7XG4gICAgfVxuICAgIGlmIChpKVxuICAgICAgcmV0dXJuIHRoaXMudW5zdWJzY3JpYmUoKSwgbztcbiAgfSwgdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY2xvc2VkKSB7XG4gICAgICB2YXIgbiA9IHRoaXMsIHIgPSBuLmlkLCBpID0gbi5zY2hlZHVsZXIsIG8gPSBpLmFjdGlvbnM7XG4gICAgICB0aGlzLndvcmsgPSB0aGlzLnN0YXRlID0gdGhpcy5zY2hlZHVsZXIgPSBudWxsLCB0aGlzLnBlbmRpbmcgPSAhMSwgQihvLCB0aGlzKSwgciAhPSBudWxsICYmICh0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChpLCByLCBudWxsKSksIHRoaXMuZGVsYXkgPSBudWxsLCBlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSwgdDtcbn0oZG4pLCBLZSA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQsIG4pIHtcbiAgICBuID09PSB2b2lkIDAgJiYgKG4gPSBlLm5vdyksIHRoaXMuc2NoZWR1bGVyQWN0aW9uQ3RvciA9IHQsIHRoaXMubm93ID0gbjtcbiAgfVxuICByZXR1cm4gZS5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbih0LCBuLCByKSB7XG4gICAgcmV0dXJuIG4gPT09IHZvaWQgMCAmJiAobiA9IDApLCBuZXcgdGhpcy5zY2hlZHVsZXJBY3Rpb25DdG9yKHRoaXMsIHQpLnNjaGVkdWxlKHIsIG4pO1xuICB9LCBlLm5vdyA9IHdlLm5vdywgZTtcbn0oKSwgaG4gPSBmdW5jdGlvbihlKSB7XG4gIHgodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgcikge1xuICAgIHIgPT09IHZvaWQgMCAmJiAociA9IEtlLm5vdyk7XG4gICAgdmFyIGkgPSBlLmNhbGwodGhpcywgbiwgcikgfHwgdGhpcztcbiAgICByZXR1cm4gaS5hY3Rpb25zID0gW10sIGkuX2FjdGl2ZSA9ICExLCBpLl9zY2hlZHVsZWQgPSB2b2lkIDAsIGk7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcy5hY3Rpb25zO1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIHIucHVzaChuKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGk7XG4gICAgdGhpcy5fYWN0aXZlID0gITA7XG4gICAgZG9cbiAgICAgIGlmIChpID0gbi5leGVjdXRlKG4uc3RhdGUsIG4uZGVsYXkpKVxuICAgICAgICBicmVhaztcbiAgICB3aGlsZSAobiA9IHIuc2hpZnQoKSk7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSA9ICExLCBpKSB7XG4gICAgICBmb3IgKDsgbiA9IHIuc2hpZnQoKTsgKVxuICAgICAgICBuLnVuc3Vic2NyaWJlKCk7XG4gICAgICB0aHJvdyBpO1xuICAgIH1cbiAgfSwgdDtcbn0oS2UpLCBfZSA9IG5ldyBobih2biksIHBuID0gX2UsIFNlID0gbmV3IHkoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZS5jb21wbGV0ZSgpO1xufSk7XG5mdW5jdGlvbiBtbihlKSB7XG4gIHJldHVybiBlID8gYm4oZSkgOiBTZTtcbn1cbmZ1bmN0aW9uIGJuKGUpIHtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gZS5zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0LmNvbXBsZXRlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gemUoZSkge1xuICByZXR1cm4gZSAmJiBiKGUuc2NoZWR1bGUpO1xufVxuZnVuY3Rpb24gWmUoZSkge1xuICByZXR1cm4gZVtlLmxlbmd0aCAtIDFdO1xufVxuZnVuY3Rpb24gQ2UoZSkge1xuICByZXR1cm4gemUoWmUoZSkpID8gZS5wb3AoKSA6IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIHluKGUsIHQpIHtcbiAgcmV0dXJuIHR5cGVvZiBaZShlKSA9PSBcIm51bWJlclwiID8gZS5wb3AoKSA6IHQ7XG59XG52YXIgQmUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlICYmIHR5cGVvZiBlLmxlbmd0aCA9PSBcIm51bWJlclwiICYmIHR5cGVvZiBlICE9IFwiZnVuY3Rpb25cIjtcbn07XG5mdW5jdGlvbiBYZShlKSB7XG4gIHJldHVybiBiKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudGhlbik7XG59XG5mdW5jdGlvbiBldChlKSB7XG4gIHJldHVybiBiKGVbZ2VdKTtcbn1cbmZ1bmN0aW9uIHR0KGUpIHtcbiAgcmV0dXJuIFN5bWJvbC5hc3luY0l0ZXJhdG9yICYmIGIoZSA9PSBudWxsID8gdm9pZCAwIDogZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufVxuZnVuY3Rpb24gbnQoZSkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBwcm92aWRlZCBcIiArIChlICE9PSBudWxsICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgPyBcImFuIGludmFsaWQgb2JqZWN0XCIgOiBcIidcIiArIGUgKyBcIidcIikgKyBcIiB3aGVyZSBhIHN0cmVhbSB3YXMgZXhwZWN0ZWQuIFlvdSBjYW4gcHJvdmlkZSBhbiBPYnNlcnZhYmxlLCBQcm9taXNlLCBSZWFkYWJsZVN0cmVhbSwgQXJyYXksIEFzeW5jSXRlcmFibGUsIG9yIEl0ZXJhYmxlLlwiKTtcbn1cbmZ1bmN0aW9uIGduKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCAhPSBcImZ1bmN0aW9uXCIgfHwgIVN5bWJvbC5pdGVyYXRvciA/IFwiQEBpdGVyYXRvclwiIDogU3ltYm9sLml0ZXJhdG9yO1xufVxudmFyIHJ0ID0gZ24oKTtcbmZ1bmN0aW9uIGl0KGUpIHtcbiAgcmV0dXJuIGIoZSA9PSBudWxsID8gdm9pZCAwIDogZVtydF0pO1xufVxuZnVuY3Rpb24gb3QoZSkge1xuICByZXR1cm4gQnQodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiwgciwgaSwgbztcbiAgICByZXR1cm4gSGUodGhpcywgZnVuY3Rpb24odSkge1xuICAgICAgc3dpdGNoICh1LmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBuID0gZS5nZXRSZWFkZXIoKSwgdS5sYWJlbCA9IDE7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICB1LnRyeXMucHVzaChbMSwgLCA5LCAxMF0pLCB1LmxhYmVsID0gMjtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiBbNCwgVShuLnJlYWQoKSldO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuIHIgPSB1LnNlbnQoKSwgaSA9IHIudmFsdWUsIG8gPSByLmRvbmUsIG8gPyBbNCwgVSh2b2lkIDApXSA6IFszLCA1XTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBbMiwgdS5zZW50KCldO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuIFs0LCBVKGkpXTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBbNCwgdS5zZW50KCldO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgcmV0dXJuIHUuc2VudCgpLCBbMywgMl07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIHJldHVybiBuLnJlbGVhc2VMb2NrKCksIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHV0KGUpIHtcbiAgcmV0dXJuIGIoZSA9PSBudWxsID8gdm9pZCAwIDogZS5nZXRSZWFkZXIpO1xufVxuZnVuY3Rpb24gSShlKSB7XG4gIGlmIChlIGluc3RhbmNlb2YgeSlcbiAgICByZXR1cm4gZTtcbiAgaWYgKGUgIT0gbnVsbCkge1xuICAgIGlmIChldChlKSlcbiAgICAgIHJldHVybiB3bihlKTtcbiAgICBpZiAoQmUoZSkpXG4gICAgICByZXR1cm4gX24oZSk7XG4gICAgaWYgKFhlKGUpKVxuICAgICAgcmV0dXJuIFNuKGUpO1xuICAgIGlmICh0dChlKSlcbiAgICAgIHJldHVybiBhdChlKTtcbiAgICBpZiAoaXQoZSkpXG4gICAgICByZXR1cm4gQ24oZSk7XG4gICAgaWYgKHV0KGUpKVxuICAgICAgcmV0dXJuIEVuKGUpO1xuICB9XG4gIHRocm93IG50KGUpO1xufVxuZnVuY3Rpb24gd24oZSkge1xuICByZXR1cm4gbmV3IHkoZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gZVtnZV0oKTtcbiAgICBpZiAoYihuLnN1YnNjcmliZSkpXG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUodCk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3ZpZGVkIG9iamVjdCBkb2VzIG5vdCBjb3JyZWN0bHkgaW1wbGVtZW50IFN5bWJvbC5vYnNlcnZhYmxlXCIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIF9uKGUpIHtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoICYmICF0LmNsb3NlZDsgbisrKVxuICAgICAgdC5uZXh0KGVbbl0pO1xuICAgIHQuY29tcGxldGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBTbihlKSB7XG4gIHJldHVybiBuZXcgeShmdW5jdGlvbih0KSB7XG4gICAgZS50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICAgIHQuY2xvc2VkIHx8ICh0Lm5leHQobiksIHQuY29tcGxldGUoKSk7XG4gICAgfSwgZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIHQuZXJyb3Iobik7XG4gICAgfSkudGhlbihudWxsLCBKZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gQ24oZSkge1xuICByZXR1cm4gbmV3IHkoZnVuY3Rpb24odCkge1xuICAgIHZhciBuLCByO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpID0gVihlKSwgbyA9IGkubmV4dCgpOyAhby5kb25lOyBvID0gaS5uZXh0KCkpIHtcbiAgICAgICAgdmFyIHUgPSBvLnZhbHVlO1xuICAgICAgICBpZiAodC5uZXh0KHUpLCB0LmNsb3NlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBjYXRjaCAoYSkge1xuICAgICAgbiA9IHsgZXJyb3I6IGEgfTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbyAmJiAhby5kb25lICYmIChyID0gaS5yZXR1cm4pICYmIHIuY2FsbChpKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChuKVxuICAgICAgICAgIHRocm93IG4uZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHQuY29tcGxldGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhdChlKSB7XG4gIHJldHVybiBuZXcgeShmdW5jdGlvbih0KSB7XG4gICAgeG4oZSwgdCkuY2F0Y2goZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIHQuZXJyb3Iobik7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gRW4oZSkge1xuICByZXR1cm4gYXQob3QoZSkpO1xufVxuZnVuY3Rpb24geG4oZSwgdCkge1xuICB2YXIgbiwgciwgaSwgbztcbiAgcmV0dXJuIHBlKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSwgYTtcbiAgICByZXR1cm4gSGUodGhpcywgZnVuY3Rpb24ocykge1xuICAgICAgc3dpdGNoIChzLmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBzLnRyeXMucHVzaChbMCwgNSwgNiwgMTFdKSwgbiA9IFh0KGUpLCBzLmxhYmVsID0gMTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiBbNCwgbi5uZXh0KCldO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaWYgKHIgPSBzLnNlbnQoKSwgISFyLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgIGlmICh1ID0gci52YWx1ZSwgdC5uZXh0KHUpLCB0LmNsb3NlZClcbiAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgcy5sYWJlbCA9IDM7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gWzMsIDFdO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIFszLCAxMV07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gYSA9IHMuc2VudCgpLCBpID0geyBlcnJvcjogYSB9LCBbMywgMTFdO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuIHMudHJ5cy5wdXNoKFs2LCAsIDksIDEwXSksIHIgJiYgIXIuZG9uZSAmJiAobyA9IG4ucmV0dXJuKSA/IFs0LCBvLmNhbGwobildIDogWzMsIDhdO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgcy5zZW50KCksIHMubGFiZWwgPSA4O1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgcmV0dXJuIFszLCAxMF07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBpZiAoaSlcbiAgICAgICAgICAgIHRocm93IGkuZXJyb3I7XG4gICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzddO1xuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgIHJldHVybiB0LmNvbXBsZXRlKCksIFsyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBQKGUsIHQsIG4sIHIsIGkpIHtcbiAgciA9PT0gdm9pZCAwICYmIChyID0gMCksIGkgPT09IHZvaWQgMCAmJiAoaSA9ICExKTtcbiAgdmFyIG8gPSB0LnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgIG4oKSwgaSA/IGUuYWRkKHRoaXMuc2NoZWR1bGUobnVsbCwgcikpIDogdGhpcy51bnN1YnNjcmliZSgpO1xuICB9LCByKTtcbiAgaWYgKGUuYWRkKG8pLCAhaSlcbiAgICByZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHN0KGUsIHQpIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9IDApLCBfKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBuLnN1YnNjcmliZSh3KHIsIGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiBQKHIsIGUsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gci5uZXh0KGkpO1xuICAgICAgfSwgdCk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUChyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuY29tcGxldGUoKTtcbiAgICAgIH0sIHQpO1xuICAgIH0sIGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiBQKHIsIGUsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gci5lcnJvcihpKTtcbiAgICAgIH0sIHQpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBjdChlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgXyhmdW5jdGlvbihuLCByKSB7XG4gICAgci5hZGQoZS5zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuLnN1YnNjcmliZShyKTtcbiAgICB9LCB0KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gSW4oZSwgdCkge1xuICByZXR1cm4gSShlKS5waXBlKGN0KHQpLCBzdCh0KSk7XG59XG5mdW5jdGlvbiBPbihlLCB0KSB7XG4gIHJldHVybiBJKGUpLnBpcGUoY3QodCksIHN0KHQpKTtcbn1cbmZ1bmN0aW9uIGtuKGUsIHQpIHtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IDA7XG4gICAgcmV0dXJuIHQuc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICByID09PSBlLmxlbmd0aCA/IG4uY29tcGxldGUoKSA6IChuLm5leHQoZVtyKytdKSwgbi5jbG9zZWQgfHwgdGhpcy5zY2hlZHVsZSgpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBBbihlLCB0KSB7XG4gIHJldHVybiBuZXcgeShmdW5jdGlvbihuKSB7XG4gICAgdmFyIHI7XG4gICAgcmV0dXJuIFAobiwgdCwgZnVuY3Rpb24oKSB7XG4gICAgICByID0gZVtydF0oKSwgUChuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIG8sIHU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaSA9IHIubmV4dCgpLCBvID0gaS52YWx1ZSwgdSA9IGkuZG9uZTtcbiAgICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICAgIG4uZXJyb3IoYSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHUgPyBuLmNvbXBsZXRlKCkgOiBuLm5leHQobyk7XG4gICAgICB9LCAwLCAhMCk7XG4gICAgfSksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGIociA9PSBudWxsID8gdm9pZCAwIDogci5yZXR1cm4pICYmIHIucmV0dXJuKCk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBsdChlLCB0KSB7XG4gIGlmICghZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbFwiKTtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKG4pIHtcbiAgICBQKG4sIHQsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHIgPSBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgICAgUChuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgci5uZXh0KCkudGhlbihmdW5jdGlvbihpKSB7XG4gICAgICAgICAgaS5kb25lID8gbi5jb21wbGV0ZSgpIDogbi5uZXh0KGkudmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDAsICEwKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBGbihlLCB0KSB7XG4gIHJldHVybiBsdChvdChlKSwgdCk7XG59XG5mdW5jdGlvbiBQbihlLCB0KSB7XG4gIGlmIChlICE9IG51bGwpIHtcbiAgICBpZiAoZXQoZSkpXG4gICAgICByZXR1cm4gSW4oZSwgdCk7XG4gICAgaWYgKEJlKGUpKVxuICAgICAgcmV0dXJuIGtuKGUsIHQpO1xuICAgIGlmIChYZShlKSlcbiAgICAgIHJldHVybiBPbihlLCB0KTtcbiAgICBpZiAodHQoZSkpXG4gICAgICByZXR1cm4gbHQoZSwgdCk7XG4gICAgaWYgKGl0KGUpKVxuICAgICAgcmV0dXJuIEFuKGUsIHQpO1xuICAgIGlmICh1dChlKSlcbiAgICAgIHJldHVybiBGbihlLCB0KTtcbiAgfVxuICB0aHJvdyBudChlKTtcbn1cbmZ1bmN0aW9uIE8oZSwgdCkge1xuICByZXR1cm4gdCA/IFBuKGUsIHQpIDogSShlKTtcbn1cbmZ1bmN0aW9uIGVlKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0gQ2UoZSk7XG4gIHJldHVybiBPKGUsIG4pO1xufVxudmFyIGZ0ID0gbWUoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5uYW1lID0gXCJFbXB0eUVycm9yXCIsIHRoaXMubWVzc2FnZSA9IFwibm8gZWxlbWVudHMgaW4gc2VxdWVuY2VcIjtcbiAgfTtcbn0pO1xuZnVuY3Rpb24gJG4oZSkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKGUpO1xufVxuZnVuY3Rpb24gQyhlLCB0KSB7XG4gIHJldHVybiBfKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgbi5zdWJzY3JpYmUodyhyLCBmdW5jdGlvbihvKSB7XG4gICAgICByLm5leHQoZS5jYWxsKHQsIG8sIGkrKykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBUbihlLCB0LCBuLCByLCBpLCBvLCB1LCBhKSB7XG4gIHZhciBzID0gW10sIGMgPSAwLCBsID0gMCwgZCA9ICExLCB2ID0gZnVuY3Rpb24oKSB7XG4gICAgZCAmJiAhcy5sZW5ndGggJiYgIWMgJiYgdC5jb21wbGV0ZSgpO1xuICB9LCBwID0gZnVuY3Rpb24oaCkge1xuICAgIHJldHVybiBjIDwgciA/IFMoaCkgOiBzLnB1c2goaCk7XG4gIH0sIFMgPSBmdW5jdGlvbihoKSB7XG4gICAgbyAmJiB0Lm5leHQoaCksIGMrKztcbiAgICB2YXIgJCA9ICExO1xuICAgIEkobihoLCBsKyspKS5zdWJzY3JpYmUodyh0LCBmdW5jdGlvbihFKSB7XG4gICAgICBpID09IG51bGwgfHwgaShFKSwgbyA/IHAoRSkgOiB0Lm5leHQoRSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAkID0gITA7XG4gICAgfSwgdm9pZCAwLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgkKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGMtLTtcbiAgICAgICAgICBmb3IgKHZhciBFID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaiA9IHMuc2hpZnQoKTtcbiAgICAgICAgICAgIHUgPyBQKHQsIHUsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gUyhqKTtcbiAgICAgICAgICAgIH0pIDogUyhqKTtcbiAgICAgICAgICB9OyBzLmxlbmd0aCAmJiBjIDwgcjsgKVxuICAgICAgICAgICAgRSgpO1xuICAgICAgICAgIHYoKTtcbiAgICAgICAgfSBjYXRjaCAoaikge1xuICAgICAgICAgIHQuZXJyb3Ioaik7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiBlLnN1YnNjcmliZSh3KHQsIHAsIGZ1bmN0aW9uKCkge1xuICAgIGQgPSAhMCwgdigpO1xuICB9KSksIGZ1bmN0aW9uKCkge1xuICAgIGEgPT0gbnVsbCB8fCBhKCk7XG4gIH07XG59XG5mdW5jdGlvbiBFZShlLCB0LCBuKSB7XG4gIHJldHVybiBuID09PSB2b2lkIDAgJiYgKG4gPSAxIC8gMCksIGIodCkgPyBFZShmdW5jdGlvbihyLCBpKSB7XG4gICAgcmV0dXJuIEMoZnVuY3Rpb24obywgdSkge1xuICAgICAgcmV0dXJuIHQociwgbywgaSwgdSk7XG4gICAgfSkoSShlKHIsIGkpKSk7XG4gIH0sIG4pIDogKHR5cGVvZiB0ID09IFwibnVtYmVyXCIgJiYgKG4gPSB0KSwgXyhmdW5jdGlvbihyLCBpKSB7XG4gICAgcmV0dXJuIFRuKHIsIGksIGUsIG4pO1xuICB9KSk7XG59XG5mdW5jdGlvbiBkdChlKSB7XG4gIHJldHVybiBlID09PSB2b2lkIDAgJiYgKGUgPSAxIC8gMCksIEVlKFcsIGUpO1xufVxuZnVuY3Rpb24gRG4oKSB7XG4gIHJldHVybiBkdCgxKTtcbn1cbmZ1bmN0aW9uIFJuKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHJldHVybiBEbigpKE8oZSwgQ2UoZSkpKTtcbn1cbmZ1bmN0aW9uIGpuKGUsIHQsIG4pIHtcbiAgZSA9PT0gdm9pZCAwICYmIChlID0gMCksIG4gPT09IHZvaWQgMCAmJiAobiA9IHBuKTtcbiAgdmFyIHIgPSAtMTtcbiAgcmV0dXJuIHQgIT0gbnVsbCAmJiAoemUodCkgPyBuID0gdCA6IHIgPSB0KSwgbmV3IHkoZnVuY3Rpb24oaSkge1xuICAgIHZhciBvID0gJG4oZSkgPyArZSAtIG4ubm93KCkgOiBlO1xuICAgIG8gPCAwICYmIChvID0gMCk7XG4gICAgdmFyIHUgPSAwO1xuICAgIHJldHVybiBuLnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgaS5jbG9zZWQgfHwgKGkubmV4dCh1KyspLCAwIDw9IHIgPyB0aGlzLnNjaGVkdWxlKHZvaWQgMCwgcikgOiBpLmNvbXBsZXRlKCkpO1xuICAgIH0sIG8pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFVuKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0gQ2UoZSksIHIgPSB5bihlLCAxIC8gMCksIGkgPSBlO1xuICByZXR1cm4gaS5sZW5ndGggPyBpLmxlbmd0aCA9PT0gMSA/IEkoaVswXSkgOiBkdChyKShPKGksIG4pKSA6IFNlO1xufVxuZnVuY3Rpb24gVm4oZSwgdCkge1xuICByZXR1cm4gXyhmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIG4uc3Vic2NyaWJlKHcociwgZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIGUuY2FsbCh0LCBvLCBpKyspICYmIHIubmV4dChvKTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdnQoZSkge1xuICByZXR1cm4gXyhmdW5jdGlvbih0LCBuKSB7XG4gICAgdmFyIHIgPSBudWxsLCBpID0gITEsIG87XG4gICAgciA9IHQuc3Vic2NyaWJlKHcobiwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKHUpIHtcbiAgICAgIG8gPSBJKGUodSwgdnQoZSkodCkpKSwgciA/IChyLnVuc3Vic2NyaWJlKCksIHIgPSBudWxsLCBvLnN1YnNjcmliZShuKSkgOiBpID0gITA7XG4gICAgfSkpLCBpICYmIChyLnVuc3Vic2NyaWJlKCksIHIgPSBudWxsLCBvLnN1YnNjcmliZShuKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gTW4oZSwgdCwgbiwgciwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24obywgdSkge1xuICAgIHZhciBhID0gbiwgcyA9IHQsIGMgPSAwO1xuICAgIG8uc3Vic2NyaWJlKHcodSwgZnVuY3Rpb24obCkge1xuICAgICAgdmFyIGQgPSBjKys7XG4gICAgICBzID0gYSA/IGUocywgbCwgZCkgOiAoYSA9ICEwLCBsKSwgciAmJiB1Lm5leHQocyk7XG4gICAgfSwgaSAmJiBmdW5jdGlvbigpIHtcbiAgICAgIGEgJiYgdS5uZXh0KHMpLCB1LmNvbXBsZXRlKCk7XG4gICAgfSkpO1xuICB9O1xufVxuZnVuY3Rpb24gTG4oZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gX2UpLCBfKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IG51bGwsIG8gPSBudWxsLCB1ID0gbnVsbCwgYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGkpIHtcbiAgICAgICAgaS51bnN1YnNjcmliZSgpLCBpID0gbnVsbDtcbiAgICAgICAgdmFyIGMgPSBvO1xuICAgICAgICBvID0gbnVsbCwgci5uZXh0KGMpO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gcygpIHtcbiAgICAgIHZhciBjID0gdSArIGUsIGwgPSB0Lm5vdygpO1xuICAgICAgaWYgKGwgPCBjKSB7XG4gICAgICAgIGkgPSB0aGlzLnNjaGVkdWxlKHZvaWQgMCwgYyAtIGwpLCByLmFkZChpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYSgpO1xuICAgIH1cbiAgICBuLnN1YnNjcmliZSh3KHIsIGZ1bmN0aW9uKGMpIHtcbiAgICAgIG8gPSBjLCB1ID0gdC5ub3coKSwgaSB8fCAoaSA9IHQuc2NoZWR1bGUocywgZSksIHIuYWRkKGkpKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIGEoKSwgci5jb21wbGV0ZSgpO1xuICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICBvID0gaSA9IG51bGw7XG4gICAgfSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIE5uKGUpIHtcbiAgcmV0dXJuIF8oZnVuY3Rpb24odCwgbikge1xuICAgIHZhciByID0gITE7XG4gICAgdC5zdWJzY3JpYmUodyhuLCBmdW5jdGlvbihpKSB7XG4gICAgICByID0gITAsIG4ubmV4dChpKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHIgfHwgbi5uZXh0KGUpLCBuLmNvbXBsZXRlKCk7XG4gICAgfSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlKGUpIHtcbiAgcmV0dXJuIGUgPD0gMCA/IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBTZTtcbiAgfSA6IF8oZnVuY3Rpb24odCwgbikge1xuICAgIHZhciByID0gMDtcbiAgICB0LnN1YnNjcmliZSh3KG4sIGZ1bmN0aW9uKGkpIHtcbiAgICAgICsrciA8PSBlICYmIChuLm5leHQoaSksIGUgPD0gciAmJiBuLmNvbXBsZXRlKCkpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBXbigpIHtcbiAgcmV0dXJuIF8oZnVuY3Rpb24oZSwgdCkge1xuICAgIGUuc3Vic2NyaWJlKHcodCwgZmUpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBxbihlKSB7XG4gIHJldHVybiBDKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGh0KGUsIHQpIHtcbiAgcmV0dXJuIHQgPyBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIFJuKHQucGlwZShkZSgxKSwgV24oKSksIG4ucGlwZShodChlKSkpO1xuICB9IDogRWUoZnVuY3Rpb24obiwgcikge1xuICAgIHJldHVybiBlKG4sIHIpLnBpcGUoZGUoMSksIHFuKG4pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBRbihlLCB0KSB7XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IF9lKTtcbiAgdmFyIG4gPSBqbihlLCB0KTtcbiAgcmV0dXJuIGh0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuO1xuICB9KTtcbn1cbmZ1bmN0aW9uIEtuKGUsIHQpIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9IFcpLCBlID0gZSAhPSBudWxsID8gZSA6IEhuLCBfKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSwgbyA9ICEwO1xuICAgIG4uc3Vic2NyaWJlKHcociwgZnVuY3Rpb24odSkge1xuICAgICAgdmFyIGEgPSB0KHUpO1xuICAgICAgKG8gfHwgIWUoaSwgYSkpICYmIChvID0gITEsIGkgPSBhLCByLm5leHQodSkpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBIbihlLCB0KSB7XG4gIHJldHVybiBlID09PSB0O1xufVxuZnVuY3Rpb24gWW4oZSkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwICYmIChlID0gR24pLCBfKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICB2YXIgciA9ICExO1xuICAgIHQuc3Vic2NyaWJlKHcobiwgZnVuY3Rpb24oaSkge1xuICAgICAgciA9ICEwLCBuLm5leHQoaSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gciA/IG4uY29tcGxldGUoKSA6IG4uZXJyb3IoZSgpKTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gR24oKSB7XG4gIHJldHVybiBuZXcgZnQoKTtcbn1cbmZ1bmN0aW9uIHB0KGUsIHQpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoID49IDI7XG4gIHJldHVybiBmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHIucGlwZShlID8gVm4oZnVuY3Rpb24oaSwgbykge1xuICAgICAgcmV0dXJuIGUoaSwgbywgcik7XG4gICAgfSkgOiBXLCBkZSgxKSwgbiA/IE5uKHQpIDogWW4oZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IGZ0KCk7XG4gICAgfSkpO1xuICB9O1xufVxuZnVuY3Rpb24gSm4oZSwgdCkge1xuICByZXR1cm4gXyhNbihlLCB0LCBhcmd1bWVudHMubGVuZ3RoID49IDIsICEwKSk7XG59XG5mdW5jdGlvbiB6bihlKSB7XG4gIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KTtcbiAgdmFyIHQgPSBlLmNvbm5lY3RvciwgbiA9IHQgPT09IHZvaWQgMCA/IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgbmUoKTtcbiAgfSA6IHQsIHIgPSBlLnJlc2V0T25FcnJvciwgaSA9IHIgPT09IHZvaWQgMCA/ICEwIDogciwgbyA9IGUucmVzZXRPbkNvbXBsZXRlLCB1ID0gbyA9PT0gdm9pZCAwID8gITAgOiBvLCBhID0gZS5yZXNldE9uUmVmQ291bnRaZXJvLCBzID0gYSA9PT0gdm9pZCAwID8gITAgOiBhO1xuICByZXR1cm4gZnVuY3Rpb24oYykge1xuICAgIHZhciBsLCBkLCB2LCBwID0gMCwgUyA9ICExLCBoID0gITEsICQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGQgPT0gbnVsbCB8fCBkLnVuc3Vic2NyaWJlKCksIGQgPSB2b2lkIDA7XG4gICAgfSwgRSA9IGZ1bmN0aW9uKCkge1xuICAgICAgJCgpLCBsID0gdiA9IHZvaWQgMCwgUyA9IGggPSAhMTtcbiAgICB9LCBqID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgTSA9IGw7XG4gICAgICBFKCksIE0gPT0gbnVsbCB8fCBNLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gXyhmdW5jdGlvbihNLCBMZSkge1xuICAgICAgcCsrLCAhaCAmJiAhUyAmJiAkKCk7XG4gICAgICB2YXIgSCA9IHYgPSB2ICE9IG51bGwgPyB2IDogbigpO1xuICAgICAgTGUuYWRkKGZ1bmN0aW9uKCkge1xuICAgICAgICBwLS0sIHAgPT09IDAgJiYgIWggJiYgIVMgJiYgKGQgPSBhZShqLCBzKSk7XG4gICAgICB9KSwgSC5zdWJzY3JpYmUoTGUpLCAhbCAmJiBwID4gMCAmJiAobCA9IG5ldyBMKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24oWSkge1xuICAgICAgICAgIHJldHVybiBILm5leHQoWSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihZKSB7XG4gICAgICAgICAgaCA9ICEwLCAkKCksIGQgPSBhZShFLCBpLCBZKSwgSC5lcnJvcihZKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIFMgPSAhMCwgJCgpLCBkID0gYWUoRSwgdSksIEguY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSksIEkoTSkuc3Vic2NyaWJlKGwpKTtcbiAgICB9KShjKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGFlKGUsIHQpIHtcbiAgZm9yICh2YXIgbiA9IFtdLCByID0gMjsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKylcbiAgICBuW3IgLSAyXSA9IGFyZ3VtZW50c1tyXTtcbiAgaWYgKHQgPT09ICEwKSB7XG4gICAgZSgpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodCAhPT0gITEpIHtcbiAgICB2YXIgaSA9IG5ldyBMKHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpLnVuc3Vic2NyaWJlKCksIGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdC5hcHBseSh2b2lkIDAsIFIoW10sIEQobikpKS5zdWJzY3JpYmUoaSk7XG4gIH1cbn1cbmZ1bmN0aW9uIFpuKGUsIHQsIG4pIHtcbiAgdmFyIHIsIGksIG8sIHUsIGEgPSAhMTtcbiAgcmV0dXJuIGUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiA/IChyID0gZS5idWZmZXJTaXplLCB1ID0gciA9PT0gdm9pZCAwID8gMSAvIDAgOiByLCBpID0gZS53aW5kb3dUaW1lLCB0ID0gaSA9PT0gdm9pZCAwID8gMSAvIDAgOiBpLCBvID0gZS5yZWZDb3VudCwgYSA9IG8gPT09IHZvaWQgMCA/ICExIDogbywgbiA9IGUuc2NoZWR1bGVyKSA6IHUgPSBlICE9IG51bGwgPyBlIDogMSAvIDAsIHpuKHtcbiAgICBjb25uZWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBmbih1LCB0LCBuKTtcbiAgICB9LFxuICAgIHJlc2V0T25FcnJvcjogITAsXG4gICAgcmVzZXRPbkNvbXBsZXRlOiAhMSxcbiAgICByZXNldE9uUmVmQ291bnRaZXJvOiBhXG4gIH0pO1xufVxuZnVuY3Rpb24gbXQoZSwgdCkge1xuICByZXR1cm4gXyhmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGkgPSBudWxsLCBvID0gMCwgdSA9ICExLCBhID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdSAmJiAhaSAmJiByLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBuLnN1YnNjcmliZSh3KHIsIGZ1bmN0aW9uKHMpIHtcbiAgICAgIGkgPT0gbnVsbCB8fCBpLnVuc3Vic2NyaWJlKCk7XG4gICAgICB2YXIgYyA9IDAsIGwgPSBvKys7XG4gICAgICBJKGUocywgbCkpLnN1YnNjcmliZShpID0gdyhyLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiByLm5leHQodCA/IHQocywgZCwgbCwgYysrKSA6IGQpO1xuICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGkgPSBudWxsLCBhKCk7XG4gICAgICB9KSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICB1ID0gITAsIGEoKTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gQm4oZSwgdCwgbikge1xuICB2YXIgciA9IGIoZSkgfHwgdCB8fCBuID8geyBuZXh0OiBlLCBlcnJvcjogdCwgY29tcGxldGU6IG4gfSA6IGU7XG4gIHJldHVybiByID8gXyhmdW5jdGlvbihpLCBvKSB7XG4gICAgdmFyIHU7XG4gICAgKHUgPSByLnN1YnNjcmliZSkgPT09IG51bGwgfHwgdSA9PT0gdm9pZCAwIHx8IHUuY2FsbChyKTtcbiAgICB2YXIgYSA9ICEwO1xuICAgIGkuc3Vic2NyaWJlKHcobywgZnVuY3Rpb24ocykge1xuICAgICAgdmFyIGM7XG4gICAgICAoYyA9IHIubmV4dCkgPT09IG51bGwgfHwgYyA9PT0gdm9pZCAwIHx8IGMuY2FsbChyLCBzKSwgby5uZXh0KHMpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHM7XG4gICAgICBhID0gITEsIChzID0gci5jb21wbGV0ZSkgPT09IG51bGwgfHwgcyA9PT0gdm9pZCAwIHx8IHMuY2FsbChyKSwgby5jb21wbGV0ZSgpO1xuICAgIH0sIGZ1bmN0aW9uKHMpIHtcbiAgICAgIHZhciBjO1xuICAgICAgYSA9ICExLCAoYyA9IHIuZXJyb3IpID09PSBudWxsIHx8IGMgPT09IHZvaWQgMCB8fCBjLmNhbGwociwgcyksIG8uZXJyb3Iocyk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcywgYztcbiAgICAgIGEgJiYgKChzID0gci51bnN1YnNjcmliZSkgPT09IG51bGwgfHwgcyA9PT0gdm9pZCAwIHx8IHMuY2FsbChyKSksIChjID0gci5maW5hbGl6ZSkgPT09IG51bGwgfHwgYyA9PT0gdm9pZCAwIHx8IGMuY2FsbChyKTtcbiAgICB9KSk7XG4gIH0pIDogVztcbn1cbmZ1bmN0aW9uIHhlKGUpIHtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IEZ0KGUsIHQubmV4dC5iaW5kKHQpLCB0LmVycm9yLmJpbmQodCksIHQuY29tcGxldGUuYmluZCh0KSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmU6IG4gfTtcbiAgfSk7XG59XG5jb25zdCBYbiA9IFwiW0RFRkFVTFRdXCIsIGJ0ID0gZi5jcmVhdGVDb250ZXh0KHZvaWQgMCksIEllID0gZi5jcmVhdGVDb250ZXh0KCExKSwgZXIgPSBcIjQuMi4zXCIsIHRyID0gKGUsIHQpID0+IGUgPT09IHQgfHwgWy4uLk9iamVjdC5rZXlzKGUpLCAuLi5PYmplY3Qua2V5cyh0KV0uZXZlcnkoKG4pID0+IGVbbl0gPT09IHRbbl0pO1xuZnVuY3Rpb24gTHIoZSkge1xuICBjb25zdCB7XG4gICAgZmlyZWJhc2VDb25maWc6IHQsXG4gICAgYXBwTmFtZTogbixcbiAgICBzdXNwZW5zZTogclxuICB9ID0gZSwgaSA9IGYudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGUuZmlyZWJhc2VBcHApXG4gICAgICByZXR1cm4gZS5maXJlYmFzZUFwcDtcbiAgICBjb25zdCBvID0gVnQoKS5maW5kKCh1KSA9PiB1Lm5hbWUgPT09IChuIHx8IFhuKSk7XG4gICAgaWYgKG8pIHtcbiAgICAgIGlmICh0ICYmIHRyKG8ub3B0aW9ucywgdCkpXG4gICAgICAgIHJldHVybiBvO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2VzIG5vdCBtYXRjaCB0aGUgb3B0aW9ucyBhbHJlYWR5IHByb3ZpZGVkIHRvIHRoZSAke24gfHwgXCJkZWZhdWx0XCJ9IGZpcmViYXNlIGFwcCBpbnN0YW5jZSwgZ2l2ZSB0aGlzIG5ldyBpbnN0YW5jZSBhIGRpZmZlcmVudCBhcHBOYW1lLmApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGZpcmViYXNlQ29uZmlnIHByb3ZpZGVkXCIpO1xuICAgICAgY29uc3QgdSA9IGYudmVyc2lvbiB8fCBcInVua25vd25cIjtcbiAgICAgIHJldHVybiBOZShcInJlYWN0XCIsIHUpLCBOZShcInJlYWN0ZmlyZVwiLCBlciksIE10KHQsIG4pO1xuICAgIH1cbiAgfSwgW2UuZmlyZWJhc2VBcHAsIHQsIG5dKTtcbiAgcmV0dXJuIGYuY3JlYXRlRWxlbWVudChidC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBpXG4gIH0sIGYuY3JlYXRlRWxlbWVudChJZS5Qcm92aWRlciwgT2JqZWN0LmFzc2lnbih7XG4gICAgdmFsdWU6IHIgIT0gbnVsbCA/IHIgOiAhMVxuICB9LCBlKSkpO1xufVxuZnVuY3Rpb24gTnIoKSB7XG4gIGNvbnN0IGUgPSBmLnVzZUNvbnRleHQoSWUpO1xuICByZXR1cm4gZSAhPSBudWxsID8gZSA6ICExO1xufVxuZnVuY3Rpb24gcmUoZSkge1xuICBsZXQgdCA9IGYudXNlQ29udGV4dChJZSk7XG4gIHJldHVybiBlICE9PSB2b2lkIDAgPyBlIDogdDtcbn1cbmZ1bmN0aW9uIHl0KCkge1xuICBjb25zdCBlID0gZi51c2VDb250ZXh0KGJ0KTtcbiAgaWYgKCFlKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjYWxsIHVzZUZpcmViYXNlQXBwIHVubGVzcyB5b3VyIGNvbXBvbmVudCBpcyB3aXRoaW4gYSBGaXJlYmFzZUFwcFByb3ZpZGVyXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIFdyKGUpIHtcbiAgcmV0dXJuIHBlKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHQgPSB5aWVsZCBlKCk7XG4gICAgcmV0dXJuIEFlKHhlKHQpLCBgYXV0aDp1c2VyOiR7dC5uYW1lfWApLnRvUHJvbWlzZSgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIG5yKGUpIHtcbiAgY29uc3QgdCA9IGt0KCksIG4gPSBgYXV0aDp1c2VyOiR7dC5uYW1lfWAsIHIgPSB4ZSh0KTtcbiAgcmV0dXJuIGcobiwgciwgZSk7XG59XG5mdW5jdGlvbiBycihlLCB0ID0gITEsIG4pIHtcbiAgaWYgKCFlKVxuICAgIHRocm93IG5ldyBFcnJvcihcInlvdSBtdXN0IHByb3ZpZGUgYSB1c2VyXCIpO1xuICBjb25zdCByID0gYGF1dGg6aWRUb2tlblJlc3VsdDoke2UudWlkfTpmb3JjZVJlZnJlc2g9JHt0fWAsIGkgPSBPKGUuZ2V0SWRUb2tlblJlc3VsdCh0KSk7XG4gIHJldHVybiBnKHIsIGksIG4pO1xufVxuZnVuY3Rpb24gcXIoZSkge1xuICBpZiAoKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuaGFzT3duUHJvcGVydHkoXCJyZXF1aXJlZENsYWltc1wiKSkgJiYgKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuaGFzT3duUHJvcGVydHkoXCJ2YWxpZGF0ZUN1c3RvbUNsYWltc1wiKSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBib3RoIFwicmVxdWlyZWRDbGFpbXNcIiBhbmQgXCJ2YWxpZGF0ZUN1c3RvbUNsYWltc1wiLiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nKTtcbiAgY29uc3QgdCA9IGt0KCk7XG4gIGxldCBuID0gYGF1dGg6c2lnbkluQ2hlY2s6JHt0Lm5hbWV9Ojpmb3JjZVJlZnJlc2g6JHshIShlICE9IG51bGwgJiYgZS5mb3JjZVJlZnJlc2gpfWA7XG4gIGUgIT0gbnVsbCAmJiBlLmZvcmNlUmVmcmVzaCAmJiAobiA9IGAke259OmZvcmNlUmVmcmVzaDoke2UuZm9yY2VSZWZyZXNofWApLCBlICE9IG51bGwgJiYgZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVpcmVkQ2xhaW1zXCIpID8gbiA9IGAke259OnJlcXVpcmVkQ2xhaW1zOiR7SlNPTi5zdHJpbmdpZnkoZS5yZXF1aXJlZENsYWltcyl9YCA6IGUgIT0gbnVsbCAmJiBlLmhhc093blByb3BlcnR5KFwidmFsaWRhdGVDdXN0b21DbGFpbXNcIikgJiYgKG4gPSBgJHtufTp2YWxpZGF0ZUN1c3RvbUNsYWltczoke0pTT04uc3RyaW5naWZ5KGUudmFsaWRhdGVDdXN0b21DbGFpbXMpfWApO1xuICBjb25zdCByID0geGUodCkucGlwZShtdCgoaSkgPT4ge1xuICAgIHZhciBvO1xuICAgIHJldHVybiBpID8gZSAmJiAoZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVpcmVkQ2xhaW1zXCIpIHx8IGUuaGFzT3duUHJvcGVydHkoXCJ2YWxpZGF0ZUN1c3RvbUNsYWltc1wiKSkgPyBPKGkuZ2V0SWRUb2tlblJlc3VsdCgobyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuZm9yY2VSZWZyZXNoKSAhPT0gbnVsbCAmJiBvICE9PSB2b2lkIDAgPyBvIDogITEpKS5waXBlKEMoKHUpID0+IHtcbiAgICAgIGxldCBhO1xuICAgICAgZS5oYXNPd25Qcm9wZXJ0eShcInJlcXVpcmVkQ2xhaW1zXCIpID8gYSA9IGlyKGUucmVxdWlyZWRDbGFpbXMpIDogYSA9IGUudmFsaWRhdGVDdXN0b21DbGFpbXM7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGhhc1JlcXVpcmVkQ2xhaW1zOiBzLFxuICAgICAgICBlcnJvcnM6IGNcbiAgICAgIH0gPSBhKHUuY2xhaW1zKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNpZ25lZEluOiAhMCxcbiAgICAgICAgaGFzUmVxdWlyZWRDbGFpbXM6IHMsXG4gICAgICAgIGVycm9yczogYyxcbiAgICAgICAgdXNlcjogaVxuICAgICAgfTtcbiAgICB9KSkgOiBlZSh7XG4gICAgICBzaWduZWRJbjogITAsXG4gICAgICBoYXNSZXF1aXJlZENsYWltczogITAsXG4gICAgICBlcnJvcnM6IHt9LFxuICAgICAgdXNlcjogaVxuICAgIH0pIDogZWUoe1xuICAgICAgc2lnbmVkSW46ICExLFxuICAgICAgaGFzUmVxdWlyZWRDbGFpbXM6ICExLFxuICAgICAgZXJyb3JzOiB7fSxcbiAgICAgIHVzZXI6IG51bGxcbiAgICB9KTtcbiAgfSkpO1xuICByZXR1cm4gZyhuLCByKTtcbn1cbmZ1bmN0aW9uIGlyKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG4pIHtcbiAgICBjb25zdCByID0ge307XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGkpID0+IHtcbiAgICAgIGVbaV0gIT09IG5baV0gJiYgKHJbaV0gPSBbbmV3IE1lKFwiYXV0aC9taXNzaW5nLWNsYWltXCIsIGBFeHBlY3RlZCBcIiR7ZVtpXX1cIiwgYnV0IHVzZXIgaGFzIFwiJHtuW2ldfVwiIGluc3RlYWRgKV0pO1xuICAgIH0pLCB7XG4gICAgICBoYXNSZXF1aXJlZENsYWltczogT2JqZWN0LmtleXMocikubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzOiByXG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG9yKHtcbiAgdXNlcjogZSxcbiAgZmFsbGJhY2s6IHQsXG4gIGNoaWxkcmVuOiBuLFxuICByZXF1aXJlZENsYWltczogclxufSkge1xuICBjb25zdCB7XG4gICAgZGF0YTogaVxuICB9ID0gcnIoZSwgITEpLCB7XG4gICAgY2xhaW1zOiBvXG4gIH0gPSBpLCB1ID0ge307XG4gIHJldHVybiByZSgpIHx8IGNvbnNvbGUud2FybihcIkNsYWltc0NoZWNrIGlzIGRlcHJlY2F0ZWQgYW5kIG9ubHkgd29ya3Mgd2hlbiBSZWFjdEZpcmUgaXMgaW4gZXhwZXJpbWVudGFsIFN1c3BlbnNlIE1vZGUuIFVzZSB1c2VTaWduaW5DaGVjayBvciBzZXQgc3VzcGVuc2U9e3RydWV9IGluIEZpcmViYXNlQXBwUHJvdmlkZXIgaWYgeW91IHdhbnQgdG8gdXNlIHRoaXMgY29tcG9uZW50LlwiKSwgciAmJiBPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChzKSA9PiB7XG4gICAgdmFyIGM7XG4gICAgcltzXSAhPT0gb1tzXSAmJiAodVtzXSA9IHtcbiAgICAgIGV4cGVjdGVkOiByW3NdLFxuICAgICAgYWN0dWFsOiAoYyA9IG9bc10pID09PSBudWxsIHx8IGMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGMudG9TdHJpbmcoKVxuICAgIH0pO1xuICB9KSwgT2JqZWN0LmtleXModSkubGVuZ3RoID09PSAwID8gZi5jcmVhdGVFbGVtZW50KGYuRnJhZ21lbnQsIG51bGwsIG4pIDogZi5jcmVhdGVFbGVtZW50KGYuRnJhZ21lbnQsIG51bGwsIHQpO1xufVxuZnVuY3Rpb24gUXIoe1xuICBmYWxsYmFjazogZSxcbiAgY2hpbGRyZW46IHQsXG4gIHJlcXVpcmVkQ2xhaW1zOiBuXG59KSB7XG4gIGNvbnN0IHtcbiAgICBkYXRhOiByXG4gIH0gPSBucigpO1xuICByZXR1cm4gcmUoKSB8fCBjb25zb2xlLndhcm4oXCJBdXRoQ2hlY2sgaXMgZGVwcmVjYXRlZCBhbmQgb25seSB3b3JrcyB3aGVuIFJlYWN0RmlyZSBpcyBpbiBleHBlcmltZW50YWwgU3VzcGVuc2UgTW9kZS4gVXNlIHVzZVNpZ25pbkNoZWNrIG9yIHNldCBzdXNwZW5zZT17dHJ1ZX0gaW4gRmlyZWJhc2VBcHBQcm92aWRlciBpZiB5b3Ugd2FudCB0byB1c2UgdGhpcyBjb21wb25lbnQuXCIpLCByID8gbiA/IGYuY3JlYXRlRWxlbWVudChvciwge1xuICAgIHVzZXI6IHIsXG4gICAgZmFsbGJhY2s6IGUsXG4gICAgcmVxdWlyZWRDbGFpbXM6IG5cbiAgfSwgdCkgOiBmLmNyZWF0ZUVsZW1lbnQoZi5GcmFnbWVudCwgbnVsbCwgdCkgOiBmLmNyZWF0ZUVsZW1lbnQoZi5GcmFnbWVudCwgbnVsbCwgZSk7XG59XG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbnZhciB0ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGUgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBuLCByID0gMSwgaSA9IGFyZ3VtZW50cy5sZW5ndGg7IHIgPCBpOyByKyspIHtcbiAgICAgIG4gPSBhcmd1bWVudHNbcl07XG4gICAgICBmb3IgKHZhciBvIGluIG4pXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCBvKSAmJiAodFtvXSA9IG5bb10pO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSwgdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5mdW5jdGlvbiBzZShlLCB0KSB7XG4gIGZvciAodmFyIG4gPSAwLCByID0gdC5sZW5ndGgsIGkgPSBlLmxlbmd0aDsgbiA8IHI7IG4rKywgaSsrKVxuICAgIGVbaV0gPSB0W25dO1xuICByZXR1cm4gZTtcbn1cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgVCwgbTtcbihmdW5jdGlvbihlKSB7XG4gIGUuYWRkZWQgPSBcImNoaWxkX2FkZGVkXCIsIGUucmVtb3ZlZCA9IFwiY2hpbGRfcmVtb3ZlZFwiLCBlLmNoYW5nZWQgPSBcImNoaWxkX2NoYW5nZWRcIiwgZS5tb3ZlZCA9IFwiY2hpbGRfbW92ZWRcIiwgZS52YWx1ZSA9IFwidmFsdWVcIjtcbn0pKG0gfHwgKG0gPSB7fSkpO1xudmFyIHVyID0gT2JqZWN0LmZyZWV6ZSgoVCA9IHt9LCBUW20uYWRkZWRdID0gUHQsIFRbbS5yZW1vdmVkXSA9ICR0LCBUW20uY2hhbmdlZF0gPSBUdCwgVFttLm1vdmVkXSA9IER0LCBUW20udmFsdWVdID0gUnQsIFQpKTtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBPZShlLCB0KSB7XG4gIHJldHVybiBuZXcgeShmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB1clt0XShlLCBmdW5jdGlvbihpLCBvKSB7XG4gICAgICBuLm5leHQoeyBzbmFwc2hvdDogaSwgcHJldktleTogbywgZXZlbnQ6IHQgfSk7XG4gICAgfSwgbi5lcnJvci5iaW5kKG4pKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBqdChlLCB0LCByKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KS5waXBlKFFuKDApKTtcbn1cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBhcihlKSB7XG4gIHJldHVybiAoZSA9PSBudWxsIHx8IGUubGVuZ3RoID09PSAwKSAmJiAoZSA9IFtcbiAgICBtLmFkZGVkLFxuICAgIG0ucmVtb3ZlZCxcbiAgICBtLmNoYW5nZWQsXG4gICAgbS5tb3ZlZFxuICBdKSwgZTtcbn1cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBzcihlKSB7XG4gIHJldHVybiBPZShlLCBtLnZhbHVlKTtcbn1cbmZ1bmN0aW9uIGNyKGUsIHQpIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KSwgT2UoZSwgbS52YWx1ZSkucGlwZShDKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gZ3QobiwgdCk7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIGd0KGUsIHQpIHtcbiAgdmFyIG47XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KTtcbiAgdmFyIHIgPSBlLnNuYXBzaG90LnZhbCgpO1xuICByZXR1cm4gIWUuc25hcHNob3QuZXhpc3RzKCkgfHwgdHlwZW9mIHIgIT0gXCJvYmplY3RcIiA/IHIgOiB0ZSh0ZSh7fSwgciksIHQua2V5RmllbGQgPyAobiA9IHt9LCBuW3Qua2V5RmllbGRdID0gZS5zbmFwc2hvdC5rZXksIG4pIDogbnVsbCk7XG59XG5mdW5jdGlvbiBscihlKSB7XG4gIHJldHVybiBPKFV0KGUpKS5waXBlKEMoZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gbS52YWx1ZTtcbiAgICByZXR1cm4geyBzbmFwc2hvdDogdCwgcHJldktleTogbnVsbCwgZXZlbnQ6IG4gfTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gd3QoZSwgdCkge1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSB7fSk7XG4gIHZhciBuID0gYXIodC5ldmVudHMpO1xuICByZXR1cm4gbHIoZSkucGlwZShtdChmdW5jdGlvbihyKSB7XG4gICAgaWYgKCFyLnNuYXBzaG90LmV4aXN0cygpKVxuICAgICAgcmV0dXJuIGVlKFtdKTtcbiAgICB2YXIgaSA9IFtlZShyKV07XG4gICAgcmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihvKSB7XG4gICAgICBpLnB1c2goT2UoZSwgbykpO1xuICAgIH0pLCBVbi5hcHBseSh2b2lkIDAsIGkpLnBpcGUoSm4odnIsIFtdKSk7XG4gIH0pLCBLbigpKTtcbn1cbmZ1bmN0aW9uIGZyKGUsIHQpIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KSwgd3QoZSkucGlwZShDKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbi5tYXAoZnVuY3Rpb24ocikge1xuICAgICAgcmV0dXJuIGd0KHIsIHQpO1xuICAgIH0pO1xuICB9KSk7XG59XG5mdW5jdGlvbiBfdChlLCB0KSB7XG4gIGZvciAodmFyIG4gPSBlLmxlbmd0aCwgciA9IDA7IHIgPCBuOyByKyspXG4gICAgaWYgKGVbcl0uc25hcHNob3Qua2V5ID09PSB0KVxuICAgICAgcmV0dXJuIHI7XG4gIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGRyKGUsIHQpIHtcbiAgaWYgKHQgPT0gbnVsbClcbiAgICByZXR1cm4gMDtcbiAgdmFyIG4gPSBfdChlLCB0KTtcbiAgcmV0dXJuIG4gPT09IC0xID8gZS5sZW5ndGggOiBuICsgMTtcbn1cbmZ1bmN0aW9uIHZyKGUsIHQpIHtcbiAgdmFyIG4gPSB0LnNuYXBzaG90LCByID0gdC5wcmV2S2V5LCBpID0gdC5ldmVudCwgbyA9IG4ua2V5LCB1ID0gX3QoZSwgbyksIGEgPSBkcihlLCByIHx8IHZvaWQgMCk7XG4gIHN3aXRjaCAoaSkge1xuICAgIGNhc2UgbS52YWx1ZTpcbiAgICAgIGlmICh0LnNuYXBzaG90ICYmIHQuc25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICAgICAgdmFyIHMgPSBudWxsO1xuICAgICAgICB0LnNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciB2ID0ge1xuICAgICAgICAgICAgc25hcHNob3Q6IGQsXG4gICAgICAgICAgICBldmVudDogbS52YWx1ZSxcbiAgICAgICAgICAgIHByZXZLZXk6IHNcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBzID0gZC5rZXksIGUgPSBzZShzZShbXSwgZSksIFt2XSksICExO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlO1xuICAgIGNhc2UgbS5hZGRlZDpcbiAgICAgIGlmICh1ID4gLTEpIHtcbiAgICAgICAgdmFyIGMgPSBlW3UgLSAxXTtcbiAgICAgICAgKGMgJiYgYy5zbmFwc2hvdC5rZXkgfHwgbnVsbCkgIT09IHIgJiYgKGUgPSBlLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIGQuc25hcHNob3Qua2V5ICE9PSBuLmtleTtcbiAgICAgICAgfSksIGUuc3BsaWNlKGEsIDAsIHQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyID09IG51bGwpXG4gICAgICAgICAgcmV0dXJuIHNlKFt0XSwgZSk7XG4gICAgICAgIGUgPSBlLnNsaWNlKCksIGUuc3BsaWNlKGEsIDAsIHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGU7XG4gICAgY2FzZSBtLnJlbW92ZWQ6XG4gICAgICByZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5zbmFwc2hvdC5rZXkgIT09IG4ua2V5O1xuICAgICAgfSk7XG4gICAgY2FzZSBtLmNoYW5nZWQ6XG4gICAgICByZXR1cm4gZS5tYXAoZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5zbmFwc2hvdC5rZXkgPT09IG8gPyB0IDogZDtcbiAgICAgIH0pO1xuICAgIGNhc2UgbS5tb3ZlZDpcbiAgICAgIGlmICh1ID4gLTEpIHtcbiAgICAgICAgdmFyIGwgPSBlLnNwbGljZSh1LCAxKVswXTtcbiAgICAgICAgcmV0dXJuIGUgPSBlLnNsaWNlKCksIGUuc3BsaWNlKGEsIDAsIGwpLCBlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBlO1xuICB9XG59XG5jb25zdCB2ZSA9IGdsb2JhbFRoaXMuX3JlYWN0RmlyZURhdGFiYXNlQ2FjaGVkUXVlcmllcyB8fCBbXTtcbmdsb2JhbFRoaXMuX3JlYWN0RmlyZURhdGFiYXNlQ2FjaGVkUXVlcmllcyB8fCAoZ2xvYmFsVGhpcy5fcmVhY3RGaXJlRGF0YWJhc2VDYWNoZWRRdWVyaWVzID0gdmUpO1xuZnVuY3Rpb24gU3QoZSkge1xuICBjb25zdCB0ID0gdmUuZmluZEluZGV4KChuKSA9PiBuLmlzRXF1YWwoZSkpO1xuICByZXR1cm4gdCA+IC0xID8gdCA6IHZlLnB1c2goZSkgLSAxO1xufVxuZnVuY3Rpb24gS3IoZSwgdCkge1xuICBjb25zdCBuID0gYGRhdGFiYXNlOm9iamVjdDoke2UudG9TdHJpbmcoKX1gLCByID0gc3IoZSk7XG4gIHJldHVybiBnKG4sIHIsIHQpO1xufVxuZnVuY3Rpb24gSHIoZSwgdCkge1xuICBjb25zdCBuID0gdCA/IEsodCkgOiBcIk5PX0lEX0ZJRUxEXCIsIHIgPSBgZGF0YWJhc2U6b2JqZWN0VmFsOiR7ZS50b1N0cmluZygpfTppZEZpZWxkPSR7bn1gLCBpID0gY3IoZSwge1xuICAgIGtleUZpZWxkOiBuXG4gIH0pO1xuICByZXR1cm4gZyhyLCBpLCB0KTtcbn1cbmZ1bmN0aW9uIFlyKGUsIHQpIHtcbiAgY29uc3QgbiA9IGBkYXRhYmFzZTpsaXN0OiR7U3QoZSl9YCwgciA9IHd0KGUpO1xuICByZXR1cm4gZyhuLCByLCB0KTtcbn1cbmZ1bmN0aW9uIEdyKGUsIHQpIHtcbiAgY29uc3QgbiA9IHQgPyBLKHQpIDogXCJOT19JRF9GSUVMRFwiLCByID0gYGRhdGFiYXNlOmxpc3RWYWw6JHtTdChlKX06aWRGaWVsZD0ke259YCwgaSA9IGZyKGUsIHtcbiAgICBrZXlGaWVsZDogblxuICB9KTtcbiAgcmV0dXJuIGcociwgaSwgdCk7XG59XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIGhyID0geyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMSB9O1xuZnVuY3Rpb24ga2UoZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gaHIpLCBuZXcgeShmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSBMdChlLCB0LCB7XG4gICAgICBuZXh0OiBuLm5leHQuYmluZChuKSxcbiAgICAgIGVycm9yOiBuLmVycm9yLmJpbmQobiksXG4gICAgICBjb21wbGV0ZTogbi5jb21wbGV0ZS5iaW5kKG4pXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmU6IHIgfTtcbiAgfSk7XG59XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gaWUoZSkge1xuICByZXR1cm4ga2UoZSwgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCB9KTtcbn1cbmZ1bmN0aW9uIEN0KGUsIHQpIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KSwgaWUoZSkucGlwZShDKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gRXQobiwgdCk7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIEV0KGUsIHQpIHtcbiAgdCA9PT0gdm9pZCAwICYmICh0ID0ge30pO1xuICB2YXIgbiA9IGUuZGF0YSgpO1xuICByZXR1cm4gIWUuZXhpc3RzKCkgfHwgdHlwZW9mIG4gIT0gXCJvYmplY3RcIiB8fCBuID09PSBudWxsIHx8IHQuaWRGaWVsZCAmJiAoblt0LmlkRmllbGRdID0gZS5pZCksIG47XG59XG5mdW5jdGlvbiBwcihlKSB7XG4gIHJldHVybiBrZShlLCB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwIH0pLnBpcGUoQyhmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHQuZG9jcztcbiAgfSkpO1xufVxuZnVuY3Rpb24gbXIoZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0ge30pLCBwcihlKS5waXBlKEMoZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuLm1hcChmdW5jdGlvbihyKSB7XG4gICAgICByZXR1cm4gRXQociwgdCk7XG4gICAgfSk7XG4gIH0pKTtcbn1cbmNsYXNzIGJyIGV4dGVuZHMgbmUge1xuICBjb25zdHJ1Y3Rvcih0LCBuKSB7XG4gICAgc3VwZXIoKSwgdGhpcy5fdGltZW91dFdpbmRvdyA9IG4sIHRoaXMuX2hhc1ZhbHVlID0gITEsIHRoaXMuX2Vycm9yID0gdm9pZCAwLCB0aGlzLl9maXJzdEVtaXNzaW9uID0gbmV3IFByb21pc2UoKHIpID0+IHRoaXMuX3Jlc29sdmVGaXJzdEVtaXNzaW9uID0gciksIHRoaXMuX2lubmVyT2JzZXJ2YWJsZSA9IHQucGlwZShCbih7XG4gICAgICBuZXh0OiAocikgPT4ge1xuICAgICAgICB0aGlzLl9uZXh0KHIpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiAocikgPT4ge1xuICAgICAgICB0aGlzLl9lcnJvciA9IHIsIHRoaXMuX3Jlc29sdmVGaXJzdEVtaXNzaW9uKCk7XG4gICAgICB9XG4gICAgfSksIHZ0KCgpID0+IG1uKCkpLCBabigxKSksIHRoaXMuX3dhcm11cFN1YnNjcmlwdGlvbiA9IHRoaXMuX2lubmVyT2JzZXJ2YWJsZS5zdWJzY3JpYmUoKSwgdGhpcy5fdGltZW91dEhhbmRsZXIgPSBzZXRUaW1lb3V0KHRoaXMuX3Jlc2V0LmJpbmQodGhpcyksIHRoaXMuX3RpbWVvdXRXaW5kb3cpO1xuICB9XG4gIGdldCBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzVmFsdWUgfHwgISF0aGlzLl9lcnJvcjtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgdGhyb3cgdGhpcy5fZXJyb3I7XG4gICAgaWYgKCF0aGlzLmhhc1ZhbHVlKVxuICAgICAgdGhyb3cgRXJyb3IoXCJDYW4gb25seSBnZXQgdmFsdWUgaWYgU3VzcGVuc2VTdWJqZWN0IGhhcyBhIHZhbHVlXCIpO1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuICBnZXQgZmlyc3RFbWlzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RFbWlzc2lvbjtcbiAgfVxuICBfbmV4dCh0KSB7XG4gICAgdGhpcy5faGFzVmFsdWUgPSAhMCwgdGhpcy5fdmFsdWUgPSB0LCB0aGlzLl9yZXNvbHZlRmlyc3RFbWlzc2lvbigpO1xuICB9XG4gIF9yZXNldCgpIHtcbiAgICB0aGlzLl93YXJtdXBTdWJzY3JpcHRpb24gJiYgdGhpcy5fd2FybXVwU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCksIHRoaXMuX2hhc1ZhbHVlID0gITEsIHRoaXMuX3ZhbHVlID0gdm9pZCAwLCB0aGlzLl9lcnJvciA9IHZvaWQgMCwgdGhpcy5fZmlyc3RFbWlzc2lvbiA9IG5ldyBQcm9taXNlKCh0KSA9PiB0aGlzLl9yZXNvbHZlRmlyc3RFbWlzc2lvbiA9IHQpO1xuICB9XG4gIF9zdWJzY3JpYmUodCkge1xuICAgIHJldHVybiB0aGlzLl90aW1lb3V0SGFuZGxlciAmJiBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dEhhbmRsZXIpLCB0aGlzLl9pbm5lclN1YnNjcmliZXIgPSB0aGlzLl9pbm5lck9ic2VydmFibGUuc3Vic2NyaWJlKHQpLCB0aGlzLl9pbm5lclN1YnNjcmliZXI7XG4gIH1cbiAgZ2V0IG91ckVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgfVxufVxuY29uc3QgeXIgPSAzZTQsIFogPSBnbG9iYWxUaGlzLl9yZWFjdEZpcmVQcmVsb2FkZWRPYnNlcnZhYmxlcyB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZ2xvYmFsVGhpcy5fcmVhY3RGaXJlUHJlbG9hZGVkT2JzZXJ2YWJsZXMgfHwgKGdsb2JhbFRoaXMuX3JlYWN0RmlyZVByZWxvYWRlZE9ic2VydmFibGVzID0gWik7XG5mdW5jdGlvbiBBZShlLCB0KSB7XG4gIGlmIChaLmhhcyh0KSlcbiAgICByZXR1cm4gWi5nZXQodCk7XG4gIHtcbiAgICBjb25zdCBuID0gbmV3IGJyKGUsIHlyKTtcbiAgICByZXR1cm4gWi5zZXQodCwgbiksIG47XG4gIH1cbn1cbmZ1bmN0aW9uIGdyKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBjb25zdCBpID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBuKSwgeyBoYXNFbWl0dGVkOiBuLmhhc0VtaXR0ZWQgfHwgZS5oYXNWYWx1ZSwgZXJyb3I6IGUub3VyRXJyb3IsIGZpcnN0VmFsdWVQcm9taXNlOiBlLmZpcnN0RW1pc3Npb24gfSk7XG4gICAgc3dpdGNoIChlLmhhc1ZhbHVlICYmIChpLmRhdGEgPSBlLnZhbHVlKSwgcikge1xuICAgICAgY2FzZSBcInZhbHVlXCI6XG4gICAgICAgIHJldHVybiBpLnN0YXR1cyA9IFwic3VjY2Vzc1wiLCBpO1xuICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgIHJldHVybiBpLnN0YXR1cyA9IFwiZXJyb3JcIiwgaTtcbiAgICAgIGNhc2UgXCJjb21wbGV0ZVwiOlxuICAgICAgICByZXR1cm4gaS5pc0NvbXBsZXRlID0gITAsIGk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgYWN0aW9uIFwiJHtyfVwiYCk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZyhlLCB0LCBuID0ge30pIHtcbiAgdmFyIHI7XG4gIGlmICghZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgY2FsbCB1c2VPYnNlcnZhYmxlIHdpdGhvdXQgYW4gb2JzZXJ2YWJsZUlkXCIpO1xuICBjb25zdCBpID0gQWUodCwgZSksIG8gPSBuLmhhc093blByb3BlcnR5KFwiaW5pdGlhbERhdGFcIikgfHwgbi5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0V2l0aFZhbHVlXCIpLCB1ID0gaS5oYXNWYWx1ZSB8fCBvO1xuICBpZiAocmUobi5zdXNwZW5zZSkgPT09ICEwICYmICF1KVxuICAgIHRocm93IGkuZmlyc3RFbWlzc2lvbjtcbiAgY29uc3QgcyA9IHtcbiAgICBzdGF0dXM6IHUgPyBcInN1Y2Nlc3NcIiA6IFwibG9hZGluZ1wiLFxuICAgIGhhc0VtaXR0ZWQ6IHUsXG4gICAgaXNDb21wbGV0ZTogITEsXG4gICAgZGF0YTogaS5oYXNWYWx1ZSA/IGkudmFsdWUgOiAociA9IG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4uaW5pdGlhbERhdGEpICE9PSBudWxsICYmIHIgIT09IHZvaWQgMCA/IHIgOiBuID09IG51bGwgPyB2b2lkIDAgOiBuLnN0YXJ0V2l0aFZhbHVlLFxuICAgIGVycm9yOiBpLm91ckVycm9yLFxuICAgIGZpcnN0VmFsdWVQcm9taXNlOiBpLmZpcnN0RW1pc3Npb25cbiAgfSwgW2MsIGxdID0gZi51c2VSZWR1Y2VyKGdyKGkpLCBzKTtcbiAgcmV0dXJuIGYudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBkID0gaS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICBsKFwidmFsdWVcIik7XG4gICAgICB9LFxuICAgICAgZXJyb3I6ICh2KSA9PiB7XG4gICAgICAgIHRocm93IGwoXCJlcnJvclwiKSwgdjtcbiAgICAgIH0sXG4gICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICBsKFwiY29tcGxldGVcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IGQudW5zdWJzY3JpYmUoKTtcbiAgfSwgW2ldKSwgYztcbn1cbmNvbnN0IGhlID0gZ2xvYmFsVGhpcy5fcmVhY3RGaXJlRmlyZXN0b3JlUXVlcnlDYWNoZSB8fCBbXTtcbmdsb2JhbFRoaXMuX3JlYWN0RmlyZUZpcmVzdG9yZVF1ZXJ5Q2FjaGUgfHwgKGdsb2JhbFRoaXMuX3JlYWN0RmlyZUZpcmVzdG9yZVF1ZXJ5Q2FjaGUgPSBoZSk7XG5mdW5jdGlvbiB4dChlKSB7XG4gIGNvbnN0IHQgPSBoZS5maW5kSW5kZXgoKG4pID0+IE50KG4sIGUpKTtcbiAgcmV0dXJuIHQgPiAtMSA/IHQgOiBoZS5wdXNoKGUpIC0gMTtcbn1cbmZ1bmN0aW9uIEpyKGUpIHtcbiAgcmV0dXJuIHBlKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHQgPSB5aWVsZCBlKCk7XG4gICAgcmV0dXJuIEFlKGllKHQpLCBJdCh0KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gSXQoZSkge1xuICByZXR1cm4gYGZpcmVzdG9yZTpkb2M6JHtlLmZpcmVzdG9yZS5hcHAubmFtZX06JHtlLnBhdGh9YDtcbn1cbmZ1bmN0aW9uIHpyKGUsIHQpIHtcbiAgY29uc3QgbiA9IEl0KGUpLCByID0gaWUoZSk7XG4gIHJldHVybiBnKG4sIHIsIHQpO1xufVxuZnVuY3Rpb24gWnIoZSwgdCkge1xuICBjb25zdCBuID0gYGZpcmVzdG9yZTpkb2NPbmNlOiR7ZS5maXJlc3RvcmUuYXBwLm5hbWV9OiR7ZS5wYXRofWAsIHIgPSBpZShlKS5waXBlKHB0KCkpO1xuICByZXR1cm4gZyhuLCByLCB0KTtcbn1cbmZ1bmN0aW9uIEJyKGUsIHQpIHtcbiAgY29uc3QgbiA9IHQgPyBLKHQpIDogXCJOT19JRF9GSUVMRFwiLCByID0gYGZpcmVzdG9yZTpkb2NEYXRhOiR7ZS5maXJlc3RvcmUuYXBwLm5hbWV9OiR7ZS5wYXRofTppZEZpZWxkPSR7bn1gLCBpID0gQ3QoZSwge1xuICAgIGlkRmllbGQ6IG5cbiAgfSk7XG4gIHJldHVybiBnKHIsIGksIHQpO1xufVxuZnVuY3Rpb24gWHIoZSwgdCkge1xuICBjb25zdCBuID0gdCA/IEsodCkgOiBcIk5PX0lEX0ZJRUxEXCIsIHIgPSBgZmlyZXN0b3JlOmRvY0RhdGFPbmNlOiR7ZS5maXJlc3RvcmUuYXBwLm5hbWV9OiR7ZS5wYXRofTppZEZpZWxkPSR7bn1gLCBpID0gQ3QoZSwge1xuICAgIGlkRmllbGQ6IG5cbiAgfSkucGlwZShwdCgpKTtcbiAgcmV0dXJuIGcociwgaSwgdCk7XG59XG5mdW5jdGlvbiBlaShlLCB0KSB7XG4gIGNvbnN0IG4gPSBgZmlyZXN0b3JlOmNvbGxlY3Rpb246JHt4dChlKX1gLCByID0ga2UoZSk7XG4gIHJldHVybiBnKG4sIHIsIHQpO1xufVxuZnVuY3Rpb24gdGkoZSwgdCkge1xuICBjb25zdCBuID0gdCA/IEsodCkgOiBcIk5PX0lEX0ZJRUxEXCIsIHIgPSBgZmlyZXN0b3JlOmNvbGxlY3Rpb25EYXRhOiR7eHQoZSl9OmlkRmllbGQ9JHtufWAsIGkgPSBtcihlLCB7XG4gICAgaWRGaWVsZDogblxuICB9KTtcbiAgcmV0dXJuIGcociwgaSwgdCk7XG59XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gd3IoZSwgdCwgbikge1xuICB2YXIgciA9IFd0KGUsIHQsIG4pO1xuICByZXR1cm4gZnVuY3Rpb24oaSkge1xuICAgIHJldHVybiBPKHIoaSkpLnBpcGUoQyhmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gby5kYXRhO1xuICAgIH0pKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG5pKGUsIHQpIHtcbiAgY29uc3QgbiA9IEZyKCksIHIgPSBgZnVuY3Rpb25zOmNhbGxhYmxlUmVzcG9uc2U6JHtlfToke0pTT04uc3RyaW5naWZ5KHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuZGF0YSl9OiR7SlNPTi5zdHJpbmdpZnkodCA9PSBudWxsID8gdm9pZCAwIDogdC5odHRwc0NhbGxhYmxlT3B0aW9ucyl9YCwgbyA9IHdyKG4sIGUsIHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuaHR0cHNDYWxsYWJsZU9wdGlvbnMpKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuZGF0YSk7XG4gIHJldHVybiBnKHIsIG8sIHQpO1xufVxuZnVuY3Rpb24gcmkoe1xuICBjaGlsZHJlbjogZSxcbiAgdHJhY2VJZDogdCxcbiAgZmFsbGJhY2s6IG5cbn0pIHtcbiAgdmFyIHI7XG4gIGNvbnN0IGkgPSAoKHIgPSBwZXJmb3JtYW5jZSA9PSBudWxsID8gdm9pZCAwIDogcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5TmFtZSkgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5jYWxsKHBlcmZvcm1hbmNlLCB0LCBcIm1lYXN1cmVcIikpIHx8IFtdLCBvID0gYF8ke3R9U3RhcnRbJHtpLmxlbmd0aH1dYCwgdSA9IGBfJHt0fUVuZFske2kubGVuZ3RofV1gLCBhID0gKCkgPT4gKGYudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICB2YXIgcztcbiAgICByZXR1cm4gKHMgPSBwZXJmb3JtYW5jZSA9PSBudWxsID8gdm9pZCAwIDogcGVyZm9ybWFuY2UubWFyaykgPT09IG51bGwgfHwgcyA9PT0gdm9pZCAwIHx8IHMuY2FsbChwZXJmb3JtYW5jZSwgbyksICgpID0+IHtcbiAgICAgIHZhciBjLCBsO1xuICAgICAgKGMgPSBwZXJmb3JtYW5jZSA9PSBudWxsID8gdm9pZCAwIDogcGVyZm9ybWFuY2UubWFyaykgPT09IG51bGwgfHwgYyA9PT0gdm9pZCAwIHx8IGMuY2FsbChwZXJmb3JtYW5jZSwgdSksIChsID0gcGVyZm9ybWFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHBlcmZvcm1hbmNlLm1lYXN1cmUpID09PSBudWxsIHx8IGwgPT09IHZvaWQgMCB8fCBsLmNhbGwocGVyZm9ybWFuY2UsIHQsIG8sIHUpO1xuICAgIH07XG4gIH0sIFtdKSwgZi5jcmVhdGVFbGVtZW50KGYuRnJhZ21lbnQsIG51bGwsIG4pKTtcbiAgcmV0dXJuIGYuY3JlYXRlRWxlbWVudChmLlN1c3BlbnNlLCB7XG4gICAgZmFsbGJhY2s6IGYuY3JlYXRlRWxlbWVudChhLCBudWxsKVxuICB9LCBlKTtcbn1cbmZ1bmN0aW9uIHEoZSkge1xuICB2YXIgdCA9IGUucmVtb3RlQ29uZmlnLCBuID0gZS5rZXksIHIgPSBlLmdldHRlcjtcbiAgcmV0dXJuIG5ldyB5KGZ1bmN0aW9uKGkpIHtcbiAgICBLdCh0KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG8gPSByLmJpbmQodCk7XG4gICAgICBpLm5leHQobyh0LCBuKSk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gX3IoZSwgdCkge1xuICB2YXIgbiA9IEh0O1xuICByZXR1cm4gcSh7IHJlbW90ZUNvbmZpZzogZSwga2V5OiB0LCBnZXR0ZXI6IG4gfSk7XG59XG5mdW5jdGlvbiBTcihlLCB0KSB7XG4gIHZhciBuID0gWXQ7XG4gIHJldHVybiBxKHsgcmVtb3RlQ29uZmlnOiBlLCBrZXk6IHQsIGdldHRlcjogbiB9KTtcbn1cbmZ1bmN0aW9uIENyKGUsIHQpIHtcbiAgdmFyIG4gPSBHdDtcbiAgcmV0dXJuIHEoeyByZW1vdGVDb25maWc6IGUsIGtleTogdCwgZ2V0dGVyOiBuIH0pO1xufVxuZnVuY3Rpb24gRXIoZSwgdCkge1xuICB2YXIgbiA9IEp0O1xuICByZXR1cm4gcSh7IHJlbW90ZUNvbmZpZzogZSwga2V5OiB0LCBnZXR0ZXI6IG4gfSk7XG59XG5mdW5jdGlvbiB4cihlKSB7XG4gIHZhciB0ID0genQ7XG4gIHJldHVybiBxKHsgcmVtb3RlQ29uZmlnOiBlLCBrZXk6IFwiXCIsIGdldHRlcjogdCB9KTtcbn1cbmZ1bmN0aW9uIFEoZSwgdCkge1xuICBjb25zdCBuID0gJHIoKSwgciA9IG4uYXBwLm5hbWUsIGkgPSB0KG4sIGUpLCBvID0gYHJlbW90ZUNvbmZpZzoke2V9OiR7dC5uYW1lfToke3J9YDtcbiAgcmV0dXJuIGcobywgaSk7XG59XG5mdW5jdGlvbiBpaShlKSB7XG4gIHJldHVybiBRKGUsIF9yKTtcbn1cbmZ1bmN0aW9uIG9pKGUpIHtcbiAgcmV0dXJuIFEoZSwgU3IpO1xufVxuZnVuY3Rpb24gdWkoZSkge1xuICByZXR1cm4gUShlLCBDcik7XG59XG5mdW5jdGlvbiBhaShlKSB7XG4gIHJldHVybiBRKGUsIEVyKTtcbn1cbmZ1bmN0aW9uIHNpKGUpIHtcbiAgcmV0dXJuIFEoZSwgeHIpO1xufVxuZnVuY3Rpb24gSXIoZSkge1xuICByZXR1cm4gbmV3IHkoZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gZnVuY3Rpb24odSkge1xuICAgICAgcmV0dXJuIHQubmV4dCh1KTtcbiAgICB9LCByID0gZnVuY3Rpb24odSkge1xuICAgICAgcmV0dXJuIHQuZXJyb3IodSk7XG4gICAgfSwgaSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIG4oZS5zbmFwc2hvdCk7XG4gICAgdmFyIG8gPSBlLm9uKFwic3RhdGVfY2hhbmdlZFwiLCBuKTtcbiAgICByZXR1cm4gZS50aGVuKGZ1bmN0aW9uKHUpIHtcbiAgICAgIG4odSksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpKCk7XG4gICAgICB9LCAwKTtcbiAgICB9LCBmdW5jdGlvbih1KSB7XG4gICAgICBuKGUuc25hcHNob3QpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcih1KTtcbiAgICAgIH0sIDApO1xuICAgIH0pLCBmdW5jdGlvbigpIHtcbiAgICAgIG8oKTtcbiAgICB9O1xuICB9KS5waXBlKExuKDApKTtcbn1cbmZ1bmN0aW9uIE9yKGUpIHtcbiAgcmV0dXJuIE8ocXQoZSkpO1xufVxuZnVuY3Rpb24gY2koZSwgdCwgbikge1xuICBjb25zdCByID0gYHN0b3JhZ2U6dGFzazoke3QudG9TdHJpbmcoKX1gLCBpID0gSXIoZSk7XG4gIHJldHVybiBnKHIsIGksIG4pO1xufVxuZnVuY3Rpb24ga3IoZSwgdCkge1xuICBjb25zdCBuID0gYHN0b3JhZ2U6ZG93bmxvYWRVcmw6JHtlLnRvU3RyaW5nKCl9YCwgciA9IE9yKGUpO1xuICByZXR1cm4gZyhuLCByLCB0KTtcbn1cbmZ1bmN0aW9uIEFyKGUpIHtcbiAgY29uc3QgdCA9IFByKCk7XG4gIHJldHVybiBlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlKSwge1xuICAgIHN0b3JhZ2U6IHRcbiAgfSksIGYuY3JlYXRlRWxlbWVudChPdCwgT2JqZWN0LmFzc2lnbih7fSwgZSkpO1xufVxuZnVuY3Rpb24gT3QoZSkge1xuICBsZXQge1xuICAgIHN0b3JhZ2U6IHQsXG4gICAgc3RvcmFnZVBhdGg6IG4sXG4gICAgc3VzcGVuc2U6IHIsXG4gICAgcGxhY2VIb2xkZXI6IGlcbiAgfSA9IGUsIG8gPSBadChlLCBbXCJzdG9yYWdlXCIsIFwic3RvcmFnZVBhdGhcIiwgXCJzdXNwZW5zZVwiLCBcInBsYWNlSG9sZGVyXCJdKTtcbiAgY29uc3QgdSA9IHtcbiAgICBzdXNwZW5zZTogcmUocilcbiAgfTtcbiAgaWYgKCF0KVxuICAgIHRocm93IG5ldyBFcnJvcihcIlN0b3JhZ2Ugd2FzIG5vdCBwYXNzZWQgdG8gY29tcG9uZW50IElOVEVSTkFMU3RvcmFnZUltYWdlLiBUaGlzIHNob3VsZCBub3QgYmUgcG9zc2libGVcIik7XG4gIGNvbnN0IHtcbiAgICBzdGF0dXM6IGEsXG4gICAgZGF0YTogc1xuICB9ID0ga3IoUXQodCwgbiksIHUpO1xuICByZXR1cm4gYSA9PT0gXCJzdWNjZXNzXCIgPyAoby5hbHQgfHwgby5hbHQgPT09IFwiXCIgfHwgY29uc29sZS53YXJuKGBObyBhbHQgcHJvcCBwcm92aWRlZCBmb3IgU3RvcmFnZUltYWdlIHdpdGggc3RvcmFnZVBhdGggXCIke259XCJgLCBcImltZyBlbGVtZW50cyBtdXN0IGhhdmUgYW4gYWx0IHByb3AsIGVpdGhlciB3aXRoIG1lYW5pbmdmdWwgdGV4dCwgb3IgYW4gZW1wdHkgc3RyaW5nIGZvciBkZWNvcmF0aXZlIGltYWdlc1wiKSwgZi5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIE9iamVjdC5hc3NpZ24oe1xuICAgIHNyYzogcyxcbiAgICBhbHQ6IG8uYWx0XG4gIH0sIG8pKSkgOiBpICE9IG51bGwgPyBpIDogZi5jcmVhdGVFbGVtZW50KGYuRnJhZ21lbnQsIG51bGwsIFwiJydcIik7XG59XG5mdW5jdGlvbiBsaShlKSB7XG4gIGxldCB7XG4gICAgc3RvcmFnZTogdFxuICB9ID0gZTtcbiAgcmV0dXJuIHQgPyBmLmNyZWF0ZUVsZW1lbnQoT3QsIE9iamVjdC5hc3NpZ24oe30sIGUpKSA6IGYuY3JlYXRlRWxlbWVudChBciwgT2JqZWN0LmFzc2lnbih7fSwgZSkpO1xufVxuY29uc3QgRmUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgUGUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgJGUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgVGUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgRGUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgUmUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgamUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgVWUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKSwgVmUgPSBmLmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIGsoZSkge1xuICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIGlmICghbi5zZGspXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBzZGsgcHJvdmlkZWRcIik7XG4gICAgY29uc3QgbyA9IHl0KCkubmFtZTtcbiAgICBpZiAoKChpID0gKHIgPSBuID09IG51bGwgPyB2b2lkIDAgOiBuLnNkaykgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5hcHApID09PSBudWxsIHx8IGkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGkubmFtZSkgIT09IG8pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzZGsgd2FzIGluaXRpYWxpemVkIHdpdGggYSBkaWZmZXJlbnQgZmlyZWJhc2UgYXBwXCIpO1xuICAgIHJldHVybiBmLmNyZWF0ZUVsZW1lbnQoZS5Qcm92aWRlciwgT2JqZWN0LmFzc2lnbih7XG4gICAgICB2YWx1ZTogbi5zZGtcbiAgICB9LCBuKSk7XG4gIH07XG59XG5mdW5jdGlvbiBBKGUpIHtcbiAgY29uc3QgdCA9IGYudXNlQ29udGV4dChlKTtcbiAgaWYgKCF0KVxuICAgIHRocm93IG5ldyBFcnJvcihcIlNESyBub3QgZm91bmQuIHVzZVNkayBtdXN0IGJlIGNhbGxlZCBmcm9tIHdpdGhpbiBhIHByb3ZpZGVyXCIpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIEYoZSwgdCwgbiwgcikge1xuICBjb25zdCBpID0geXQoKTtcbiAgaWYgKGYudXNlQ29udGV4dCh0KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBpbml0aWFsaXplIFNESyAke2V9IGJlY2F1c2UgaXQgYWxyZWFkeSBleGlzdHMgaW4gQ29udGV4dGApO1xuICBjb25zdCBvID0gZi51c2VNZW1vKCgpID0+IG4oaSksIFtpXSk7XG4gIHJldHVybiBnKGBmaXJlYmFzZS1zZGs6JHtlfToke2kubmFtZX1gLCBPKG8pLCByKTtcbn1cbmNvbnN0IGZpID0gayhGZSksIGRpID0gayhQZSksIHZpID0gaygkZSksIGhpID0gayhUZSksIHBpID0gayhEZSksIG1pID0gayhSZSksIGJpID0gayhVZSksIHlpID0gayhqZSksIGdpID0gayhWZSksIHdpID0gKCkgPT4gQShGZSksIGt0ID0gKCkgPT4gQShQZSksIF9pID0gKCkgPT4gQSgkZSksIFNpID0gKCkgPT4gQShUZSksIENpID0gKCkgPT4gQShEZSksIEZyID0gKCkgPT4gQShSZSksIEVpID0gKCkgPT4gQShVZSksIFByID0gKCkgPT4gQShqZSksICRyID0gKCkgPT4gQShWZSksIHhpID0gKGUsIHQpID0+IEYoXCJhcHBjaGVja1wiLCBGZSwgZSwgdCksIElpID0gKGUsIHQpID0+IEYoXCJhdXRoXCIsIFBlLCBlLCB0KSwgT2kgPSAoZSwgdCkgPT4gRihcImFuYWx5dGljc1wiLCAkZSwgZSwgdCksIGtpID0gKGUsIHQpID0+IEYoXCJkYXRhYmFzZVwiLCBUZSwgZSwgdCksIEFpID0gKGUsIHQpID0+IEYoXCJmaXJlc3RvcmVcIiwgRGUsIGUsIHQpLCBGaSA9IChlLCB0KSA9PiBGKFwiZnVuY3Rpb25zXCIsIFJlLCBlLCB0KSwgUGkgPSAoZSwgdCkgPT4gRihcInBlcmZvcm1hbmNlXCIsIFVlLCBlLCB0KSwgJGkgPSAoZSwgdCkgPT4gRihcInJlbW90ZWNvbmZpZ1wiLCBWZSwgZSwgdCksIFRpID0gKGUsIHQpID0+IEYoXCJzdG9yYWdlXCIsIGplLCBlLCB0KTtcbmNsYXNzIE1lIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCBuLCByKSB7XG4gICAgc3VwZXIobiksIHRoaXMuY29kZSA9IHQsIHRoaXMuY3VzdG9tRGF0YSA9IHIsIHRoaXMubmFtZSA9IFwiUmVhY3RGaXJlRXJyb3JcIiwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE1lLnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIEF0KGUsIHQpIHtcbiAgaWYgKHQgPT09IFwiaWRGaWVsZFwiIHx8IHQgPT09IFwiaW5pdGlhbERhdGFcIiB8fCB0ID09PSBcInN1c3BlbnNlXCIpXG4gICAgcmV0dXJuIGUgPyBlW3RdIDogdm9pZCAwO1xuICB0aHJvdyBuZXcgRXJyb3IoYEZpZWxkIFwiJHt0fVwiIGlzIG5vdCBhIHZhbGlkIGtleSBpbiBSZWFjdEZpcmVPcHRpb25zYCk7XG59XG5mdW5jdGlvbiBEaShlKSB7XG4gIHJldHVybiBBdChlLCBcImluaXRpYWxEYXRhXCIpO1xufVxuZnVuY3Rpb24gSyhlKSB7XG4gIHJldHVybiBBdChlLCBcImlkRmllbGRcIik7XG59XG5leHBvcnQge1xuICB2aSBhcyBBbmFseXRpY3NQcm92aWRlcixcbiAgJGUgYXMgQW5hbHl0aWNzU2RrQ29udGV4dCxcbiAgZmkgYXMgQXBwQ2hlY2tQcm92aWRlcixcbiAgRmUgYXMgQXBwQ2hlY2tTZGtDb250ZXh0LFxuICBRciBhcyBBdXRoQ2hlY2ssXG4gIGRpIGFzIEF1dGhQcm92aWRlcixcbiAgUGUgYXMgQXV0aFNka0NvbnRleHQsXG4gIG9yIGFzIENsYWltc0NoZWNrLFxuICBoaSBhcyBEYXRhYmFzZVByb3ZpZGVyLFxuICBUZSBhcyBEYXRhYmFzZVNka0NvbnRleHQsXG4gIExyIGFzIEZpcmViYXNlQXBwUHJvdmlkZXIsXG4gIHBpIGFzIEZpcmVzdG9yZVByb3ZpZGVyLFxuICBEZSBhcyBGaXJlc3RvcmVTZGtDb250ZXh0LFxuICBtaSBhcyBGdW5jdGlvbnNQcm92aWRlcixcbiAgUmUgYXMgRnVuY3Rpb25zU2RrQ29udGV4dCxcbiAgYmkgYXMgUGVyZm9ybWFuY2VQcm92aWRlcixcbiAgVWUgYXMgUGVyZm9ybWFuY2VTZGtDb250ZXh0LFxuICBNZSBhcyBSZWFjdEZpcmVFcnJvcixcbiAgZ2kgYXMgUmVtb3RlQ29uZmlnUHJvdmlkZXIsXG4gIFZlIGFzIFJlbW90ZUNvbmZpZ1Nka0NvbnRleHQsXG4gIGxpIGFzIFN0b3JhZ2VJbWFnZSxcbiAgeWkgYXMgU3RvcmFnZVByb3ZpZGVyLFxuICBqZSBhcyBTdG9yYWdlU2RrQ29udGV4dCxcbiAgcmkgYXMgU3VzcGVuc2VXaXRoUGVyZixcbiAgSyBhcyBjaGVja0lkRmllbGQsXG4gIEF0IGFzIGNoZWNrT3B0aW9ucyxcbiAgRGkgYXMgY2hlY2tpbml0aWFsRGF0YSxcbiAgSnIgYXMgcHJlbG9hZEZpcmVzdG9yZURvYyxcbiAgQWUgYXMgcHJlbG9hZE9ic2VydmFibGUsXG4gIFdyIGFzIHByZWxvYWRVc2VyLFxuICBfaSBhcyB1c2VBbmFseXRpY3MsXG4gIHdpIGFzIHVzZUFwcENoZWNrLFxuICBrdCBhcyB1c2VBdXRoLFxuICBuaSBhcyB1c2VDYWxsYWJsZUZ1bmN0aW9uUmVzcG9uc2UsXG4gIFNpIGFzIHVzZURhdGFiYXNlLFxuICBZciBhcyB1c2VEYXRhYmFzZUxpc3QsXG4gIEdyIGFzIHVzZURhdGFiYXNlTGlzdERhdGEsXG4gIEtyIGFzIHVzZURhdGFiYXNlT2JqZWN0LFxuICBIciBhcyB1c2VEYXRhYmFzZU9iamVjdERhdGEsXG4gIHl0IGFzIHVzZUZpcmViYXNlQXBwLFxuICBDaSBhcyB1c2VGaXJlc3RvcmUsXG4gIGVpIGFzIHVzZUZpcmVzdG9yZUNvbGxlY3Rpb24sXG4gIHRpIGFzIHVzZUZpcmVzdG9yZUNvbGxlY3Rpb25EYXRhLFxuICB6ciBhcyB1c2VGaXJlc3RvcmVEb2MsXG4gIEJyIGFzIHVzZUZpcmVzdG9yZURvY0RhdGEsXG4gIFhyIGFzIHVzZUZpcmVzdG9yZURvY0RhdGFPbmNlLFxuICBaciBhcyB1c2VGaXJlc3RvcmVEb2NPbmNlLFxuICBGciBhcyB1c2VGdW5jdGlvbnMsXG4gIHJyIGFzIHVzZUlkVG9rZW5SZXN1bHQsXG4gIE9pIGFzIHVzZUluaXRBbmFseXRpY3MsXG4gIHhpIGFzIHVzZUluaXRBcHBDaGVjayxcbiAgSWkgYXMgdXNlSW5pdEF1dGgsXG4gIGtpIGFzIHVzZUluaXREYXRhYmFzZSxcbiAgQWkgYXMgdXNlSW5pdEZpcmVzdG9yZSxcbiAgRmkgYXMgdXNlSW5pdEZ1bmN0aW9ucyxcbiAgUGkgYXMgdXNlSW5pdFBlcmZvcm1hbmNlLFxuICAkaSBhcyB1c2VJbml0UmVtb3RlQ29uZmlnLFxuICBUaSBhcyB1c2VJbml0U3RvcmFnZSxcbiAgTnIgYXMgdXNlSXNTdXNwZW5zZUVuYWJsZWQsXG4gIGcgYXMgdXNlT2JzZXJ2YWJsZSxcbiAgRWkgYXMgdXNlUGVyZm9ybWFuY2UsXG4gICRyIGFzIHVzZVJlbW90ZUNvbmZpZyxcbiAgc2kgYXMgdXNlUmVtb3RlQ29uZmlnQWxsLFxuICBhaSBhcyB1c2VSZW1vdGVDb25maWdCb29sZWFuLFxuICB1aSBhcyB1c2VSZW1vdGVDb25maWdOdW1iZXIsXG4gIG9pIGFzIHVzZVJlbW90ZUNvbmZpZ1N0cmluZyxcbiAgaWkgYXMgdXNlUmVtb3RlQ29uZmlnVmFsdWUsXG4gIHFyIGFzIHVzZVNpZ25pbkNoZWNrLFxuICBQciBhcyB1c2VTdG9yYWdlLFxuICBrciBhcyB1c2VTdG9yYWdlRG93bmxvYWRVUkwsXG4gIGNpIGFzIHVzZVN0b3JhZ2VUYXNrLFxuICByZSBhcyB1c2VTdXNwZW5zZUVuYWJsZWRGcm9tQ29uZmlnQW5kQ29udGV4dCxcbiAgbnIgYXMgdXNlVXNlcixcbiAgZXIgYXMgdmVyc2lvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/reactfire/dist/index.js\n");

/***/ })

};
;